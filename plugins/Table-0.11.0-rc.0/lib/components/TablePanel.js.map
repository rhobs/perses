{"version":3,"sources":["../../../src/components/TablePanel.tsx"],"sourcesContent":["// Copyright 2024 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { PanelData, PanelProps } from '@perses-dev/plugin-system';\nimport { Table, TableCellConfigs, TableColumnConfig } from '@perses-dev/components';\nimport { ReactElement, useEffect, useMemo, useState } from 'react';\nimport { formatValue, Labels, QueryDataType, TimeSeries, TimeSeriesData, transformData } from '@perses-dev/core';\nimport { PaginationState, SortingState, ColumnFiltersState } from '@tanstack/react-table';\nimport { useTheme, Theme, Typography, Box } from '@mui/material';\nimport { ColumnSettings, TableOptions, evaluateConditionalFormatting } from '../models';\nimport { EmbeddedPanel } from './EmbeddedPanel';\n\nfunction generateCellContentConfig(\n  column: ColumnSettings\n): Pick<TableColumnConfig<unknown>, 'cellDescription' | 'cell'> {\n  const plugin = column.plugin;\n  if (plugin !== undefined) {\n    return {\n      cell: (ctx) => {\n        const panelData: PanelData<QueryDataType> | undefined = ctx.getValue();\n        if (!panelData) return <></>;\n        return <EmbeddedPanel kind={plugin.kind} spec={plugin.spec} queryResults={[panelData]} />;\n      },\n      cellDescription: column.cellDescription ? () => `${column.cellDescription}` : () => '', // disable hover text\n    };\n  }\n\n  return {\n    cell: (ctx) => {\n      const cellValue = ctx.getValue();\n      return typeof cellValue === 'number' && column.format ? formatValue(cellValue, column.format) : cellValue;\n    },\n    cellDescription: column.cellDescription ? (): string => `${column.cellDescription}` : undefined, // TODO: variable rendering + cell value\n  };\n}\n\ninterface ColumnFilterDropdownProps {\n  allValues: Array<string | number>;\n  selectedValues: Array<string | number>;\n  onFilterChange: (values: Array<string | number>) => void;\n  theme: Theme;\n}\n\nfunction ColumnFilterDropdown({\n  allValues,\n  selectedValues,\n  onFilterChange,\n  theme,\n}: ColumnFilterDropdownProps): ReactElement {\n  const values = [...new Set(allValues)].filter((v) => v != null).sort();\n  if (values.length === 0) {\n    return (\n      <div\n        data-filter-dropdown\n        style={{\n          width: 200,\n          padding: 10,\n          backgroundColor: theme.palette.background.paper,\n          border: `1px solid ${theme.palette.divider}`,\n          borderRadius: 4,\n          boxShadow: theme.shadows[4],\n        }}\n      >\n        <div style={{ color: theme.palette.text.secondary, fontSize: 14 }}>No values found</div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      data-filter-dropdown\n      style={{\n        width: 200,\n        padding: 10,\n        backgroundColor: theme.palette.background.paper,\n        border: `1px solid ${theme.palette.divider}`,\n        borderRadius: 4,\n        boxShadow: theme.shadows[4],\n        maxHeight: 250,\n        overflowY: 'auto',\n      }}\n    >\n      <div style={{ marginBottom: 8, fontSize: 14, fontWeight: 'bold' }}>\n        <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            checked={selectedValues.length === values.length && values.length > 0}\n            onChange={(e) => onFilterChange(e.target.checked ? values : [])}\n            style={{ marginRight: 8 }}\n          />\n          <span style={{ color: theme.palette.text.primary }}>Select All ({values.length})</span>\n        </label>\n      </div>\n      <hr\n        style={{\n          margin: '8px 0',\n          border: 'none',\n          borderTop: `1px solid ${theme.palette.divider}`,\n        }}\n      />\n      {values.map((value, index) => (\n        <div key={`value-${index}`} style={{ marginBottom: 4 }}>\n          <label\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              cursor: 'pointer',\n              padding: '2px 0',\n              borderRadius: 2,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.backgroundColor = theme.palette.action.hover;\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.backgroundColor = 'transparent';\n            }}\n          >\n            <input\n              type=\"checkbox\"\n              checked={selectedValues.includes(value)}\n              onChange={(e) => {\n                if (e.target.checked) {\n                  onFilterChange([...selectedValues, value]);\n                } else {\n                  onFilterChange(selectedValues.filter((v) => v !== value));\n                }\n              }}\n              style={{ marginRight: 8 }}\n            />\n            <span\n              style={{\n                fontSize: 14,\n                color: theme.palette.text.primary,\n              }}\n            >\n              {value === null || value === undefined || value === '' ? '(empty)' : String(value)}\n            </span>\n          </label>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/*\n * Generate column config from column definitions, if a column has multiple definitions, the first one will be used.\n * If column is hidden, return undefined.\n * If column do not have a definition, return a default column config.\n */\nfunction generateColumnConfig(name: string, columnSettings: ColumnSettings[]): TableColumnConfig<unknown> | undefined {\n  for (const column of columnSettings) {\n    if (column.name === name) {\n      if (column.hide) {\n        return undefined;\n      }\n\n      const { name, header, headerDescription, enableSorting, width, align, dataLink } = column;\n      return {\n        accessorKey: name,\n        header: header ?? name,\n        headerDescription,\n        enableSorting,\n        width,\n        align,\n        dataLink,\n        ...generateCellContentConfig(column),\n      };\n    }\n  }\n\n  return {\n    accessorKey: name,\n    header: name,\n  };\n}\n\nexport function getTablePanelQueryOptions(spec: TableOptions): { mode: 'instant' | 'range' } {\n  // if any cell renders a panel plugin, perform a range query instead of an instant query\n  return {\n    mode: (spec.columnSettings ?? []).some((c) => c.plugin) ? 'range' : 'instant',\n  };\n}\n\nexport type TableProps = PanelProps<TableOptions, TimeSeriesData>;\n\nexport function TablePanel({ contentDimensions, spec, queryResults }: TableProps): ReactElement | null {\n  const theme = useTheme();\n\n  // TODO: handle other query types\n  const queryMode = getTablePanelQueryOptions(spec).mode;\n  const rawData: Array<Record<string, unknown>> = useMemo(() => {\n    // Transform query results to a tabular format:\n    // [ { timestamp: 123, value: 456, labelName1: labelValue1 }, ... ]\n    return queryResults\n      .flatMap((data: PanelData<TimeSeriesData>, queryIndex: number) =>\n        data.data.series.map((ts: TimeSeries) => ({ data, ts, queryIndex }))\n      )\n      .map(({ data, ts, queryIndex }: { data: PanelData<TimeSeriesData>; ts: TimeSeries; queryIndex: number }) => {\n        if (ts.values[0] === undefined) {\n          return { ...ts.labels };\n        }\n\n        // If there are multiple queries, we need to add the query index to the value key and label key to avoid conflicts\n        const valueColumnName = queryResults.length === 1 ? 'value' : `value #${queryIndex + 1}`;\n        const labels =\n          queryResults.length === 1\n            ? ts.labels\n            : Object.entries(ts.labels ?? {}).reduce((acc, [key, value]) => {\n                if (key) acc[`${key} #${queryIndex + 1}`] = value;\n                return acc;\n              }, {} as Labels);\n\n        // If the cell visualization is a panel plugin, filter the data by the current series\n        const columnValue = (spec.columnSettings ?? []).find((x) => x.name === valueColumnName)?.plugin\n          ? { ...data, data: { ...data.data, series: data.data.series.filter((s) => s === ts) } }\n          : ts.values[0][1];\n\n        if (queryMode === 'instant') {\n          // Timestamp is not indexed as it will be the same for all queries\n          return { timestamp: ts.values[0][0], [valueColumnName]: columnValue, ...labels };\n        } else {\n          // Don't add a timestamp for range queries\n          return { [valueColumnName]: columnValue, ...labels };\n        }\n      });\n  }, [queryResults, queryMode, spec.columnSettings]);\n\n  // Transform will be applied by their orders on the original data\n  const data = transformData(rawData, spec.transforms ?? []);\n\n  const keys: string[] = useMemo(() => {\n    const result: string[] = [];\n\n    for (const entry of data) {\n      for (const key of Object.keys(entry)) {\n        if (!result.includes(key)) {\n          result.push(key);\n        }\n      }\n    }\n\n    return result;\n  }, [data]);\n\n  // fetch unique values for each column of filtering\n  const columnUniqueValues = useMemo(() => {\n    const uniqueValues: Record<string, Array<string | number>> = {};\n\n    keys.forEach((key) => {\n      const values = data.map((row) => row[key]).filter((val) => val !== null && val !== undefined && val !== '');\n      uniqueValues[key] = Array.from(new Set(values as Array<string | number>));\n    });\n\n    return uniqueValues;\n  }, [data, keys]);\n\n  // Generate columns and map each column accessor to its settings index and data key\n  const columns: Array<TableColumnConfig<unknown>> = useMemo(() => {\n    const columns: Array<TableColumnConfig<unknown>> = [];\n    const customizedColumns = new Set<string>();\n\n    // Process columnSettings if they exist\n    for (const columnSetting of spec.columnSettings ?? []) {\n      if (customizedColumns.has(columnSetting.name)) continue; // Skip duplicates\n\n      const columnConfig = generateColumnConfig(columnSetting.name, spec.columnSettings ?? []);\n      if (columnConfig !== undefined) {\n        columns.push(columnConfig);\n        customizedColumns.add(columnSetting.name);\n      }\n    }\n\n    // Add remaining columns if defaultColumnHidden is false\n    if (!spec.defaultColumnHidden) {\n      for (const key of keys) {\n        if (!customizedColumns.has(key)) {\n          const columnConfig = generateColumnConfig(key, spec.columnSettings ?? []);\n          if (columnConfig !== undefined) {\n            columns.push(columnConfig);\n          }\n        }\n      }\n    }\n\n    return columns;\n  }, [keys, spec.columnSettings, spec.defaultColumnHidden]);\n\n  // Generate cell settings that will be used by the table to render cells (text color, background color, ...)\n  const cellConfigs: TableCellConfigs = useMemo(() => {\n    // If there are no cell settings globally or per column, return an empty object\n    if (spec.cellSettings === undefined && !spec.columnSettings?.some((col) => col.cellSettings !== undefined)) {\n      return {};\n    }\n\n    const result: TableCellConfigs = {};\n\n    let index = 0;\n    for (const row of data) {\n      // Transforming key to object to extend the row with undefined values if the key is not present\n      // for checking the cell config \"Misc\" condition with \"null\"\n      const keysAsObj = keys.reduce(\n        (acc, key) => {\n          acc[key] = undefined;\n          return acc;\n        },\n        {} as Record<string, undefined>\n      );\n\n      const extendRow = {\n        ...keysAsObj,\n        ...row,\n      };\n\n      // Generate cellConfigs for each column (including duplicates with different headers)\n      for (const [key, value] of Object.entries(extendRow)) {\n        // First, try to get cell config from global cell settings\n        let cellConfig = evaluateConditionalFormatting(value, spec.cellSettings ?? []);\n\n        // Then, try to get cell config from column-specific cell settings\n        const columnSetting = spec.columnSettings?.find((col) => col.name === key);\n        if (columnSetting?.cellSettings?.length) {\n          const columnCellConfig = evaluateConditionalFormatting(value, columnSetting.cellSettings);\n          // Column-specific settings take precedence over global settings\n          if (columnCellConfig) {\n            cellConfig = columnCellConfig;\n          }\n        }\n\n        if (cellConfig) {\n          result[`${index}_${key}`] = cellConfig;\n        }\n      }\n      index++;\n    }\n\n    return result;\n  }, [data, keys, spec.cellSettings, spec.columnSettings]);\n\n  function generateDefaultSortingState(): SortingState {\n    return (\n      spec.columnSettings\n        ?.filter((column) => column.sort !== undefined)\n        .map((column) => {\n          return {\n            id: column.name,\n            desc: column.sort === 'desc',\n          };\n        }) ?? []\n    );\n  }\n\n  const [sorting, setSorting] = useState<SortingState>(generateDefaultSortingState());\n\n  // Filtering state\n  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);\n  const [filterAnchorEl, setFilterAnchorEl] = useState<{ [key: string]: HTMLElement | null }>({});\n  const [openFilterColumn, setOpenFilterColumn] = useState<string | null>(null);\n\n  // get selected values for a column\n  const getSelectedFilterValues = (columnId: string): Array<string | number> => {\n    const filter = columnFilters.find((f) => f.id === columnId);\n    return filter ? (filter.value as Array<string | number>) : [];\n  };\n\n  // update column filter\n  const updateColumnFilter = (columnId: string, values: Array<string | number>) => {\n    const newFilters = columnFilters.filter((f) => f.id !== columnId);\n    if (values.length > 0) {\n      newFilters.push({ id: columnId, value: values });\n    }\n    setColumnFilters(newFilters);\n  };\n\n  // Handle filter clicks\n  const handleFilterClick = (event: React.MouseEvent<HTMLButtonElement>, columnId: string) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setFilterAnchorEl({ ...filterAnchorEl, [columnId]: event.currentTarget });\n    setOpenFilterColumn(columnId);\n  };\n\n  const handleFilterClose = () => {\n    setFilterAnchorEl({});\n    setOpenFilterColumn(null);\n  };\n\n  // Close filter when clicking outside\n  useEffect(() => {\n    if (!openFilterColumn) return;\n\n    const handleClick = (e: MouseEvent) => {\n      const target = e.target as Element;\n      if (!target.closest('[data-filter-dropdown]') && !target.closest('button')) {\n        handleFilterClose();\n      }\n    };\n\n    const timer = setTimeout(() => {\n      document.addEventListener('click', handleClick);\n    }, 100);\n\n    return () => {\n      clearTimeout(timer);\n      document.removeEventListener('click', handleClick);\n    };\n  }, [openFilterColumn]);\n\n  // filter data based on the current filters\n  const filteredData = useMemo(() => {\n    let filtered = [...data];\n\n    // apply column filters if enabled\n    if (spec.enableFiltering && columnFilters.length > 0) {\n      filtered = filtered.filter((row) => {\n        return columnFilters.every((filter) => {\n          const value = row[filter.id];\n          const filterValues = filter.value as Array<string | number>;\n\n          if (!filterValues || filterValues.length === 0) return true; // No filter values means no filtering\n\n          // Check if the row value is in the selected filter values\n          return filterValues.includes(value as string | number);\n        });\n      });\n    }\n\n    return filtered;\n  }, [data, columnFilters, spec.enableFiltering]);\n\n  const [pagination, setPagination] = useState<PaginationState | undefined>(\n    spec.pagination ? { pageIndex: 0, pageSize: 10 } : undefined\n  );\n\n  useEffect(() => {\n    // If the pagination setting changes from no pagination to pagination, but the pagination state is undefined, update the pagination state\n    if (spec.pagination && !pagination) {\n      setPagination({ pageIndex: 0, pageSize: 10 });\n    } else if (!spec.pagination && pagination) {\n      setPagination(undefined);\n    }\n  }, [spec.pagination, pagination]);\n\n  if (contentDimensions === undefined) {\n    return null;\n  }\n\n  if (!data?.length) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%',\n        }}\n      >\n        <Typography>No data</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      {spec.enableFiltering && (\n        <div\n          style={{\n            display: 'flex',\n            background: theme.palette.background.default,\n            borderBottom: `1px solid ${theme.palette.divider}`,\n            width: contentDimensions.width,\n            boxSizing: 'border-box',\n          }}\n        >\n          {columns.map((column, idx) => {\n            const filters = getSelectedFilterValues(column.accessorKey as string);\n            const columnWidth = column.width || spec.defaultColumnWidth;\n            return (\n              <div\n                key={`filter-${idx}`}\n                style={{\n                  padding: '8px',\n                  borderRight: idx < columns.length - 1 ? `1px solid ${theme.palette.divider}` : 'none',\n                  width: columnWidth,\n                  minWidth: columnWidth,\n                  maxWidth: columnWidth,\n                  display: 'flex',\n                  alignItems: 'center',\n                  position: 'relative',\n                  boxSizing: 'border-box',\n                  flex: typeof columnWidth === 'number' ? 'none' : '1 1 auto',\n                }}\n              >\n                <span\n                  style={{\n                    marginRight: 8,\n                    fontSize: '12px',\n                    color: theme.palette.text.secondary,\n                    flex: 1,\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    whiteSpace: 'nowrap',\n                  }}\n                >\n                  {filters.length ? `${filters.length} items` : 'All'}\n                </span>\n                <button\n                  onClick={(e) => {\n                    handleFilterClick(e, column.accessorKey as string);\n                  }}\n                  style={{\n                    border: `1px solid ${theme.palette.divider}`,\n                    background: theme.palette.background.paper,\n                    cursor: 'pointer',\n                    fontSize: '12px',\n                    color: filters.length ? theme.palette.primary.main : theme.palette.text.secondary,\n                    padding: '4px 8px',\n                    borderRadius: '4px',\n                    minWidth: '20px',\n                    height: '24px',\n                    flexShrink: 0,\n                    transition: 'all 0.2s ease',\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = theme.palette.action.hover;\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = theme.palette.background.paper;\n                  }}\n                  type=\"button\"\n                >\n                  â–¼\n                </button>\n\n                {openFilterColumn === column.accessorKey && (\n                  <div\n                    style={{\n                      position: 'absolute',\n                      top: '100%',\n                      left: 0,\n                      zIndex: 1000,\n                      marginTop: 4,\n                    }}\n                  >\n                    <ColumnFilterDropdown\n                      allValues={columnUniqueValues[column.accessorKey as string] || []}\n                      selectedValues={filters}\n                      onFilterChange={(values) => updateColumnFilter(column.accessorKey as string, values)}\n                      theme={theme}\n                    />\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n      <Table\n        data={filteredData}\n        columns={columns}\n        cellConfigs={cellConfigs}\n        height={spec.enableFiltering ? contentDimensions.height - 40 : contentDimensions.height}\n        width={contentDimensions.width}\n        density={spec.density}\n        defaultColumnWidth={spec.defaultColumnWidth}\n        defaultColumnHeight={spec.defaultColumnHeight}\n        sorting={sorting}\n        onSortingChange={setSorting}\n        pagination={pagination}\n        onPaginationChange={setPagination}\n      />\n    </>\n  );\n}\n"],"names":["Table","useEffect","useMemo","useState","formatValue","transformData","useTheme","Typography","Box","evaluateConditionalFormatting","EmbeddedPanel","generateCellContentConfig","column","plugin","undefined","cell","ctx","panelData","getValue","kind","spec","queryResults","cellDescription","cellValue","format","ColumnFilterDropdown","allValues","selectedValues","onFilterChange","theme","values","Set","filter","v","sort","length","div","data-filter-dropdown","style","width","padding","backgroundColor","palette","background","paper","border","divider","borderRadius","boxShadow","shadows","color","text","secondary","fontSize","maxHeight","overflowY","marginBottom","fontWeight","label","display","alignItems","cursor","input","type","checked","onChange","e","target","marginRight","span","primary","hr","margin","borderTop","map","value","index","onMouseEnter","currentTarget","action","hover","onMouseLeave","includes","String","generateColumnConfig","name","columnSettings","hide","header","headerDescription","enableSorting","align","dataLink","accessorKey","getTablePanelQueryOptions","mode","some","c","TablePanel","contentDimensions","queryMode","rawData","flatMap","data","queryIndex","series","ts","labels","valueColumnName","Object","entries","reduce","acc","key","columnValue","find","x","s","timestamp","transforms","keys","result","entry","push","columnUniqueValues","uniqueValues","forEach","row","val","Array","from","columns","customizedColumns","columnSetting","has","columnConfig","add","defaultColumnHidden","cellConfigs","cellSettings","col","keysAsObj","extendRow","cellConfig","columnCellConfig","generateDefaultSortingState","id","desc","sorting","setSorting","columnFilters","setColumnFilters","filterAnchorEl","setFilterAnchorEl","openFilterColumn","setOpenFilterColumn","getSelectedFilterValues","columnId","f","updateColumnFilter","newFilters","handleFilterClick","event","preventDefault","stopPropagation","handleFilterClose","handleClick","closest","timer","setTimeout","document","addEventListener","clearTimeout","removeEventListener","filteredData","filtered","enableFiltering","every","filterValues","pagination","setPagination","pageIndex","pageSize","sx","justifyContent","height","default","borderBottom","boxSizing","idx","filters","columnWidth","defaultColumnWidth","borderRight","minWidth","maxWidth","position","flex","overflow","textOverflow","whiteSpace","button","onClick","main","flexShrink","transition","top","left","zIndex","marginTop","density","defaultColumnHeight","onSortingChange","onPaginationChange"],"mappings":"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"}