"use strict";(self.chunk_DatasourceVariable=self.chunk_DatasourceVariable||[]).push([["380"],{74383:function(a,e,l){l.r(e),l.d(e,{DatasourceVariable:()=>d,DatasourceVariableOptionEditor:()=>o});var t=l(62540),n=l(57744),u=l(5611),i=l(93648),r=l(70451);let s={label:"",value:""},o=a=>{let{onChange:e,value:l}=a,{datasourcePluginKind:o}=l,{data:d}=(0,n.useListPluginMetadata)(["Datasource"]),c=(0,r.useMemo)(()=>new Set(null==d?void 0:d.map(a=>a.spec.name)),[d]),p=Array.from(c).map(a=>({label:a,value:a})),b=p.find(a=>a.label===o)??s;return(0,r.useEffect)(()=>{let a=Array.from(c);b.value===s.value&&a.length>0&&a[0]&&e({datasourcePluginKind:a[0]})},[b,o,e,c]),(0,t.jsx)(u.A,{options:p,disableClearable:!0,renderInput:a=>(0,t.jsx)(i.A,{...a,label:"Datasource Plugin Kinds",placeholder:"Datasource Plugin Kinds"}),value:b,onChange:(a,l)=>{null!==l&&e({datasourcePluginKind:l.label})}})},d={getVariableOptions:async(a,e)=>""===a.datasourcePluginKind?{data:[]}:{data:(await e.datasourceStore.listDatasourceSelectItems(a.datasourcePluginKind)).flatMap(a=>a.items).map(a=>({label:a.name,value:a.name}))},OptionsEditorComponent:o,createInitialOptions:()=>({datasourcePluginKind:""}),dependsOn:()=>({variables:[]})}}}]);