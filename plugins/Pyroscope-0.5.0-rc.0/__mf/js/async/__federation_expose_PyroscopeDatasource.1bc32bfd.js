/*! For license information please see __federation_expose_PyroscopeDatasource.1bc32bfd.js.LICENSE.txt */
"use strict";(self.chunk_Pyroscope=self.chunk_Pyroscope||[]).push([["6628"],{37856:function(e,r,t){async function o(...e){let r=await globalThis.fetch(...e);if(!1===r.ok){let e=r.headers.get("content-type");if(e?.includes("application/json")){let e=await r.clone().json();if(e.error)throw new i(e.error,r.status);if(e.message)throw new i(e.message,r.status)}let t=await r.clone().text();if(t)throw new i(t,r.status);throw new n(r)}return r}async function s(...e){let r=await o(...e);if(!r.ok)throw new n(r);return await r.json()}t.d(r,{P7:()=>i,fk:()=>n,hd:()=>o,x6:()=>s});class n extends Error{status;constructor(e){super(`${e.status} ${e.statusText}`),this.status=e.status,Object.setPrototypeOf(this,n.prototype)}}class i extends Error{status;constructor(e,r){super(e),this.status=r,Object.setPrototypeOf(this,i.prototype)}}},2192:function(e,r,t){var o=t(70451),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var o,n={},u=null,l=null;for(o in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(l=r.ref),r)i.call(r,o)&&!c.hasOwnProperty(o)&&(n[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===n[o]&&(n[o]=r[o]);return{$$typeof:s,type:e,key:u,ref:l,props:n,_owner:a.current}}r.Fragment=n,r.jsx=u,r.jsxs=u},62540:function(e,r,t){e.exports=t(2192)},86783:function(e,r,t){t.r(r),t.d(r,{PyroscopeDatasource:()=>c});var o=t(37856);let s=async function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let s=await (0,o.hd)(...r);try{return await s.json()}catch(e){throw console.error("Invalid response from server",e),Error("Invalid response from server")}};function n(e,r,t,o){let{datasourceUrl:n,headers:i={}}=t,a=`${n}${e}`;return r&&(a+="?"+new URLSearchParams(r)),s(a,{method:"POST",headers:i,body:JSON.stringify(o)})}var i=t(62540),a=t(57744);t(70451);let c={createClient:(e,r)=>{let{directUrl:t,proxy:o}=e,{proxyUrl:i}=r,a=t??i;if(void 0===a)throw Error("No URL specified for Pyroscope client. You can use directUrl in the spec to configure it.");let c=null==o?void 0:o.spec.headers;return{options:{datasourceUrl:a},searchProfiles:(e,r)=>(function(e,r,t){let{datasourceUrl:o,headers:n={}}=t,i=`${o}${e}`;return r&&(i+="?"+new URLSearchParams(r)),s(i,{method:"GET",headers:n})})("/pyroscope/render",e,{datasourceUrl:a,headers:r??c}),searchProfileTypes:(e,r,t)=>n("/querier.v1.QuerierService/ProfileTypes",e,{datasourceUrl:a,headers:r??c},t),searchLabelNames:(e,r,t)=>n("/querier.v1.QuerierService/LabelNames",e,{datasourceUrl:a,headers:r??c},t),searchLabelValues:(e,r,t)=>n("/querier.v1.QuerierService/LabelValues",e,{datasourceUrl:a,headers:r??c},t),searchServices:(e,r)=>n("/querier.v1.QuerierService/LabelValues",e,{datasourceUrl:a,headers:r??c},{name:"service_name"})}},OptionsEditorComponent:function(e){let{value:r,onChange:t,isReadonly:o}=e;return(0,i.jsx)(a.HTTPSettingsEditor,{value:r,onChange:t,isReadonly:o,initialSpecDirect:{directUrl:""},initialSpecProxy:{proxy:{kind:"HTTPProxy",spec:{allowedEndpoints:[{endpointPattern:"/pyroscope/render",method:"GET"},{endpointPattern:"/querier.v1.QuerierService/ProfileTypes",method:"POST"},{endpointPattern:"/querier.v1.QuerierService/LabelNames",method:"POST"},{endpointPattern:"/querier.v1.QuerierService/LabelValues",method:"POST"}],url:""}}}})},createInitialOptions:()=>({directUrl:""})}}}]);