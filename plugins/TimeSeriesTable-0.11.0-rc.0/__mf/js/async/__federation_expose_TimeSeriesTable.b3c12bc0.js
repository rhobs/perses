"use strict";(self.chunk_TimeSeriesTable=self.chunk_TimeSeriesTable||[]).push([["1025"],{66385:function(e,n,t){t.r(n),t.d(n,{TimeSeriesTable:()=>T});var s=t(62540),r=t(74628),l=t(37266),i=t(70451),a=t(88091),c=t(34007),o=t(91394),h=t(5139),d=t(315),u=t(3399),x=t(45271),m=t(70561);function j(e){let{name:n,labels:t,formattedName:r,isFormatted:l}=e;return l&&t&&Object.keys(t).length>0?(0,s.jsx)(p,{labels:t}):(0,s.jsx)(a.A,{sx:{textWrap:"auto"},children:r??n})}function p(e){let{labels:n}=e,{infoSnackbar:t}=(0,l.useSnackbar)(),r=[],i=!0;function c(e){let n=e.currentTarget.innerText||"";navigator.clipboard.writeText(n.trim()).then(()=>{t(`Copied label matcher: ${n}`)}).catch(e=>{console.error(`unable to copy text: ${e}`)})}for(let e in n)"__name__"!==e&&(r.push((0,s.jsxs)("span",{children:[!i&&", ",(0,s.jsxs)(a.A,{display:"inline",component:"span",sx:{"&:hover":{cursor:"pointer",textDecoration:"underline"}},onClick:c,title:"Click to copy label matcher",children:[(0,s.jsx)("strong",{children:e}),"=",(0,s.jsxs)("span",{children:['"',n[e],'"']})]})]},e)),i&&(i=!1));return(0,s.jsxs)(a.A,{sx:{textWrap:"auto"},children:[n?n.__name__:"","{",r,"}"]})}var g=t(75712),A=t(13850),f=t.n(A);function y(e){let{kind:n,spec:t,queryResults:r}=e,{ref:i,width:a=1,height:c=1}=f()();return(0,s.jsx)("div",{ref:i,style:{height:"100%"},children:(0,s.jsx)(l.ErrorBoundary,{FallbackComponent:l.ErrorAlert,children:(0,s.jsx)(g.PanelPluginLoader,{kind:n,contentDimensions:{width:a,height:c},spec:t,queryResults:r})})})}let v=e=>{let{queryResults:n}=e,t=(0,i.useMemo)(()=>n.flatMap(e=>e.data).flatMap(e=>(null==e?void 0:e.series)||[]),[n]),l=(0,i.useMemo)(()=>{var e,l;let i;return e=t,l=n,i=e.length<1e3,e.map((e,n)=>{var t;let c=((null==(t=e.values)?void 0:t.length)??0)>1,o=e.values?e.values.map((e,n)=>(0,s.jsxs)(a.A,{children:[e[1]," ",c&&(0,s.jsxs)("span",{children:["@",e[0]]})]},n)):[],h=null;if(e.histograms&&e.histograms.length>0){let t={...l[0],data:{...l[0].data,series:[l[0].data.series[n]]}};h=e.histograms.map((e,n)=>(0,s.jsxs)(d.A,{alignItems:"center",children:[(0,s.jsx)(r.A,{width:400,height:200,children:(0,s.jsx)(y,{kind:"HistogramChart",spec:{unit:"decimal",width:400,height:200},queryResults:[t]})}),(0,s.jsxs)(d.A,{flexDirection:"row",justifyContent:"space-between",width:"100%",children:[(0,s.jsxs)(a.A,{children:["Total count: ",e[1].count]}),(0,s.jsxs)(a.A,{children:["Sum: ",e[1].sum]})]}),b(e[1])]},-n))}return(0,s.jsxs)(u.A,{style:{whiteSpace:"pre"},children:[(0,s.jsx)(x.A,{children:(0,s.jsx)(j,{name:e.name,formattedName:e.formattedName,labels:e.labels,isFormatted:i})}),(0,s.jsx)(x.A,{children:e.histograms?h:o})]},n)})},[t,n]);return n&&(null==l?void 0:l.length)?(0,s.jsxs)(s.Fragment,{children:[t.length>=1e3&&(0,s.jsxs)(c.A,{severity:"warning",children:["Showing more than ",1e3," series, turning off label formatting for performance reasons."]}),(0,s.jsx)(o.A,{className:"data-table",children:(0,s.jsx)(h.A,{children:l})})]}):(0,s.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,s.jsx)(a.A,{children:"No data"})})},b=e=>{var n;return(0,s.jsxs)(o.A,{children:[(0,s.jsx)(m.A,{children:(0,s.jsx)(u.A,{children:(0,s.jsx)(x.A,{style:{textAlign:"center"},colSpan:2,children:"Histogram Sample"})})}),(0,s.jsxs)(h.A,{children:[(0,s.jsxs)(u.A,{children:[(0,s.jsx)(x.A,{children:"Range"}),(0,s.jsx)(x.A,{children:"Count"})]}),null==(n=e.buckets)?void 0:n.map((e,n)=>(0,s.jsxs)(u.A,{children:[(0,s.jsx)(x.A,{children:(e=>{let[n,t,s]=e;return`${3===n||1===n?"[":"("}${t} -> ${s}${3===n||0===n?"]":")"}`})(e)}),(0,s.jsx)(x.A,{children:e[3]})]},n))]})]})},T={PanelComponent:function(e){let{contentDimensions:n,queryResults:t}=e,i=(0,l.useChartsTheme)().container.padding.default;return(0,s.jsx)(r.A,{style:{height:(null==n?void 0:n.height)??0},sx:{padding:`${i}px`,overflowY:"scroll"},children:(0,s.jsx)(v,{queryResults:t})})},supportedQueryTypes:["TimeSeriesQuery"],queryOptions:{mode:"instant"},createInitialOptions:()=>({})}}}]);