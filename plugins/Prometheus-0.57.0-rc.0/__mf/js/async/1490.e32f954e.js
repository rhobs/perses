/*! For license information please see 1490.e32f954e.js.LICENSE.txt */
(self.chunk_Prometheus=self.chunk_Prometheus||[]).push([["1490"],{45158:function(e,t,n){"use strict";n.d(t,{A:()=>g});var r=n(70451),i=n(11750),o=n(81023),a=n(77308),s=n(72052),l=n(29009),u=n(46733);function d(e){return(0,u.Ay)("MuiFormGroup",e)}(0,l.A)("MuiFormGroup",["root","row","error"]);var c=n(42872),p=n(87842),f=n(62540);let h=(0,a.A)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),g=r.forwardRef(function(e,t){let n=(0,s.b)({props:e,name:"MuiFormGroup"}),{className:r,row:a=!1,...l}=n,u=(0,c.A)(),g=(0,p.A)({props:n,muiFormControl:u,states:["error"]}),m={...n,row:a,error:g.error},y=(e=>{let{classes:t,row:n,error:r}=e;return(0,o.A)({root:["root",n&&"row",r&&"error"]},d,t)})(m);return(0,f.jsx)(h,{className:(0,i.A)(y.root,r),ownerState:m,ref:t,...l})})},12244:function(e,t,n){"use strict";function r(e,t){return e?.panelGroupId===t?.panelGroupId&&e?.panelGroupItemLayoutId===t?.panelGroupItemLayoutId}n.d(t,{a:()=>r})},29261:function(e,t,n){"use strict";function r(e,t){let n=i(t),r=e.panels[n];if(void 0===r)throw Error(`Could not resolve panels reference ${t.$ref}`);return r}function i(e){return e.$ref.substring(14)}function o(e){return{$ref:`#/spec/panels/${e}`}}n.d(t,{BX:()=>i,YI:()=>o,yo:()=>r})},28217:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{ListVariableListBoxProvider:()=>oP,DashboardDiscardChangesConfirmationDialog:()=>oq,VariableName:()=>n5,usePanelGroupIds:()=>K,EditDatasourcesButton:()=>od,Panel:()=>tQ,PanelGroupDialog:()=>ar,QuerySummaryTable:()=>ao,EditJsonDialog:()=>oJ,RepeatGridLayout:()=>ne,useDeletePanelDialog:()=>eh,AddGroupButton:()=>eO,HeaderIconButton:()=>tP,Row:()=>t7,createPanelDefinition:()=>R,usePanelActions:()=>ed,useViewPanel:()=>eb,useDashboardDuration:()=>em,EmptyDashboard:()=>rn,DatasourceStoreProvider:()=>au,DashboardStickyToolbar:()=>o$,DashboardProvider:()=>W,useDashboardStore:()=>B,GridTitle:()=>t5,DashboardToolbar:()=>oB,VariableListItem:()=>oH,SaveChangesConfirmationDialog:()=>al,PanelEditorContext:()=>o9,PanelPluginLoader:()=>tt,Prompt:()=>oQ,useEditJsonDialog:()=>eD,useExternalVariableDefinitions:()=>nb,AddPanelButton:()=>ek,useListPanelGroups:()=>Q,GridItemContent:()=>t1,useSaveChangesConfirmationDialog:()=>ew,VariableEditor:()=>n3,generateId:()=>V,usePanelGroup:()=>Z,useVariableDefinitionStates:()=>nh,Variable:()=>oR,PanelPreview:()=>ae,DatasourceEditor:()=>ou,DashboardContext:()=>$,VariableProvider:()=>nj,usePanel:()=>el,LeaveDialog:()=>oZ,EditJsonButton:()=>op,useDeletePanelGroupDialog:()=>es,useViewPanelGroup:()=>ex,useListVariableState:()=>oI,BuiltinVariableAccordions:()=>n2,DeletePanelDialog:()=>oW,DeletePanelGroupDialog:()=>oF,VariableProviderWithQueryParams:()=>nw,DownloadButton:()=>ol,useListVariableListBoxContext:()=>ok,Dashboard:()=>rr,useDiscardChangesConfirmationDialog:()=>eA,ListVariableListBox:()=>oM,GridLayout:()=>t6,usePanelGroupEditor:()=>eo,PanelDrawer:()=>o8,GridContainer:()=>eX,VariableList:()=>oN,useEditMode:()=>q,useVariableDefinitions:()=>ny,useDashboard:()=>rf,useVariableDefinitionAndState:()=>ng,ViewDashboard:()=>af,QueryViewerDialog:()=>t0,useDashboardActions:()=>J,useVariableDefinitionActions:()=>nm,SaveDashboardButton:()=>of,useVariableDefinitionStoreCtx:()=>nf,usePanelEditor:()=>ep,usePanelGroupActions:()=>et,EditVariablesButton:()=>n7});var i=n(62540),o=n(7013),a=n(2859),s=n(25086);let l="Add panel",u="Add panel group",d="Edit datasources",c="Edit variables",p={whiteSpace:"nowrap",minWidth:"auto","& .MuiButton-startIcon":{marginRight:.5}},f="header-actions-container";var h=n(70451),g=n.n(h);let m=e=>{let t,n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},a=t=e(r,i,o);return o},y=e=>e?m(e):m;var b=n(95390);let{useDebugValue:v}=h,{useSyncExternalStoreWithSelector:x}=b,j=e=>e;function w(e,t=j,n){let r=x(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return v(r),r}let S=new Map,A=e=>{let t=S.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},C=(e,t={})=>(n,r,i)=>{let o,{enabled:a,anonymousActionType:s,store:l,...u}=t;try{o=null!=a&&a&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!o)return e(n,r,i);let{connection:d,...c}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};let r=S.get(n.name);if(r)return{type:"tracked",store:e,...r};let i={connection:t.connect(n),stores:{}};return S.set(n.name,i),{type:"tracked",store:e,...i}})(l,o,u),p=!0;i.setState=(e,t,o)=>{let a=n(e,t);if(!p)return a;let c=void 0===o?{type:s||"anonymous"}:"string"==typeof o?{type:o}:o;return void 0===l?null==d||d.send(c,r()):null==d||d.send({...c,type:`${l}/${c.type}`},{...A(u.name),[l]:i.getState()}),a};let f=(...e)=>{let t=p;p=!1,n(...e),p=t},h=e(i.setState,r,i);if("untracked"===c.type?null==d||d.init(h):(c.stores[c.store]=i,null==d||d.init(Object.fromEntries(Object.entries(c.stores).map(([e,t])=>[e,e===c.store?h:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=i.dispatch;i.dispatch=(...t)=>{e(...t)}}return d.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return D(e.payload,e=>{if("__setState"===e.type){if(void 0===l)return void f(e.state);1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[l];return void(null==t||JSON.stringify(i.getState())!==JSON.stringify(t)&&f(t))}i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(f(h),void 0===l)return null==d?void 0:d.init(i.getState());return null==d?void 0:d.init(A(u.name));case"COMMIT":if(void 0===l){null==d||d.init(i.getState());break}return null==d?void 0:d.init(A(u.name));case"ROLLBACK":return D(e.state,e=>{if(void 0===l){f(e),null==d||d.init(i.getState());return}f(e[l]),null==d||d.init(A(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return D(e.state,e=>{void 0===l?f(e):JSON.stringify(i.getState())!==JSON.stringify(e[l])&&f(e[l])});case"IMPORT_STATE":{let{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;void 0===l?f(r):f(r[l]),null==d||d.send(null,n);break}case"PAUSE_RECORDING":return p=!p}return}}),h},D=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==n&&t(n)};var O=n(38662);let E=e=>(t,n,r)=>(r.setState=(e,n,...r)=>t("function"==typeof e?(0,O.jM)(e):e,n,...r),e(r.setState,n,r));function k(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var P=n(4978),M=n(29261);function V(){return void 0===globalThis.dashboardStoreId&&(globalThis.dashboardStoreId=0),globalThis.dashboardStoreId++}function R(e,t){return{kind:"Panel",spec:{display:{name:"",description:void 0},plugin:{kind:e??"",spec:t??{}},queries:[]}}}function I(e){let t={},n=[];for(let r of e){let e=[],i={};for(let t of r.spec.items){let n=V().toString();e.push({i:n,w:t.width,h:t.height,x:t.x,y:t.y}),i[n]=(0,M.BX)(t.content)}let o=V();t[o]={id:o,isCollapsed:r.spec.display?.collapse?.open===!1,repeatVariable:r.spec.repeatVariable,title:r.spec.display?.title,itemLayouts:e,itemPanelKeys:i},n.push(o)}return{panelGroups:t,panelGroupOrder:n}}function L(){return{id:V(),title:void 0,isCollapsed:!1,itemLayouts:[],itemPanelKeys:{}}}function _(e,t){e.panelGroups[t.id]=t,e.panelGroupOrder.unshift(t.id)}let T={sm:24,xxs:2};function z(e){let t=0;for(let n of e.itemLayouts){let e=n.y+n.h;e>t&&(t=e)}return t}function N({x:e,y:t,w:n,h:r}){return{x1:e,x2:e+n,y1:t,y2:t+r}}let H=()=>{if(window.isSecureContext)return crypto.randomUUID().replaceAll("-","");let e=String(Date.now()),t=Math.random().toString(36).substring(2);return`${e}${t}`},$=(0,h.createContext)(void 0);function B(e){let t=(0,h.useContext)($);if(void 0===t)throw Error("No DashboardContext found. Did you forget a Provider?");return w(t,e,k)}function W(e){let t=(0,h.useCallback)(G,[e]),[n]=(0,h.useState)(t(e)),{defaultPluginKinds:r}=(0,P.usePluginRegistry)(),o=r?.Panel??"",{data:a}=(0,P.usePlugin)("Panel",o);return(0,h.useEffect)(()=>{if(void 0===a)return;let e=a.createInitialOptions?a.createInitialOptions():{};n.setState({initialValues:{panelDefinition:R(o,e)}})},[a,n,o]),(0,i.jsx)($.Provider,{value:n,children:e.children})}function G(e){let{initialState:{dashboardResource:t,isEditMode:n,viewPanelRef:r,setViewPanelRef:i}}=e,{kind:o,metadata:a,spec:{display:s,duration:l,refreshInterval:u="0s",datasources:d,layouts:c=[],panels:p={}}}=t,f="ttl"in t.spec?t.spec.ttl:void 0;return y()(E(C((...e)=>{let[t]=e;return{...(function(e){let{panelGroups:t,panelGroupOrder:n}=I(e);return e=>({panelGroups:t,panelGroupOrder:n,swapPanelGroups(t,n){e(e=>{if(t<0||t>=e.panelGroupOrder.length||n<0||n>=e.panelGroupOrder.length)throw Error("index out of bound");let r=e.panelGroupOrder[t],i=e.panelGroupOrder[n];if(void 0===r||void 0===i)throw Error("panel group is undefined");[e.panelGroupOrder[t],e.panelGroupOrder[n]]=[i,r]})},updatePanelGroupLayouts(t,n){e(e=>{let r=e.panelGroups[t];if(void 0===r)throw Error(`Cannot find panel group ${t}`);r.itemLayouts=n})}})})(c)(...e),...((e,t)=>({panelGroupEditor:void 0,openAddPanelGroup:()=>{let t={mode:"Add",initialValues:{title:"",isCollapsed:!1,repeatVariable:""},applyChanges(t){let n=L();n.title=t.title,n.isCollapsed=t.isCollapsed,n.repeatVariable=t.repeatVariable,e(e=>{_(e,n)})},close(){e(e=>{e.panelGroupEditor=void 0})}};e(e=>{e.panelGroupEditor=t})},openEditPanelGroup:n=>{let r=t().panelGroups[n];if(void 0===r)throw Error(`Panel group with Id ${n} does not exist`);let i={mode:"Edit",initialValues:{title:r.title??"",isCollapsed:r.isCollapsed,repeatVariable:r.repeatVariable??""},applyChanges(t){e(e=>{let r=e.panelGroups[n];if(void 0===r)throw Error(`Panel group with Id ${n} does not exist`);r.title=t.title,r.isCollapsed=t.isCollapsed,r.repeatVariable=t.repeatVariable})},close(){e(e=>{e.panelGroupEditor=void 0})}};e(e=>{e.panelGroupEditor=i})}}))(...e),...((e,t)=>({deletePanelGroup(n){let{panelGroups:r,panelGroupOrder:i}=t(),o=r[n],a=i.findIndex(e=>e===n);if(void 0===o||-1===a)throw Error(`Panel group ${n} not found`);let s=Object.values(o.itemPanelKeys);e(e=>{delete e.panelGroups[n],e.panelGroupOrder.splice(a,1);let t=function(e){let t=new Set;for(let n of Object.values(e))for(let e of Object.values(n.itemPanelKeys))t.add(e);return t}(e.panelGroups);for(let n of s)t.has(n)||delete e.panels[n]})},openDeletePanelGroupDialog:n=>{let r=t().panelGroups[n];if(void 0===r)throw Error(`Panel group with Id ${n} not found`);e(e=>{e.deletePanelGroupDialog={panelGroupId:n,panelGroupName:r.title}})},closeDeletePanelGroupDialog:()=>e(e=>{e.deletePanelGroupDialog=void 0})}))(...e),...(()=>({panels:p}))(...e),...((e,t)=>({panelEditor:void 0,openEditPanel(n){let{panels:r,panelGroups:i}=t(),{panelGroupId:o,panelGroupItemLayoutId:a}=n,s=i[o]?.itemPanelKeys[a];if(void 0===s)throw Error(`Could not find Panel Group item ${n}`);let l=r[s];if(void 0===l)throw Error(`Cannot find Panel with key '${s}'`);let u={mode:"update",panelGroupItemId:n,initialValues:{groupId:n.panelGroupId,panelDefinition:l},applyChanges:t=>{e(e=>{if(e.panels[s]=t.panelDefinition,t.groupId===o)return;let n=e.panelGroups[o];if(void 0===n)throw Error(`Missing panel group ${o}`);let r=n.itemLayouts.findIndex(e=>e.i===a),i=n.itemLayouts[r],l=n.itemPanelKeys[a];if(-1===r||void 0===i||void 0===l)throw Error(`Missing panel group item ${a}`);n.itemLayouts.splice(r,1),delete n.itemPanelKeys[a];let u=e.panelGroups[t.groupId];if(void 0===u)throw Error(`Could not find new group ${t.groupId}`);u.itemLayouts.push({i:i.i,x:0,y:z(u),w:i.w,h:i.h}),u.itemPanelKeys[i.i]=l})},close:()=>{e(e=>{e.panelEditor=void 0})}};e(e=>{e.panelEditor=u})},openAddPanel(n){let r;void 0===(n??=t().panelGroupOrder[0])&&((r=L()).title="Panel Group",n=r.id);let i={mode:"create",initialValues:{groupId:n,panelDefinition:t().initialValues?.panelDefinition??R()},applyChanges:t=>{let n=H();e(e=>{e.panels[n]=t.panelDefinition;let r=e.panelGroups[t.groupId];if(void 0===r)throw Error(`Missing panel group ${t.groupId}`);let i={i:V().toString(),x:0,y:z(r),w:12,h:6};r.itemLayouts.push(i),r.itemPanelKeys[i.i]=n})},close:()=>{e(e=>{e.panelEditor=void 0})}};e(e=>{void 0!==r&&_(e,r),e.panelEditor=i})}}))(...e),...((e,t)=>({deletePanel(t){e(e=>{let{panelGroupId:n,panelGroupItemLayoutId:r}=t,i=e.panelGroups[n];if(void 0===i)throw Error(`Missing panel group ${n}`);let o=i.itemLayouts.findIndex(e=>e.i===r),a=i.itemPanelKeys[r];if(-1===o||void 0===a)throw Error(`Missing panel group item ${r}`);i.itemLayouts.splice(o,1),delete i.itemPanelKeys[r],!1===function(e,t){for(let n of Object.values(e))if(void 0!==Object.values(n.itemPanelKeys).find(e=>e===t))return!0;return!1}(e.panelGroups,a)&&delete e.panels[a]})},openDeletePanelDialog(n){let{panelGroupId:r,panelGroupItemLayoutId:i}=n,{panels:o,panelGroups:a}=t(),s=a[r];if(void 0===s)throw Error(`Panel group not found ${r}`);let l=s.itemPanelKeys[i];if(void 0===l)throw Error(`Could not find Panel Group item ${i}`);let u=o[l];if(void 0===u)throw Error(`Could not find panel ${l}`);e(e=>{e.deletePanelDialog={panelGroupItemId:n,panelName:u.spec.display.name,panelGroupName:s.title??""}})},closeDeletePanelDialog(){e(e=>{e.deletePanelDialog=void 0})}}))(...e),...(e=>({duplicatePanel(t){e(e=>{let n=e.panels,{panelGroupId:r,panelGroupItemLayoutId:i}=t,o=e.panelGroups[r];if(void 0===o)throw Error(`Missing panel group ${r}`);let a=o.itemPanelKeys[i];if(void 0===a)throw Error(`Could not find Panel Group item ${t}`);let s=n[a];if(void 0===s)throw Error(`Cannot find Panel with key '${a}'`);let l=o.itemLayouts.find(e=>e.i===i);if(void 0===l)throw Error(`Cannot find layout for Panel with key '${a}'`);let u=H();e.panels[u]=s;let d={i:V().toString(),w:l.w,h:l.h};o.itemLayouts=function(e,t,n){let r=T.sm,i=N(t),o=[],a=[],s=[];n.forEach(e=>{let t=N(e);t.y2<=i.y1?o.push(e):t.y1>=i.y2?s.push(e):a.push(e)}),a.sort((e,t)=>e.x-t.x);let l=a.findIndex(e=>e.i===t.i);if(l===a.length-1){if(i.x2+e.w<=r)return[...o,...a,{...e,x:i.x2,y:i.y1},...s]}else if(l>=0){let t=a[l+1];if(t&&N(t).x1-i.x2>=e.w)return a.splice(l+1,0,{...e,x:i.x2,y:i.y1}),[...o,...a,...s]}return[...o,...a,{x:i.x1,y:i.y2,...e},...s.map(t=>({...t,y:t.y+e.h}))]}(d,l,o.itemLayouts),o.itemPanelKeys[d.i]=u})}}))(...e),...((e,t)=>({viewPanel:{panelGroupItemId:void 0,panelRef:r},getViewPanel:()=>{var e,n,r;return e=t().panelGroups,n=t().viewPanel.panelGroupItemId,r=t().viewPanel.panelRef,n||(r?function(e,t){for(let n of Object.values(e)){let e=Object.entries(n.itemPanelKeys??[]).find(([e,n])=>n===t.ref);if(e){let[r]=e;return{panelGroupId:n.id,panelGroupItemLayoutId:r,repeatVariable:t.repeatVariable}}}}(e,r):void 0)},setViewPanel(n){e(e=>{e.viewPanel={panelRef:void 0,panelGroupItemId:n};let r=function(e,t){if(!t)return;let n=e[t.panelGroupId];if(n){let e=n.itemPanelKeys[t.panelGroupItemLayoutId];if(e)return{ref:e,repeatVariable:t.repeatVariable}}}(t().panelGroups,n);i&&i(r)})}}))(...e),...(e=>({isOpen:!1,openDiscardChangesConfirmationDialog(t){e(e=>{e.discardChangesConfirmationDialog=t})},closeDiscardChangesConfirmationDialog(){e(e=>{e.discardChangesConfirmationDialog=void 0})}}))(...e),...(e=>({openEditJsonDialog(){e(e=>{e.editJsonDialog={isOpen:!0}})},closeEditJsonDialog(){e(e=>{e.editJsonDialog={isOpen:!1}})}}))(...e),...(e=>({isOpen:!1,openSaveChangesConfirmationDialog(t){e(e=>{e.saveChangesConfirmationDialog=t},!1,"openSaveChangesConfirmationDialog")},closeSaveChangesConfirmationDialog(){e(e=>{e.saveChangesConfirmationDialog=void 0},!1,"closeSaveChangesConfirmationDialog")}}))(...e),kind:o,metadata:a,display:s,duration:l,refreshInterval:u,datasources:d,ttl:f,isEditMode:!!n,setEditMode:e=>{t({isEditMode:e})},setDashboard:({kind:e,metadata:n,spec:{display:r,panels:i={},layouts:o=[],duration:a,refreshInterval:s,datasources:l={}}})=>{t(t=>{t.kind=e,t.metadata=n,t.display=r,t.panels=i;let{panelGroups:u,panelGroupOrder:d}=I(o);t.panelGroups=u,t.panelGroupOrder=d,t.duration=a,t.refreshInterval=s??"0s",t.datasources=l})}}})))}let F=({isEditMode:e,setEditMode:t})=>({isEditMode:e,setEditMode:t});function q(){return B(F)}let U=({setDashboard:e,openAddPanelGroup:t,openAddPanel:n})=>({setDashboard:e,openAddPanelGroup:t,openAddPanel:n});function J(){let{setDashboard:e,openAddPanelGroup:t,openAddPanel:n}=B(U);return{setDashboard:e,openAddPanelGroup:()=>t(),openAddPanel:()=>n()}}let Y=e=>e.panelGroupOrder;function K(){return B(Y)}let X=e=>e.panelGroups;function Q(){let e=K(),t=B(X);return(0,h.useMemo)(()=>e.map(e=>{let n=t[e];if(void 0===n)throw Error(`Invalid panel group Id found ${e}`);return n}),[e,t])}function Z(e){let t=B((0,h.useCallback)(t=>t.panelGroups[e],[e]));if(void 0===t)throw Error(`Panel group with Id ${e} was not found`);return t}let ee=({openEditPanelGroup:e,deletePanelGroup:t,openAddPanel:n,updatePanelGroupLayouts:r})=>({openEditPanelGroup:e,deletePanelGroup:t,openAddPanel:n,updatePanelGroupLayouts:r});function et(e){let{moveUp:t,moveDown:n}=function(e){let t=B((0,h.useCallback)(t=>t.panelGroupOrder.findIndex(t=>t===e),[e])),n=B(er),r=B(en);if(t<0)throw Error(`Could not find panel group with Id ${e} in order array`);return{moveUp:t>0?()=>r(t,t-1):void 0,moveDown:t<n-1?()=>r(t,t+1):void 0}}(e),{openEditPanelGroup:r,deletePanelGroup:i,openAddPanel:o,updatePanelGroupLayouts:a}=B(ee);return{openEditPanelGroup:()=>r(e),deletePanelGroup:()=>i(e),openAddPanel:()=>o(e),moveUp:t,moveDown:n,updatePanelGroupLayouts:t=>a(e,t)}}let en=e=>e.swapPanelGroups,er=e=>e.panelGroupOrder.length,ei=e=>e.panelGroupEditor;function eo(){return B(ei)}let ea=({deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:n,deletePanelGroup:r})=>({deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:n,deletePanelGroup:r});function es(){let{deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:n,deletePanelGroup:r}=B(ea);return{deletePanelGroupDialog:e,deletePanelGroup:r,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:()=>n()}}function el(e){let{panelGroupId:t,panelGroupItemLayoutId:n}=e,r=B((0,h.useCallback)(e=>{let r=e.panelGroups[t]?.itemPanelKeys[n];if(void 0!==r)return e.panels[r]},[t,n]));if(void 0===r)throw Error(`Could not find panel for Id ${e}`);return r}let eu=({openEditPanel:e,openDeletePanelDialog:t,duplicatePanel:n,setViewPanel:r})=>({openEditPanel:e,openDeletePanelDialog:t,duplicatePanel:n,setViewPanel:r});function ed(e){let{openEditPanel:t,openDeletePanelDialog:n,duplicatePanel:r,setViewPanel:i}=B(eu);return{openEditPanel:()=>t(e),openDeletePanelDialog:()=>n(e),duplicatePanel:()=>r(e),viewPanel:e=>i(e)}}let ec=e=>e.panelEditor;function ep(){return B(ec)}let ef=({deletePanelDialog:e,deletePanel:t,closeDeletePanelDialog:n})=>({deletePanelDialog:e,deletePanel:t,closeDeletePanelDialog:n});function eh(){return B(ef)}let eg=e=>e.duration;function em(){return B(eg)}let ey=e=>({setViewPanel:e.setViewPanel,getViewPanel:e.getViewPanel,viewPanelId:e.getViewPanel()});function eb(){return B(ey)}let ev=e=>e.getViewPanel();function ex(){return B(ev)}let ej=({saveChangesConfirmationDialog:e,openSaveChangesConfirmationDialog:t,closeSaveChangesConfirmationDialog:n})=>({saveChangesConfirmationDialog:e,openSaveChangesConfirmationDialog:t,closeSaveChangesConfirmationDialog:n});function ew(){return B(ej)}let eS=({discardChangesConfirmationDialog:e,openDiscardChangesConfirmationDialog:t,closeDiscardChangesConfirmationDialog:n})=>({discardChangesConfirmationDialog:e,openDiscardChangesConfirmationDialog:t,closeDiscardChangesConfirmationDialog:n});function eA(){return B(eS)}let eC=({editJsonDialog:e,openEditJsonDialog:t,closeEditJsonDialog:n})=>({editJsonDialog:e,openEditJsonDialog:t,closeEditJsonDialog:n});function eD(){return B(eC)}let eO=()=>{let{openAddPanelGroup:e}=J();return(0,i.jsx)(s.InfoTooltip,{description:u,children:(0,i.jsx)(o.A,{startIcon:(0,i.jsx)(a.default,{}),onClick:e,"aria-label":u,sx:p,children:"Panel Group"})})};var eE=n(69525);let ek=({variant:e="text",color:t="primary",label:n="Panel",fullWidth:r})=>{let{openAddPanel:a}=J();return(0,i.jsx)(s.InfoTooltip,{description:l,children:(0,i.jsx)(o.A,{startIcon:(0,i.jsx)(eE.default,{}),onClick:a,"aria-label":l,variant:e,color:t,fullWidth:r,sx:p,children:n})})};var eP=n(74628),eM=n(56599),eV=n(11750),eR=n(46477),eI=n(3725),eL=n(81023),e_=n(77308),eT=n(23434),ez=n(72052),eN=n(48927),eH=n(32494),e$=n(29424),eB=n(29009),eW=n(46733);function eG(e){return(0,eW.Ay)("MuiCollapse",e)}(0,eB.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let eF=(0,e_.A)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((0,eT.A)(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>"exited"===e.state&&!e.in&&"0px"===e.collapsedSize,style:{visibility:"hidden"}}]}))),eq=(0,e_.A)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eU=(0,e_.A)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eJ=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiCollapse"}),{addEndListener:r,children:o,className:a,collapsedSize:s="0px",component:l,easing:u,in:d,onEnter:c,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:y,orientation:b="vertical",style:v,timeout:x=eN.p0.standard,TransitionComponent:j=eR.Ay,...w}=n,S={...n,orientation:b,collapsedSize:s},A=(e=>{let{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,eL.A)(r,eG,n)})(S),C=(0,eM.A)(),D=(0,eI.A)(),O=h.useRef(null),E=h.useRef(),k="number"==typeof s?`${s}px`:s,P="horizontal"===b,M=P?"width":"height",V=h.useRef(null),R=(0,e$.A)(t,V),I=e=>t=>{if(e){let n=V.current;void 0===t?e(n):e(n,t)}},L=()=>O.current?O.current[P?"clientWidth":"clientHeight"]:0,_=I((e,t)=>{O.current&&P&&(O.current.style.position="absolute"),e.style[M]=k,c&&c(e,t)}),T=I((e,t)=>{let n=L();O.current&&P&&(O.current.style.position="");let{duration:r,easing:i}=(0,eH.c)({style:v,timeout:x,easing:u},{mode:"enter"});if("auto"===x){let t=C.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,E.current=t}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[M]=`${n}px`,e.style.transitionTimingFunction=i,f&&f(e,t)}),z=I((e,t)=>{e.style[M]="auto",p&&p(e,t)}),N=I(e=>{e.style[M]=`${L()}px`,g&&g(e)}),H=I(m),$=I(e=>{let t=L(),{duration:n,easing:r}=(0,eH.c)({style:v,timeout:x,easing:u},{mode:"exit"});if("auto"===x){let n=C.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,E.current=n}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[M]=k,e.style.transitionTimingFunction=r,y&&y(e)});return(0,i.jsx)(j,{in:d,onEnter:_,onEntered:z,onEntering:T,onExit:N,onExited:H,onExiting:$,addEndListener:e=>{"auto"===x&&D.start(E.current||0,e),r&&r(V.current,e)},nodeRef:V,timeout:"auto"===x?null:x,...w,children:(e,{ownerState:t,...n})=>(0,i.jsx)(eF,{as:l,className:(0,eV.A)(A.root,a,{entered:A.entered,exited:!d&&"0px"===k&&A.hidden}[e]),style:{[P?"minWidth":"minHeight"]:k,...v},ref:R,ownerState:{...S,state:e},...n,children:(0,i.jsx)(eq,{ownerState:{...S,state:e},className:A.wrapper,ref:O,children:(0,i.jsx)(eU,{ownerState:{...S,state:e},className:A.wrapperInner,children:o})})})})});eJ&&(eJ.muiSupportAuto=!0);var eY=n(29057),eK=n(12548);function eX(e){let[t,n]=(0,h.useState)(!0);return(0,h.useEffect)(()=>{t&&n(!1)},[t]),(0,i.jsx)(eQ,{sx:[{"& + &":{marginTop:1},"& .react-grid-item.cssTransforms":{transitionProperty:t?"none":"transform"}},...Array.isArray(e.sx)?e.sx:[e.sx]],"data-testid":"panel-group",children:e.children})}let eQ=(0,e_.A)("section")(({theme:e})=>({"& .react-grid-layout":{position:"relative",transition:"height 200ms ease"},"& .react-grid-item":{transition:"all 200ms ease",transitionProperty:"left, top"},"& .react-grid-item img":{pointerEvents:"none",userSelect:"none"},"& .react-grid-item.cssTransforms":{transitionProperty:"transform"},"& .react-grid-item.resizing":{zIndex:1,willChange:"width, height"},"& .react-grid-item.react-draggable-dragging":{transition:"none",zIndex:3,willChange:"transform"},"& .react-grid-item.dropping":{visibility:"hidden"},"& .react-grid-item.react-grid-placeholder":{background:e.palette.primary.main,opacity:.2,transitionDuration:"100ms",zIndex:2,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none"},"& .react-grid-item > .react-resizable-handle":{position:"absolute",width:"20px",height:"20px"},"& .react-grid-item > .react-resizable-handle::after":{content:'""',position:"absolute",right:"3px",bottom:"3px",width:"5px",height:"5px",borderRight:`2px solid ${e.palette.text.secondary}`,borderBottom:`2px solid ${e.palette.text.secondary}`},"& .react-resizable-hide > .react-resizable-handle":{display:"none"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-sw":{bottom:"0",left:"0",cursor:"sw-resize",transform:"rotate(90deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-se":{bottom:"0",right:"0",cursor:"se-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-nw":{top:"0",left:"0",cursor:"nw-resize",transform:"rotate(180deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-ne":{top:"0",right:"0",cursor:"ne-resize",transform:"rotate(270deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-w, &.react-grid-item > .react-resizable-handle.react-resizable-handle-e":{top:"50%",marginTop:"-10px",cursor:"ew-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-w":{left:"0",transform:"rotate(135deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-e":{right:"0",transform:"rotate(315deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-n, &.react-grid-item > .react-resizable-handle.react-resizable-handle-s":{left:"50%",marginLeft:"-10px",cursor:"ns-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-n":{top:"0",transform:"rotate(225deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-s":{bottom:"0",transform:"rotate(45deg)"},"& .react-resizable":{position:"relative"},"& .react-resizable-handle":{position:"absolute",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundOrigin:"content-box",boxSizing:"border-box",backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+')",backgroundPosition:"bottom right",padding:"0 3px 3px 0"},"& .react-resizable-handle-sw":{bottom:"0",left:"0",cursor:"sw-resize",transform:"rotate(90deg)"},"& .react-resizable-handle-se":{bottom:"0",right:"0",cursor:"se-resize"},"& .react-resizable-handle-nw":{top:"0",left:"0",cursor:"nw-resize",transform:"rotate(180deg)"},"& .react-resizable-handle-ne":{top:"0",right:"0",cursor:"ne-resize",transform:"rotate(270deg)"},"& .react-resizable-handle-w, .react-resizable-handle-e":{top:"50%",marginTop:"-10px",cursor:"ew-resize"},"& .react-resizable-handle-w":{left:"0",transform:"rotate(135deg)"},"& .react-resizable-handle-e":{right:"0",transform:"rotate(315deg)"},"& .react-resizable-handle-n, .react-resizable-handle-s":{left:"50%",marginLeft:"-10px",cursor:"ns-resize"},"& .react-resizable-handle-n":{top:"0",transform:"rotate(225deg)"},"& .react-resizable-handle-s":{bottom:"0",transform:"rotate(45deg)"}}));var eZ=Object.defineProperty,e0=new Map,e1=new WeakMap,e2=0,e9=void 0;h.Component;var e3=n(12244),e4=n(68150);function e5(e){return(0,eW.Ay)("MuiCardContent",e)}(0,eB.A)("MuiCardContent",["root"]);let e7=(0,e_.A)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),e8=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiCardContent"}),{className:r,component:o="div",...a}=n,s={...n,component:o},l=(e=>{let{classes:t}=e;return(0,eL.A)({root:["root"]},e5,t)})(s);return(0,i.jsx)(e7,{as:o,className:(0,eV.A)(l.root,r),ownerState:s,ref:t,...a})});var e6=n(85180),te=n(33313);function tt(e){let{kind:t,spec:n,contentDimensions:r,definition:o,queryResults:a}=e,{data:s,isLoading:l}=(0,P.usePlugin)("Panel",t,{useErrorBoundary:!0}),u=s?.PanelComponent,d=s?.supportedQueryTypes||[],c=d.length>0?a:[];if(l)return(0,i.jsx)(te.A,{variant:"rectangular",width:r?.width,height:r?.height,"aria-label":"Loading..."});if(void 0===u)throw Error(`Missing PanelComponent from panel plugin for kind '${t}'`);for(let e of c)if(!d.includes(e.definition.kind))throw Error(`This panel does not support queries of type '${e.definition.kind}'. Supported query types: ${d.join(", ")}.`);return(0,i.jsx)(u,{spec:n,contentDimensions:r,definition:o,queryResults:c})}function tn(e){let{panelPluginKind:t,definition:n,queryResults:r,spec:o,contentDimensions:a}=e,{data:s,isLoading:l}=(0,P.usePlugin)("Panel",t,{useErrorBoundary:!0});if(l)return(0,i.jsx)(te.A,{variant:"rectangular",width:a?.width,height:a?.height,"aria-label":"Loading..."});let u=r.flatMap(e=>e.data?[{data:e.data,definition:e.definition}]:[]);if(u.length>0||0===r.length)return(0,i.jsx)(tt,{kind:t,spec:o,contentDimensions:a,definition:n,queryResults:u});if(r.some(e=>e.isFetching))return(0,i.jsx)(tr,{plugin:s,spec:o,definition:n,contentDimensions:a});let d=r.find(e=>e.error);if(d)throw d.error;return(0,i.jsx)(tr,{plugin:s,spec:o,definition:n,contentDimensions:a})}function tr({plugin:e,spec:t,definition:n,contentDimensions:r}){return e?.LoadingComponent?(0,i.jsx)(e.LoadingComponent,{spec:t,contentDimensions:r,definition:n,queryResults:[]}):(0,i.jsx)(s.LoadingOverlay,{})}var ti=n(47599),to=n(88091);function ta(e){return(0,eW.Ay)("MuiCardHeader",e)}let ts=(0,eB.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var tl=n(73397);let tu=(0,e_.A)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${ts.title}`]:t.title},{[`& .${ts.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),td=(0,e_.A)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),tc=(0,e_.A)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),tp=(0,e_.A)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto",[`.${ti.A.root}:where(& .${ts.title})`]:{display:"block"},[`.${ti.A.root}:where(& .${ts.subheader})`]:{display:"block"}}),tf=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiCardHeader"}),{action:r,avatar:o,component:a="div",disableTypography:s=!1,subheader:l,subheaderTypographyProps:u,title:d,titleTypographyProps:c,slots:p={},slotProps:f={},...h}=n,g={...n,component:a,disableTypography:s},m=(e=>{let{classes:t}=e;return(0,eL.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},ta,t)})(g),y={slots:p,slotProps:{title:c,subheader:u,...f}},b=d,[v,x]=(0,tl.A)("title",{className:m.title,elementType:to.A,externalForwardedProps:y,ownerState:g,additionalProps:{variant:o?"body2":"h5",component:"span"}});null==b||b.type===to.A||s||(b=(0,i.jsx)(v,{...x,children:b}));let j=l,[w,S]=(0,tl.A)("subheader",{className:m.subheader,elementType:to.A,externalForwardedProps:y,ownerState:g,additionalProps:{variant:o?"body2":"body1",color:"textSecondary",component:"span"}});null==j||j.type===to.A||s||(j=(0,i.jsx)(w,{...S,children:j}));let[A,C]=(0,tl.A)("root",{ref:t,className:m.root,elementType:tu,externalForwardedProps:{...y,...h,component:a},ownerState:g}),[D,O]=(0,tl.A)("avatar",{className:m.avatar,elementType:td,externalForwardedProps:y,ownerState:g}),[E,k]=(0,tl.A)("content",{className:m.content,elementType:tp,externalForwardedProps:y,ownerState:g}),[P,M]=(0,tl.A)("action",{className:m.action,elementType:tc,externalForwardedProps:y,ownerState:g});return(0,i.jsxs)(A,{...C,children:[o&&(0,i.jsx)(D,{...O,children:o}),(0,i.jsxs)(E,{...k,children:[b,j]}),r&&(0,i.jsx)(P,{...M,children:r})]})});var th=n(315),tg=n(65211),tm=n(25742),ty=n(91823),tb=n(72795),tv=n(35050),tx=n(53493),tj=n(59909),tw=n(86067),tS=n(61318),tA=n(50172),tC=n(14637),tD=n(4178),tO=n(74830),tE=n(17366),tk=n(47095);let tP=(0,e_.A)(tk.A)(({theme:e})=>({borderRadius:e.shape.borderRadius,padding:"4px"}));var tM=n(30145),tV=n(97653),tR=n(59238),tI=n(93399),tL=n(24726),t_=n(26952),tT=n(82561),tz=n(95279);let tN={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},tH=(0,e_.A)(to.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`underline${(0,tL.A)(n.underline)}`],"button"===n.component&&t.button]}})((0,eT.A)(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:t})=>"always"===e&&"inherit"!==t.color,style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter((0,t_.A)()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:(0,tR.X4)(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,tR.X4)(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:(0,tR.X4)(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${tT.A.focusVisible}`]:{outline:"auto"}}}]}))),t$=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiLink"}),r=(0,eM.A)(),{className:o,color:a="primary",component:s="a",onBlur:l,onFocus:u,TypographyClasses:d,underline:c="always",variant:p="inherit",sx:f,...g}=n,[m,y]=h.useState(!1),b={...n,color:a,component:s,focusVisible:m,underline:c,variant:p},v=(e=>{let{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${(0,tL.A)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,eL.A)(o,tT.t,t)})(b);return(0,i.jsx)(tH,{color:a,className:(0,eV.A)(v.root,o),classes:d,component:s,onBlur:e=>{(0,tI.A)(e.target)||y(!1),l&&l(e)},onFocus:e=>{(0,tI.A)(e.target)&&y(!0),u&&u(e)},ref:t,ownerState:b,variant:p,...g,sx:[...void 0===tN[a]?[{color:a}]:[],...Array.isArray(f)?f:[f]],style:{...g.style,..."always"===c&&"inherit"!==a&&!tN[a]&&{"--Link-underlineColor":(({theme:e,ownerState:t})=>{let n=t.color,r=(0,tz.Yn)(e,`palette.${n}.main`,!1)||(0,tz.Yn)(e,`palette.${n}`,!1)||t.color,i=(0,tz.Yn)(e,`palette.${n}.mainChannel`)||(0,tz.Yn)(e,`palette.${n}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:(0,tR.X4)(r,.4)})({theme:r,ownerState:b})}}})});var tB=n(65241);function tW({links:e}){let[t,n]=(0,h.useState)(null);if(1===e.length&&e[0]){let t=e[0];return(0,i.jsx)(tG,{link:t})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:`${e.length} links`,enterDelay:100,children:(0,i.jsx)(tk.A,{"aria-label":"Panel links",size:"small",onClick:e=>{n(e.currentTarget)},sx:e=>({borderRadius:e.shape.borderRadius,padding:"4px"}),children:(0,i.jsx)(tB.default,{"aria-describedby":"links-icon",fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})}),(0,i.jsx)(tM.A,{anchorEl:t,open:!!t,onClose:()=>{n(null)},MenuListProps:{"aria-labelledby":"panel-links"},children:e.map(e=>(0,i.jsx)(tF,{link:e},e.url))})]})}function tG({link:e}){let{url:t,name:n,tooltip:r,targetBlank:o}=tq(e);return(0,i.jsx)(s.InfoTooltip,{description:r??t,enterDelay:100,children:(0,i.jsx)(tk.A,{"aria-label":n??t,size:"small",href:t,target:o?"_blank":"_self",sx:e=>({borderRadius:e.shape.borderRadius,padding:"4px"}),children:(0,i.jsx)(tB.default,{fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})})}function tF({link:e}){let{url:t,name:n,tooltip:r,targetBlank:o}=tq(e);return(0,i.jsx)(s.InfoTooltip,{description:r??t,enterDelay:100,children:(0,i.jsx)(tV.A,{component:t$,href:t,target:o?"_blank":"_self",children:n??t})})}function tq(e){let t=(0,P.useReplaceVariablesInString)(e.url)??e.url,n=(0,P.useReplaceVariablesInString)(e.name),r=(0,P.useReplaceVariablesInString)(e.tooltip);return!1===e.renderVariables?e:{...e,url:t,name:n,tooltip:r}}let tU={error:(0,i.jsx)(tO.default,{color:"error"}),warning:(0,i.jsx)(tD.default,{fontSize:"inherit",color:"warning"}),info:(0,i.jsx)(tE.default,{fontSize:"inherit",color:"info"})},tJ=(0,e_.A)(eP.A)({display:"none",alignItems:"center",flexGrow:1,justifyContent:"flex-end"}),tY=({editHandlers:e,readHandlers:t,viewQueriesHandler:n,extra:r,title:o,description:a,descriptionTooltipId:l,links:u,queryResults:d,pluginActions:c=[],showIcons:p})=>{let g=(0,h.useMemo)(()=>{if(a&&a.trim().length>0)return(0,i.jsx)(s.InfoTooltip,{id:l,description:a,enterDelay:100,children:(0,i.jsx)(tP,{"aria-label":"panel description",size:"small",children:(0,i.jsx)(tE.default,{"aria-describedby":"info-tooltip","aria-hidden":!1,fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})})},[l,a]),m=u&&u.length>0&&(0,i.jsx)(tW,{links:u}),y=void 0===e&&r,b=(0,h.useMemo)(()=>{let e=d.some(e=>e.data),t=d.some(e=>e.isFetching),n=d.filter(e=>e.error);if(t&&e)return(0,i.jsx)(tm.A,{"aria-label":"loading",size:"1.125rem"});if(n.length>0){let e=n.map(e=>e.error).map(e=>e.message).join("\n");return(0,i.jsx)(s.InfoTooltip,{description:e,children:(0,i.jsx)(tP,{"aria-label":"panel errors",size:"small",children:(0,i.jsx)(tD.default,{fontSize:"inherit",sx:{color:e=>e.palette.error.main}})})})}},[d]),v=(0,h.useMemo)(()=>{let e=d.flatMap(e=>e.data?.metadata?.notices??[]);if(e.length>0){let t=e[e.length-1];return(0,i.jsx)(s.InfoTooltip,{description:t.message,children:(0,i.jsx)(tP,{"aria-label":"panel notices",size:"small",children:tU[t.type]})})}},[d]),x=(0,h.useMemo)(()=>{if(void 0!==t){let e;return(0,i.jsx)(s.InfoTooltip,{description:"Toggle View Mode",children:(0,i.jsx)(tP,{"aria-label":(e=o,`toggle panel ${e} view mode`),size:"small",onClick:t.onViewPanelClick,children:t.isPanelViewed?(0,i.jsx)(tv.default,{fontSize:"inherit"}):(0,i.jsx)(tx.default,{fontSize:"inherit"})})})}},[t,o]),j=(0,h.useMemo)(()=>{let e;return n?.onClick?(0,i.jsx)(s.InfoTooltip,{description:"Open query view",children:(0,i.jsx)(tP,{"aria-label":(e=o,`open query view for panel ${e}`),size:"small",onClick:n.onClick,children:(0,i.jsx)(tb.default,{fontSize:"inherit"})})}):null},[n,o]),w=(0,h.useMemo)(()=>{if(void 0!==e){let t,n,r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:"Edit",children:(0,i.jsx)(tP,{"aria-label":(t=o,`edit panel ${t}`),size:"small",onClick:e.onEditPanelClick,children:(0,i.jsx)(tj.default,{fontSize:"inherit"})})}),(0,i.jsx)(s.InfoTooltip,{description:"Duplicate",children:(0,i.jsx)(tP,{"aria-label":(n=o,`duplicate panel ${n}`),size:"small",onClick:e.onDuplicatePanelClick,children:(0,i.jsx)(tA.default,{fontSize:"inherit",sx:{transform:"scale(0.925)"}})})}),(0,i.jsx)(s.InfoTooltip,{description:"Delete",children:(0,i.jsx)(tP,{"aria-label":(r=o,`delete panel ${r}`),size:"small",onClick:e.onDeletePanelClick,children:(0,i.jsx)(tw.default,{fontSize:"inherit"})})})]})}},[e,o]),S=(0,h.useMemo)(()=>{if(w&&!t?.isPanelViewed){let e;return(0,i.jsx)(s.InfoTooltip,{description:"Move",children:(0,i.jsx)(tP,{"aria-label":(e=o,`move panel ${e}`),size:"small",children:(0,i.jsx)(tS.default,{className:"drag-handle",sx:{cursor:"grab"},fontSize:"inherit"})})})}},[w,t,o]),A=(0,i.jsx)(eP.A,{sx:{flexGrow:1}}),C=({children:e})=>"hover"===p?(0,i.jsx)(eP.A,{sx:{display:"var(--panel-hover, none)"},children:e}):(0,i.jsx)(i.Fragment,{children:e});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tJ,{sx:e=>({[e.containerQueries(f).between(0,170)]:{display:"flex"}}),children:[A,(0,i.jsxs)(C,{children:[(0,i.jsxs)(tK,{title:o,children:[g," ",m," ",b," ",v," ",y," ",j,x," ",c,w]}),S]})]}),(0,i.jsxs)(tJ,{sx:e=>({[e.containerQueries(f).between(170,220)]:{display:"flex"}}),children:[(0,i.jsxs)(C,{children:[g," ",m]}),A," ",b,v,(0,i.jsxs)(C,{children:[y,x,(0,i.jsxs)(tK,{title:o,children:[w," ",j," ",c]}),S]})]}),(0,i.jsxs)(tJ,{sx:e=>({display:"flex",[e.containerQueries(f).down(220)]:{display:"none"}}),children:[(0,i.jsxs)(C,{children:[g," ",m]}),A," ",b,v,(0,i.jsxs)(C,{children:[y,j,x," ",w,c.length<=1?c:(0,i.jsx)(tK,{title:o,children:c}),S]})]})]})},tK=({children:e,title:t})=>{let n,[r,o]=(0,h.useState)();if(!((0,h.isValidElement)(e)||Array.isArray(e)&&e.some(h.isValidElement)))return null;let a=()=>{o(void 0)},s=!!r,l=s?"actions-menu":void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tP,{className:"show-actions","aria-describedby":l,onClick:e=>{o(e.currentTarget.getBoundingClientRect())},"aria-label":(n=t,`show panel actions for ${n}`),size:"small",children:(0,i.jsx)(tC.default,{fontSize:"inherit"})}),(0,i.jsx)(ty.Ay,{id:l,open:s,anchorReference:"anchorPosition",anchorPosition:r,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(th.A,{direction:"row",alignItems:"center",sx:{padding:1},onClick:a,children:e})})]})};function tX({id:e,title:t,description:n,links:r,queryResults:o,readHandlers:a,editHandlers:l,sx:u,extra:d,pluginActions:c,showIcons:p,viewQueriesHandler:g,dimension:m,...y}){let b=`${e}-title`,v=`${e}-description`,x=(0,P.useReplaceVariablesInString)(t),j=(0,P.useReplaceVariablesInString)(n),w=(0,h.useRef)(null),S=!!(w.current&&m?.width)&&w.current.scrollWidth>w.current.clientWidth;return(0,i.jsx)(tf,{id:e,component:"header","aria-labelledby":b,"aria-describedby":v,disableTypography:!0,title:(0,i.jsxs)(th.A,{direction:"row",alignItems:"center",height:"var(--panel-header-height, 30px)",children:[(0,i.jsx)(tg.A,{title:x,disableHoverListener:!S,children:(0,i.jsx)(to.A,{id:b,variant:"subtitle1",ref:w,sx:{lineHeight:"24px",minHeight:"26px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:x})}),(0,i.jsx)(tY,{title:x,description:j,descriptionTooltipId:v,links:r,readHandlers:a,editHandlers:l,viewQueriesHandler:g,extra:d,queryResults:o,pluginActions:c,showIcons:p})]}),sx:(0,s.combineSx)(e=>({containerType:"inline-size",containerName:f,padding:e.spacing(1),borderBottom:`solid 1px ${e.palette.divider}`,".MuiCardHeader-content":{overflow:"hidden"}}),u),...y})}let tQ=(0,h.memo)(function(e){let{definition:t,readHandlers:n,editHandlers:r,onMouseEnter:o,onMouseLeave:a,sx:l,panelOptions:u,panelGroupItemId:d,viewQueriesHandler:c,...p}=e,f=(0,s.useId)("Panel"),g=`${f}-header`,[m,y]=(0,h.useState)(null),{width:b,height:v}=(0,e6.default)({ref:m}),x=(0,h.useMemo)(()=>{if(void 0!==b&&void 0!==v)return{width:b,height:v}},[b,v]),{queryResults:j}=(0,P.useDataQueriesContext)(),{getPlugin:w}=(0,P.usePluginRegistry)(),S=(0,h.useMemo)(()=>({spec:t.spec.plugin.spec,queryResults:j.map(e=>({definition:e.definition,data:e.data})),contentDimensions:x,definition:t}),[t,x,j]),[A,C]=(0,h.useState)([]);(0,h.useEffect)(()=>{let e=!1,n=async()=>{let n=t.spec.plugin.kind;if(!n||!S){e||C([]);return}try{if(!w||"function"!=typeof w){e||C([]);return}let t=await w("Panel",n);if(e)return;if(!t||"object"!=typeof t||!t.actions||!Array.isArray(t.actions)||0===t.actions.length){e||C([]);return}let r=t.actions.filter(e=>!e.location||"header"===e.location).map((e,t)=>{let n=e.component;try{return(0,i.jsx)(n,{...S},`plugin-action-${t}`)}catch(e){return console.warn(`Failed to render plugin action ${t}:`,e),null}}).filter(e=>!!e);e||C(r)}catch(t){e||(console.warn("Failed to load plugin actions:",t),C([]))}},r=setTimeout(()=>{n()},0);return()=>{e=!0,clearTimeout(r)}},[t.spec.plugin.kind,S,w]);let D=u?.showIcons??(r||n?.isPanelViewed?"always":"hover");return(0,i.jsxs)(e4.A,{component:"section",sx:(0,s.combineSx)({width:"100%",height:"100%",display:"flex",flexFlow:"column nowrap",":hover":{"--panel-hover":"block"}},l),variant:"outlined",onMouseEnter:e=>{o?.(e)},onMouseLeave:e=>{a?.(e)},"aria-labelledby":g,"aria-describedby":g,"data-testid":"panel",...p,children:[!u?.hideHeader&&(0,i.jsx)(tX,{extra:u?.extra?.({panelDefinition:t,panelGroupItemId:d}),id:g,title:t.spec.display.name,description:t.spec.display.description,queryResults:j,readHandlers:n,editHandlers:r,viewQueriesHandler:c,links:t.spec.links,pluginActions:A,showIcons:D,sx:{py:"2px",pl:"8px",pr:"2px"},dimension:x}),(0,i.jsx)(e8,{component:"figure",sx:{position:"relative",overflow:"hidden",flexGrow:1,margin:0,padding:0,":last-child":{padding:0}},ref:y,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,resetKeys:[t.spec,j],children:(0,i.jsx)(tn,{definition:t,panelPluginKind:t.spec.plugin.kind,spec:t.spec.plugin.spec,contentDimensions:x,queryResults:j})})})]})});var tZ=n(6227);function t0({open:e,queryDefinitions:t,onClose:n}){let r=(0,h.useMemo)(()=>{if(!t?.length)return null;let e=[];return t.forEach((n,r)=>{n?.spec?.plugin?.kind&&n?.kind&&e.push((0,i.jsxs)(g().Fragment,{children:[(0,i.jsx)(P.PluginSpecEditor,{value:n.spec.plugin.spec,pluginSelection:{kind:n.spec.plugin.kind,type:n.kind},onChange:()=>{},isReadonly:!0}),r<t.length-1&&(0,i.jsx)(tZ.A,{sx:{my:2}})]},`query-${r}`))}),e},[t]);return(0,i.jsxs)(s.Dialog,{open:e,onClose:n,maxWidth:"lg",fullWidth:!0,children:[(0,i.jsx)(s.Dialog.Header,{children:"Query Viewer"}),(0,i.jsx)(s.Dialog.Content,{children:r}),(0,i.jsx)(s.Dialog.Actions,{children:(0,i.jsx)(o.A,{variant:"outlined",color:"secondary",onClick:n,children:"Close"})})]})}function t1(e){let t,{panelGroupItemId:n,width:r}=e,o=el(n),{spec:{queries:a}}=o,{isEditMode:s}=q(),{openEditPanel:l,openDeletePanelDialog:u,duplicatePanel:d,viewPanel:c}=ed(n),p=ex(),{ref:f,inView:g}=function({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:i,triggerOnce:o,skip:a,initialInView:s,fallbackInView:l,onChange:u}={}){var d;let[c,p]=h.useState(null),f=h.useRef(u),[g,m]=h.useState({inView:!!s,entry:void 0});f.current=u,h.useEffect(()=>{let s;if(!a&&c)return s=function(e,t,n={},r=e9){if(void 0===window.IntersectionObserver&&void 0!==r){let i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}let{id:i,observer:o,elements:a}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var n;return`${t}_${"root"===t?!(n=e.root)?"0":(e1.has(n)||(e2+=1,e1.set(n,e2.toString())),e1.get(n)):e[t]}`}).toString(),n=e0.get(t);if(!n){let r,i=new Map,o=new IntersectionObserver(t=>{t.forEach(t=>{var n;let o=t.isIntersecting&&r.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=i.get(t.target))||n.forEach(e=>{e(o,t)})})},e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:i},e0.set(t,n)}return n}(n),s=a.get(e)||[];return a.has(e)||a.set(e,s),s.push(t),o.observe(e),function(){s.splice(s.indexOf(t),1),0===s.length&&(a.delete(e),o.unobserve(e)),0===a.size&&(o.disconnect(),e0.delete(i))}}(c,(e,t)=>{m({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&o&&s&&(s(),s=void 0)},{root:i,rootMargin:r,threshold:e,trackVisibility:n,delay:t},l),()=>{s&&s()}},[Array.isArray(e)?e.toString():e,c,i,r,o,a,n,l,t]);let y=null==(d=g.entry)?void 0:d.target,b=h.useRef(void 0);c||!y||o||a||b.current===y||(b.current=y,m({inView:!!s,entry:void 0}));let v=[p,g.inView,g.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}({threshold:.2,initialInView:!1,triggerOnce:!0}),[m,y]=(0,h.useState)(!1),b=(0,h.useMemo)(()=>s||!a?.length?void 0:{onClick:()=>{y(!0)}},[s,a]),v={isPanelViewed:(0,e3.a)(p,n),onViewPanelClick:function(){void 0===p?c(n):c(void 0)}};s&&(t={onEditPanelClick:l,onDuplicatePanelClick:d,onDeletePanelClick:u});let x=(0,P.useSuggestedStepMs)(r),{data:j}=(0,P.usePlugin)("Panel",o.spec.plugin.kind),w=a??[],S=w.map(e=>({kind:e.spec.plugin.kind,spec:e.spec.plugin.spec})),A="function"==typeof j?.queryOptions?j?.queryOptions(o.spec.plugin.spec):j?.queryOptions;return(0,i.jsxs)(eP.A,{ref:f,sx:{width:"100%",height:"100%"},children:[(0,i.jsx)(P.DataQueriesProvider,{definitions:S,options:{suggestedStepMs:x,...A},queryOptions:{enabled:g},children:g&&(0,i.jsx)(tQ,{definition:o,readHandlers:v,editHandlers:t,viewQueriesHandler:b,panelOptions:e.panelOptions,panelGroupItemId:n})}),(0,i.jsx)(t0,{open:m,queryDefinitions:w,onClose:()=>y(!1)})]})}var t2=n(87275),t9=n(11061),t3=n(65168),t4=n(46001);function t5(e){let t,n,r,o,a,{panelGroupId:l,title:u,collapse:d}=e,c=(0,P.useReplaceVariablesInString)(u),{openAddPanel:p,openEditPanelGroup:f,moveUp:h,moveDown:g}=et(l),{openDeletePanelGroupDialog:m}=es(),{isEditMode:y}=q(),b=(0,i.jsx)(to.A,{variant:"h2",children:c});return(0,i.jsx)(eP.A,{onClick:d?.onToggleOpen,sx:{display:"flex",justifyContent:"start",alignItems:"center",cursor:d?"pointer":"auto",backgroundColor:({palette:e})=>e.background.paper},"data-testid":"panel-group-header",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tk.A,{sx:{marginRight:1},"aria-label":`${d.isOpen?"collapse":"expand"} group ${c}`,children:d.isOpen?(0,i.jsx)(t2.default,{}):(0,i.jsx)(t9.default,{})}),b,y&&(0,i.jsxs)(th.A,{direction:"row",marginLeft:"auto",children:[(0,i.jsx)(s.InfoTooltip,{description:"Add panel to group",children:(0,i.jsx)(tk.A,{"aria-label":(t=c,`add panel to group ${t}`),onClick:e=>{e.stopPropagation(),p()},children:(0,i.jsx)(eE.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Edit group",children:(0,i.jsx)(tk.A,{"aria-label":(n=c,`edit group ${n}`),onClick:e=>{e.stopPropagation(),f()},children:(0,i.jsx)(tj.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Delete group",children:(0,i.jsx)(tk.A,{"aria-label":(r=c,`delete group ${r}`),onClick:e=>{e.stopPropagation(),m(l)},children:(0,i.jsx)(tw.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Move group down",children:(0,i.jsx)(tk.A,{"aria-label":(o=c,`move group ${o} down`),disabled:void 0===g,onClick:e=>{e.stopPropagation(),g?.()},children:(0,i.jsx)(t4.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Move group up",children:(0,i.jsx)(tk.A,{"aria-label":(a=c,`move group ${a} up`),disabled:void 0===h,onClick:e=>{e.stopPropagation(),h?.()},children:(0,i.jsx)(t3.default,{})})})]})]}):b})}function t7({panelGroupId:e,groupDefinition:t,gridColWidth:n,panelFullHeight:r,panelOptions:o,isEditMode:a=!1,onLayoutChange:l,onWidthChange:u,repeatVariable:d}){let c=(0,h.useMemo)(()=>(0,eK.WidthProvider)(eK.Responsive),[]),p=(0,eM.A)(),f=(0,eY.useViewPanelGroup)(),[g,m]=(0,h.useState)(!t.isCollapsed),y=f?.panelGroupId===e&&f.repeatVariable?.[0]===d?.[0]&&f.repeatVariable?.[1]===d?.[1],b=f?.panelGroupItemLayoutId,v=!f||y;(0,h.useEffect)(()=>{y&&m(!0)},[y]);let x=(0,h.useMemo)(()=>b?t.itemLayouts.map(e=>e.i===b?{h:Math.round(((r??window.innerHeight)-48)/40),i:b,w:48,x:0,y:0}:e):t.itemLayouts,[t.itemLayouts,b,r]);return(0,i.jsxs)(eX,{sx:{display:v?"block":"none",height:b?`${r}px`:"unset",overflow:b?"hidden":"unset"},children:[t.title&&(0,i.jsx)(t5,{panelGroupId:e,title:t.title,collapse:void 0===t.isCollapsed?void 0:{isOpen:g,onToggleOpen:()=>m(e=>!e)}}),(0,i.jsx)(eJ,{in:g,unmountOnExit:!0,appear:!1,"data-testid":"panel-group-content",children:(0,i.jsx)(c,{className:"layout",breakpoints:{sm:p.breakpoints.values.sm,xxs:0},cols:T,rowHeight:30,draggableHandle:".drag-handle",resizeHandles:["se"],isDraggable:a&&!y,isResizable:a&&!y,margin:[10,10],containerPadding:[0,10],layouts:{sm:x},onLayoutChange:l,onWidthChange:u,allowOverlap:y,children:x.map(({i:t,w:r})=>(0,i.jsx)("div",{style:{display:b?b===t?"unset":"none":"unset"},children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(t1,{panelOptions:o,panelGroupItemId:{panelGroupId:e,panelGroupItemLayoutId:t,repeatVariable:d},width:t8(r,n)})})},t))})})]})}let t8=(e,t)=>Number.isFinite(e)?Math.round(t*e+10*Math.max(0,e-1)):e;function t6(e){let{panelGroupId:t,panelOptions:n,panelFullHeight:r}=e,o=Z(t),{updatePanelGroupLayouts:a}=et(t),s=ex(),{isEditMode:l}=q(),[u,d]=(0,h.useState)(0),c=s?.panelGroupId===t,p=(e,t)=>{let n=t.sm;n&&!c&&a(n)},f=(e,t,n,r)=>{d((e-t[0]*(n-1)-2*r[0])/n)};return(0,i.jsx)(i.Fragment,{children:o.repeatVariable?(0,i.jsx)(ne,{repeatVariableName:o.repeatVariable,panelGroupId:t,groupDefinition:o,gridColWidth:u,panelFullHeight:r,panelOptions:n,isEditMode:l,onLayoutChange:p,onWidthChange:f}):(0,i.jsx)(t7,{panelGroupId:t,groupDefinition:o,gridColWidth:u,panelFullHeight:r,panelOptions:n,isEditMode:l,onLayoutChange:p,onWidthChange:f})})}function ne({repeatVariableName:e,panelGroupId:t,groupDefinition:n,gridColWidth:r,panelFullHeight:o,panelOptions:a,isEditMode:s=!1,onLayoutChange:l,onWidthChange:u}){let d=(0,P.useVariableValues)(),c=d[e];return void 0!==c&&Array.isArray(c.value)&&0!==c.value.length?(0,i.jsx)(i.Fragment,{children:c.value.map(c=>(0,i.jsx)(P.VariableContext.Provider,{value:{state:{...d,[e]:{value:c,loading:!1}}},children:(0,i.jsx)(t7,{panelGroupId:t,groupDefinition:n,gridColWidth:r,panelFullHeight:o,panelOptions:a,isEditMode:s,onLayoutChange:l,onWidthChange:u,repeatVariable:[e,c]})},`${e}-${c}`))}):(0,i.jsx)(t7,{panelGroupId:t,groupDefinition:n,gridColWidth:r,panelFullHeight:o,panelOptions:a,isEditMode:s,onLayoutChange:l,onWidthChange:u})}let{useDebugValue:nt}=h,{useSyncExternalStoreWithSelector:nn}=b,nr=e=>e;function ni(e,t=nr,n){let r=nn(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return nt(r),r}var no=n(69791);function na(e,t){var n,r,i;let o={},a=[];return n=e,r=t,i=(e,t)=>{o[t]||(a.push(e),o[t]=!0)},n.forEach(e=>i(e,e.spec.name)),r.forEach(e=>e.definitions.forEach(t=>i(t,t.spec.name,e.source))),a}function ns(e,t){let n={value:null,loading:!1,overriding:!1,overridden:!1};switch(e.kind){case"TextVariable":n.value=t??e.spec.value;break;case"ListVariable":if(n.options=[],n.value=t??e.spec.defaultValue??null,n.options.length>0&&!n.value){let t=n.options[0]?.value??null;null!==t&&(n.value=e.spec.allowMultiple?[t]:t)}Array.isArray(n.value)&&1===n.value.length&&"$__all"===n.value[0]&&(n.value="$__all")}return n}function nl(e,t,n=[]){let r=new P.VariableStoreStateMap,i={};e.forEach(e=>{i[e.spec.name]=!0},{});let o={};return n.forEach(e=>{let n=e.source;e.definitions.forEach(e=>{let a=e.spec.name,s=t[a];r.set({source:n,name:a},{...ns(e,s||null),overridden:!!i[a]}),i[a]=!0,o[e.spec.name]=!0})},{}),e.forEach(e=>{let n=e.spec.name,i=t[n];r.set({name:n},{...ns(e,i||null),overriding:!!o[n]})}),i={},n.slice().reverse().forEach(e=>{let t=e.source;e.definitions.forEach(e=>{let n=e.spec.name,o=r.get({source:t,name:n});o&&(o.overriding=!!i[n]),i[n]=!0})}),r}var nu=n(57348);let nd="var-",nc={encode:function(e){return Array.isArray(e)?e.join(","):e},decode:e=>{if("string"==typeof e){if(!e)return null;let t=e.split(",");return 1===t.length?t[0]:t}return""}},np=(0,h.createContext)(void 0);function nf(){let e=(0,h.useContext)(np);if(!e)throw Error("VariableStoreContext not initialized");return e}function nh(e){return w(nf(),t=>{let n={};return(e??t.variableDefinitions.map(e=>e.spec.name)).forEach(e=>{let r=t.variableState.get({name:e});r&&!r.overridden&&(n[e]=r)}),t.externalVariableDefinitions.forEach(e=>{let r=e.source;e.definitions.forEach(e=>{let i=e.spec.name,o=t.variableState.get({name:i,source:r});o&&!o.overridden&&(n[i]=o)})}),n},(e,t)=>JSON.stringify(e)===JSON.stringify(t))}function ng(e,t){return ni(nf(),n=>({state:n.variableState.get({name:e,source:t}),definition:((t?n.externalVariableDefinitions.find(e=>e.source===t)?.definitions:n.variableDefinitions)||[]).find(t=>t.spec.name===e)}))}function nm(){return w(nf(),e=>({setVariableValue:e.setVariableValue,setVariableLoading:e.setVariableLoading,setVariableOptions:e.setVariableOptions,setVariableDefinitions:e.setVariableDefinitions,setVariableDefaultValues:e.setVariableDefaultValues,getSavedVariablesStatus:e.getSavedVariablesStatus}),k)}function ny(){return ni(nf(),e=>e.variableDefinitions)}function nb(){return ni(nf(),e=>e.externalVariableDefinitions)}function nv({children:e,builtinVariables:t}){let n=nh(),r=ny(),o=nb(),{absoluteTimeRange:a}=(0,P.useTimeRange)(),s=(0,h.useMemo)(()=>{let e={};return Object.keys(n).forEach(t=>{let i={...n[t]};if("$__all"===i.value){let e=na(r,o).find(e=>e.spec.name===t);e?.kind==="ListVariable"&&e.spec.customAllValue?i.value=e.spec.customAllValue:i.value=i.options?.map(e=>e.value)??null}e[t]=i}),e},[n,r,o]),l=(0,h.useMemo)(()=>{let e=[{kind:"BuiltinVariable",spec:{name:"__from",value:()=>a.start.valueOf().toString(),source:"Dashboard",display:{name:"__from",description:"Start time of the current time range in unix millisecond epoch",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__to",value:()=>a.end.valueOf().toString(),source:"Dashboard",display:{name:"__to",description:"End time of the current time range in unix millisecond epoch",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range",value:()=>(0,no.a3)((0,no.$Z)(a)),source:"Dashboard",display:{name:"__range",description:"The range for the current dashboard in human readable format",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range_s",value:()=>((a.end.valueOf()-a.start.valueOf())/1e3).toString(),source:"Dashboard",display:{name:"__range_s",description:"The range for the current dashboard in second",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range_ms",value:()=>(a.end.valueOf()-a.start.valueOf()).toString(),source:"Dashboard",display:{name:"__range_ms",description:"The range for the current dashboard in millisecond",hidden:!0}}}];return t?.forEach(t=>e.push(t)),e},[a,t]);return(0,i.jsx)(P.BuiltinVariableContext.Provider,{value:{variables:l},children:(0,i.jsx)(P.VariableContext.Provider,{value:{state:s},children:e})})}function nx({initialVariableDefinitions:e=[],externalVariableDefinitions:t=[],queryParams:n}){var r;let i,o=(r=n?n[0]:{},i={},Object.keys(r).forEach(e=>{let t=r[e];t&&(i[e.replace(nd,"")]=t)}),i);return y()(C(E((r,i)=>({variableState:nl(e,o,t),variableDefinitions:e,externalVariableDefinitions:t,setVariableDefinitions(e){r(n=>{n.variableDefinitions=e,n.variableState=nl(e,o,t)},!1,"[Variables] setVariableDefinitions")},setVariableOptions(e,t,n){r(r=>{let i=r.variableState.get({name:e,source:n});i&&(i.options=t)},!1,"[Variables] setVariableOptions")},setVariableLoading(e,t,n){r(r=>{let i=r.variableState.get({name:e,source:n});i&&(i.loading=t)},!1,"[Variables] setVariableLoading")},setVariableValue:(e,t,i)=>r(r=>{let o=t,a=r.variableState.get({name:e,source:i});if(a){(Array.isArray(o)&&o.includes("$__all")&&(o="$__all"===o.at(-1)?"$__all":o.filter(e=>"$__all"!==e)),n)&&(0,n[1])({[`${nd}${e}`]:o});a.value=o}},!1,"[Variables] setVariableValue"),setVariableDefaultValues:()=>{let e=i().variableDefinitions,t=i().variableState,n=(0,O.jM)(e,e=>{e.forEach((n,r)=>{let i=n.spec.name;if("ListVariable"===n.kind){let o=t.get({name:i});o?.value!==void 0&&(e[r]={kind:"ListVariable",spec:(0,O.jM)(n.spec,e=>{e.defaultValue=o.value})})}else if("TextVariable"===n.kind){let o=t.get({name:i}),a="string"==typeof o?.value?o.value:"";o?.value!==void 0&&(e[r]={kind:"TextVariable",spec:(0,O.jM)(n.spec,e=>{e.value=a})})}})});return r(e=>{e.variableDefinitions=n},!1,"[Variables] setVariableDefaultValues"),n},getSavedVariablesStatus:()=>(function(e,t){let n=!1,r=[];for(let i of e){let e=i.spec.name;if("ListVariable"===i.kind){let o=t.get({name:e});o?.value!==null&&o?.value!==i.spec.defaultValue&&(r.push(e),n=!0)}else if("TextVariable"===i.kind){let o=t.get({name:e}),a="string"==typeof o?.value?o.value:"";i.spec.value!==a&&(r.push(e),n=!0)}}return{isSavedVariableModified:n,modifiedVariableNames:r}})(i().variableDefinitions,i().variableState)}))))}function nj({children:e,initialVariableDefinitions:t=[],externalVariableDefinitions:n=[],builtinVariableDefinitions:r=[]}){let[o]=(0,h.useState)(()=>nx({initialVariableDefinitions:t,externalVariableDefinitions:n}));return(0,i.jsx)(np.Provider,{value:o,children:(0,i.jsx)(nv,{builtinVariables:r,children:e})})}function nw({children:e,initialVariableDefinitions:t=[],externalVariableDefinitions:n=[],builtinVariableDefinitions:r=[]}){let o,a=(o={},na(t,n).forEach(e=>{var t;o[t=e.spec.name,`${nd}${t}`]=nc}),(0,nu.useQueryParams)(o,{updateType:"replaceIn"})),[s]=(0,h.useState)(()=>nx({initialVariableDefinitions:t,externalVariableDefinitions:n,queryParams:a}));return(0,i.jsx)(np.Provider,{value:s,children:(0,i.jsx)(nv,{builtinVariables:r,children:e})})}var nS=n(34007),nA=n(347),nC=n(91394),nD=n(70561),nO=n(3399),nE=n(5139),nk=n(68003),nP=n(11502);let nM=h.createContext({});var nV=n(2203);function nR(e){return(0,eW.Ay)("MuiAccordion",e)}let nI=(0,eB.A)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),nL=(0,e_.A)(nP.A,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${nI.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((0,eT.A)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${nI.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${nI.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),(0,eT.A)(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${nI.expanded}`]:{margin:"16px 0"}}}]}))),n_=(0,e_.A)("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),nT=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiAccordion"}),{children:r,className:o,defaultExpanded:a=!1,disabled:s=!1,disableGutters:l=!1,expanded:u,onChange:d,square:c=!1,slots:p={},slotProps:f={},TransitionComponent:g,TransitionProps:m,...y}=n,[b,v]=(0,nV.A)({controlled:u,default:a,name:"Accordion",state:"expanded"}),x=h.useCallback(e=>{v(!b),d&&d(e,!b)},[b,d,v]),[j,...w]=h.Children.toArray(r),S=h.useMemo(()=>({expanded:b,disabled:s,disableGutters:l,toggle:x}),[b,s,l,x]),A={...n,square:c,disabled:s,disableGutters:l,expanded:b},C=(e=>{let{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e;return(0,eL.A)({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],heading:["heading"],region:["region"]},nR,t)})(A),D={slots:{transition:g,...p},slotProps:{transition:m,...f}},[O,E]=(0,tl.A)("root",{elementType:nL,externalForwardedProps:{...D,...y},className:(0,eV.A)(C.root,o),shouldForwardComponentProp:!0,ownerState:A,ref:t,additionalProps:{square:c}}),[k,P]=(0,tl.A)("heading",{elementType:n_,externalForwardedProps:D,className:C.heading,ownerState:A}),[M,V]=(0,tl.A)("transition",{elementType:eJ,externalForwardedProps:D,ownerState:A});return(0,i.jsxs)(O,{...E,children:[(0,i.jsx)(k,{...P,children:(0,i.jsx)(nM.Provider,{value:S,children:j})}),(0,i.jsx)(M,{in:b,timeout:"auto",...V,children:(0,i.jsx)("div",{"aria-labelledby":j.props.id,id:j.props["aria-controls"],role:"region",className:C.region,children:w})})]})});var nz=n(1337);function nN(e){return(0,eW.Ay)("MuiAccordionSummary",e)}let nH=(0,eB.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),n$=(0,e_.A)(nz.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,eT.A)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${nH.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${nH.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${nH.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${nH.expanded}`]:{minHeight:64}}}]}})),nB=(0,e_.A)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,eT.A)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${nH.expanded}`]:{margin:"20px 0"}}}]}))),nW=(0,e_.A)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,eT.A)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${nH.expanded}`]:{transform:"rotate(180deg)"}}))),nG=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiAccordionSummary"}),{children:r,className:o,expandIcon:a,focusVisibleClassName:s,onClick:l,slots:u,slotProps:d,...c}=n,{disabled:p=!1,disableGutters:f,expanded:g,toggle:m}=h.useContext(nM),y={...n,expanded:g,disabled:p,disableGutters:f},b=(e=>{let{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return(0,eL.A)({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},nN,t)})(y),v={slots:u,slotProps:d},[x,j]=(0,tl.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,eV.A)(b.root,o),elementType:n$,externalForwardedProps:{...v,...c},ownerState:y,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":g,focusVisibleClassName:(0,eV.A)(b.focusVisible,s)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),m&&m(t),l&&l(t)}})}),[w,S]=(0,tl.A)("content",{className:b.content,elementType:nB,externalForwardedProps:v,ownerState:y}),[A,C]=(0,tl.A)("expandIconWrapper",{className:b.expandIconWrapper,elementType:nW,externalForwardedProps:v,ownerState:y});return(0,i.jsxs)(x,{...j,children:[(0,i.jsx)(w,{...S,children:r}),a&&(0,i.jsx)(A,{...C,children:a})]})});function nF(e){return(0,eW.Ay)("MuiAccordionDetails",e)}(0,eB.A)("MuiAccordionDetails",["root"]);let nq=(0,e_.A)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,eT.A)(({theme:e})=>({padding:e.spacing(1,2,2)}))),nU=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiAccordionDetails"}),{className:r,...o}=n,a=(e=>{let{classes:t}=e;return(0,eL.A)({root:["root"]},nF,t)})(n);return(0,i.jsx)(nq,{className:(0,eV.A)(a.root,r),ref:t,ownerState:n,...o})});var nJ=n(45271),nY=n(86742);function nK(e){var t=(0,h.useState)(function(){return(0,O.CN)("function"==typeof e?e():e,!0)}),n=t[1];return[t[0],(0,h.useCallback)(function(e){n("function"==typeof e?(0,O.jM)(e):(0,O.CN)(e))},[])]}var nX=n(49603),nQ=n(4150),nZ=n(30576),n0=n(10571),n1=n(38990);function n2({builtinVariableDefinitions:e}){let t=(0,h.useMemo)(()=>{let t={};for(let n of e){let e=t[n.spec.source];if(e){e.push(n);continue}t[n.spec.source]=[n]}return t},[e]),n=(0,h.useMemo)(()=>{let e=[];for(let n in t)e.includes(n)||e.push(n);return e},[t]);return(0,i.jsx)(i.Fragment,{children:n.map(e=>(0,i.jsxs)(nT,{sx:e=>({".MuiAccordionSummary-root":{backgroundColor:e.palette.background.lighter},".MuiAccordionDetails-root":{backgroundColor:e.palette.background.lighter}}),children:[(0,i.jsx)(nG,{expandIcon:(0,i.jsx)(n1.default,{}),"aria-controls":"builtin",id:"builtin",children:(0,i.jsx)(to.A,{variant:"h2",children:(0,i.jsx)(s.InfoTooltip,{title:`${e} Built-in Variables`,description:"Variables computed during dashboard rendering.",children:(0,i.jsxs)("span",{children:[e," Built-in Variables"]})})})}),(0,i.jsx)(nU,{children:(0,i.jsx)(nA.A,{children:(0,i.jsxs)(nC.A,{sx:{minWidth:650},"aria-label":"table of external variables",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:"Name"}),(0,i.jsx)(nJ.A,{children:"Description"})]})}),(0,i.jsx)(nE.A,{children:(t[e]??[]).map(t=>(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:t.spec.name}),(0,i.jsx)(nJ.A,{children:t.spec.display?.description??""})]},e+"-"+t.spec.name))})]})})})]},e))})}function n9(e){return P.VARIABLE_TYPES.find(t=>t.kind===e)?.label}function n3(e){let[t,n]=nK(e.variableDefinitions),[r,a]=(0,h.useState)(null),[l,u]=(0,h.useState)("update"),d=e.externalVariableDefinitions,c=e.builtinVariableDefinitions,p=(0,h.useMemo)(()=>{let e,n,r;return e=[],r=new Set(n=t.map(e=>e.spec.name)),n.length!==r.size&&e.push("Variable names must be unique"),{errors:e,isValid:0===e.length}},[t]),[f]=(0,h.useMemo)(()=>[nl(t,{},d)],[d,t]),g="number"==typeof r&&t[r],{openDiscardChangesConfirmationDialog:m,closeDiscardChangesConfirmationDialog:y}=eA(),b=e=>{n(t=>{t.splice(e,1)})},v=(e,t)=>{n(n=>{if("up"===t){let t=n[e-1],r=n[e];0!==e&&t&&r&&(n[e-1]=r,n[e]=t)}else{let t=n[e+1],r=n[e];if(e===n.length-1||!t||!r)return;n[e+1]=r,n[e]=t}})};return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(P.ValidationProvider,{children:(0,i.jsx)(P.VariableEditorForm,{initialVariableDefinition:g,action:l,isDraft:!0,onActionChange:u,onSave:e=>{n(t=>{t[r]=e,a(null)})},onClose:()=>{"create"===l&&b(r),a(null)}})}),!g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eP.A,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsx)(to.A,{variant:"h2",children:"Edit Dashboard Variables"}),(0,i.jsxs)(th.A,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(o.A,{disabled:e.variableDefinitions===t||!p.isValid,variant:"contained",onClick:()=>{e.onChange(t)},children:"Apply"}),(0,i.jsx)(o.A,{color:"secondary",variant:"outlined",onClick:()=>{JSON.stringify(e.variableDefinitions)!==JSON.stringify(t)?m({onDiscardChanges:()=>{y(),e.onCancel()},onCancel:()=>{y()},description:"You have unapplied changes. Are you sure you want to discard these changes? Changes cannot be recovered."}):e.onCancel()},children:"Cancel"})]})]}),(0,i.jsx)(eP.A,{padding:2,sx:{overflowY:"scroll"},children:(0,i.jsxs)(th.A,{spacing:2,children:[(0,i.jsxs)(th.A,{spacing:2,children:[!p.isValid&&p.errors.map(e=>(0,i.jsx)(nS.A,{severity:"error",children:e},e)),(0,i.jsx)(nA.A,{children:(0,i.jsxs)(nC.A,{sx:{minWidth:650},"aria-label":"table of variables",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(n4,{children:"Visibility"}),(0,i.jsx)(n4,{children:"Name"}),(0,i.jsx)(n4,{children:"Type"}),(0,i.jsx)(n4,{children:"Description"}),(0,i.jsx)(n4,{align:"right",children:"Actions"})]})}),(0,i.jsx)(nE.A,{children:t.map((e,r)=>(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(n4,{component:"th",scope:"row",children:(0,i.jsx)(nk.A,{checked:e.spec.display?.hidden!==!0,onChange:e=>{var t;t=e.target.checked,n(e=>{let n=e[r];n&&(n.spec.display||(n.spec.display={name:n.spec.name,hidden:!1}),n.spec.display.hidden=!1===t)})}})}),(0,i.jsx)(n4,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,i.jsx)(n5,{name:e.spec.name,state:f.get({name:e.spec.name})})}),(0,i.jsx)(n4,{children:n9(e.kind)??e.kind}),(0,i.jsx)(n4,{children:e.spec.display?.description??""}),(0,i.jsxs)(n4,{align:"right",sx:{whiteSpace:"nowrap"},children:[(0,i.jsx)(tk.A,{onClick:()=>v(r,"up"),disabled:0===r,children:(0,i.jsx)(t3.default,{})}),(0,i.jsx)(tk.A,{onClick:()=>v(r,"down"),disabled:r===t.length-1,children:(0,i.jsx)(t4.default,{})}),(0,i.jsx)(tk.A,{onClick:()=>{u("update"),a(r)},children:(0,i.jsx)(nX.default,{})}),(0,i.jsx)(tk.A,{onClick:()=>b(r),children:(0,i.jsx)(nQ.default,{})})]})]},e.spec.name))})]})}),(0,i.jsx)(eP.A,{display:"flex",children:(0,i.jsx)(o.A,{variant:"contained",startIcon:(0,i.jsx)(nY.default,{}),sx:{marginLeft:"auto"},onClick:()=>{u("create"),n(e=>{e.push({kind:"TextVariable",spec:{name:"NewVariable",value:""}})}),a(t.length)},children:"Add Variable"})})]}),d&&!d.every(e=>0===e.definitions.length)&&d.map((e,t)=>e.definitions.length>0&&(0,i.jsxs)(nT,{sx:e=>({".MuiAccordionSummary-root":{backgroundColor:e.palette.background.lighter},".MuiAccordionDetails-root":{backgroundColor:e.palette.background.lighter}}),children:[(0,i.jsx)(nG,{expandIcon:(0,i.jsx)(n1.default,{}),"aria-controls":e.source,id:e.source,children:(0,i.jsx)(th.A,{flexDirection:"row",alignItems:"center",justifyContent:"start",children:(0,i.jsxs)(i.Fragment,{children:[e.tooltip?(0,i.jsx)(to.A,{variant:"h2",children:(0,i.jsx)(s.InfoTooltip,{title:e.tooltip.title||"",description:e.tooltip.description||"",children:(0,i.jsxs)("span",{children:[(0,tL.A)(e.source)," Variables"]})})}):(0,i.jsxs)(to.A,{variant:"h2",children:[(0,tL.A)(e.source)," Variables"]}),e.editLink&&(0,i.jsx)(tk.A,{href:e.editLink,target:"_blank",children:(0,i.jsx)(n0.default,{fontSize:"small"})})]})})}),(0,i.jsx)(nU,{children:(0,i.jsx)(nA.A,{children:(0,i.jsxs)(nC.A,{sx:{minWidth:650},"aria-label":"table of external variables",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(n4,{children:"Visibility"}),(0,i.jsx)(n4,{children:"Name"}),(0,i.jsx)(n4,{children:"Type"}),(0,i.jsx)(n4,{children:"Description"}),(0,i.jsx)(n4,{align:"right",children:"Actions"})]})}),(0,i.jsx)(nE.A,{children:e.definitions.map(t=>(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(n4,{component:"th",scope:"row",children:(0,i.jsx)(nk.A,{checked:t.spec.display?.hidden!==!0,disabled:!0})}),(0,i.jsx)(n4,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,i.jsx)(n5,{name:t.spec.name,state:f.get({name:t.spec.name,source:e.source})})}),(0,i.jsx)(n4,{children:n9(t.kind)??t.kind}),(0,i.jsx)(n4,{children:t.spec.display?.description??""}),(0,i.jsxs)(n4,{align:"right",children:[(0,i.jsx)(tg.A,{title:"Override",children:(0,i.jsx)(tk.A,{onClick:()=>{n(e=>{e.push(t)})},disabled:!!f.get({name:t.spec.name}),children:(0,i.jsx)(nZ.default,{})})}),(0,i.jsx)(tk.A,{disabled:!0,children:(0,i.jsx)(t3.default,{})}),(0,i.jsx)(tk.A,{disabled:!0,children:(0,i.jsx)(t4.default,{})}),(0,i.jsx)(tk.A,{disabled:!0,children:(0,i.jsx)(nX.default,{})}),(0,i.jsx)(tk.A,{disabled:!0,children:(0,i.jsx)(nQ.default,{})})]})]},t.spec.name))})]})})})]},t)),c&&(0,i.jsx)(n2,{builtinVariableDefinitions:c})]})})]})]})}let n4=(0,e_.A)(nJ.A)(({theme:e})=>({borderBottom:`solid 1px ${e.palette.divider}`}));function n5(e){let{name:t,state:n}=e;return(0,i.jsxs)(i.Fragment,{children:[!n?.overridden&&`${t} `,!n?.overridden&&n?.overriding&&(0,i.jsx)(eP.A,{fontWeight:"normal",color:e=>e.palette.primary.main,children:"(overriding)"}),n?.overridden&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eP.A,{color:e=>e.palette.grey[500],children:t}),(0,i.jsx)(eP.A,{fontWeight:"normal",color:e=>e.palette.grey[500],children:"(overridden)"})]})]})}function n7({variant:e="text",label:t="Variables",color:n="primary",fullWidth:r}){let[a,l]=(0,h.useState)(!1),u=ny(),d=nb(),f=(0,P.useBuiltinVariableDefinitions)(),{setVariableDefinitions:g}=nm(),m=()=>{l(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:c,children:(0,i.jsx)(o.A,{startIcon:(0,i.jsx)(tj.default,{}),onClick:()=>{l(!0)},"aria-label":c,variant:e,color:n,fullWidth:r,sx:p,children:t})}),(0,i.jsx)(s.Drawer,{isOpen:a,onClose:m,PaperProps:{sx:{width:"50%"}},"data-testid":"variable-editor",children:(0,i.jsx)(n3,{variableDefinitions:u,externalVariableDefinitions:d,builtinVariableDefinitions:f,onCancel:m,onChange:e=>{g(e),l(!1)}})})]})}let n8=({label:e="Edit",onClick:t})=>(0,i.jsx)(o.A,{onClick:t,startIcon:(0,i.jsx)(tj.default,{}),variant:"outlined",color:"secondary",sx:{whiteSpace:"nowrap",minWidth:"auto"},children:e}),n6="Let's get started",re={variant:"outlined",color:"secondary"},rt=({actions:e,isEditMode:t,onEditButtonClick:n})=>e&&"boolean"!=typeof e?e:!1===e?null:t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ek,{variant:"outlined",color:"secondary",label:"Add Panel",fullWidth:!0}),(0,i.jsx)(n7,{variant:"outlined",color:"secondary",label:"Add Variables",fullWidth:!0})]}):n?(0,i.jsx)(n8,{...re,label:"Edit Dashboard",onClick:n}):null,rn=({title:e=n6,image:t,description:n,additionalText:r,actions:o,onEditButtonClick:a})=>{let{isEditMode:s}=q(),l=s?"We currently support time series charts, gauge charts, stat charts and more!":"This dashboard is currently empty. Get started by clicking the edit button.",u=(0,i.jsx)(rt,{actions:o,onEditButtonClick:a,isEditMode:s});return(0,i.jsxs)(eP.A,{sx:{width:"500px",textAlign:"center",margin:"0 auto"},children:[(0,i.jsxs)(eP.A,{sx:{width:"289px",margin:"0 auto"},children:[!!t&&t,(0,i.jsx)(to.A,{variant:"h2",gutterBottom:!0,children:e}),(0,i.jsx)(to.A,{variant:"body1",children:n??l}),u&&(0,i.jsx)(eP.A,{sx:{display:"flex",gap:2,marginTop:1,justifyContent:"center"},children:u})]}),r&&(0,i.jsx)(to.A,{variant:"subtitle1",sx:{marginTop:12},children:r})]})};function rr({emptyDashboardProps:e,panelOptions:t,...n}){let r=K(),o=(0,h.useRef)(null),a=!r.length,l=o.current?.getBoundingClientRect().top??165,u=window.innerHeight-l-window.scrollY;return(0,i.jsx)(eP.A,{...n,sx:{height:"100%"},ref:o,children:(0,i.jsxs)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:[a&&(0,i.jsx)(eP.A,{sx:{height:"100%",display:"flex",alignItems:"center"},children:(0,i.jsx)(rn,{...e})}),!a&&r.map(e=>(0,i.jsx)(t6,{panelGroupId:e,panelOptions:t,panelFullHeight:u},e))]})})}var ri=n(8072),ro=n(95591),ra=n(83183),rs=n(10713),rl=n(30443);function ru(e){return e.substring(2).toLowerCase()}function rd(e){let{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,a=h.useRef(!1),s=h.useRef(null),l=h.useRef(!1),u=h.useRef(!1);h.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);let d=(0,ro.A)((0,rl.A)(t),s),c=(0,ra.A)(e=>{let t=u.current;u.current=!1;let r=(0,rs.A)(s.current);if(!(!l.current||!s.current||"clientX"in e&&(r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY))){if(a.current){a.current=!1;return}(e.composedPath?e.composedPath().includes(s.current):!r.documentElement.contains(e.target)||s.current.contains(e.target))||!n&&t||i(e)}}),p=e=>n=>{u.current=!0;let r=t.props[e];r&&r(n)},f={ref:d};return!1!==o&&(f[o]=p(o)),h.useEffect(()=>{if(!1!==o){let e=ru(o),t=(0,rs.A)(s.current),n=()=>{a.current=!0};return t.addEventListener(e,c),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,c),t.removeEventListener("touchmove",n)}}},[c,o]),!1!==r&&(f[r]=p(r)),h.useEffect(()=>{if(!1!==r){let e=ru(r),t=(0,rs.A)(s.current);return t.addEventListener(e,c),()=>{t.removeEventListener(e,c)}}},[c,r]),h.cloneElement(t,f)}var rc=n(19557),rp=n(97090);function rf(){var e;let t,{panels:n,panelGroups:r,panelGroupOrder:i,setDashboard:o,kind:a,metadata:s,display:l,duration:u,refreshInterval:d,datasources:c,ttl:p}=B(({panels:e,panelGroups:t,panelGroupOrder:n,setDashboard:r,kind:i,metadata:o,display:a,duration:s,refreshInterval:l,datasources:u,ttl:d})=>({panels:e,panelGroups:t,panelGroupOrder:n,setDashboard:r,kind:i,metadata:o,display:a,duration:s,refreshInterval:l,datasources:u,ttl:d})),{setVariableDefinitions:f}=nm(),h=ny(),g=(e=r,t=[],i.map(n=>{let r,i=e[n];if(void 0===i)throw Error("panel group not found");let{title:o,isCollapsed:a,repeatVariable:s,itemLayouts:l,itemPanelKeys:u}=i;(o||void 0!==a)&&(r={title:o??"",collapse:{open:!a}});let d={kind:"Grid",spec:{display:r,items:l.map(e=>{let t=u[e.i];if(void 0===t)throw Error(`Missing panel key of layout ${e.i}`);return{x:e.x,y:e.y,width:e.w,height:e.h,content:(0,M.YI)(t)}}),repeatVariable:s}};t.push(d)}),t);return{dashboard:"Dashboard"===a?{kind:a,metadata:s,spec:{display:l,panels:n,layouts:g,variables:h,duration:u,refreshInterval:d,datasources:c}}:{kind:a,metadata:s,spec:{display:l,panels:n,layouts:g,variables:h,duration:u,refreshInterval:d,datasources:c,ttl:p}},setDashboard:e=>{f(e.spec.variables),o(e)}}}let rh=Symbol.for("yaml.alias"),rg=Symbol.for("yaml.document"),rm=Symbol.for("yaml.map"),ry=Symbol.for("yaml.pair"),rb=Symbol.for("yaml.scalar"),rv=Symbol.for("yaml.seq"),rx=Symbol.for("yaml.node.type"),rj=e=>!!e&&"object"==typeof e&&e[rx]===rh,rw=e=>!!e&&"object"==typeof e&&e[rx]===rg,rS=e=>!!e&&"object"==typeof e&&e[rx]===rm,rA=e=>!!e&&"object"==typeof e&&e[rx]===ry,rC=e=>!!e&&"object"==typeof e&&e[rx]===rb,rD=e=>!!e&&"object"==typeof e&&e[rx]===rv;function rO(e){if(e&&"object"==typeof e)switch(e[rx]){case rm:case rv:return!0}return!1}function rE(e){if(e&&"object"==typeof e)switch(e[rx]){case rh:case rm:case rb:case rv:return!0}return!1}let rk=Symbol("break visit"),rP=Symbol("skip children"),rM=Symbol("remove node");function rV(e,t){let n=r_(t);rw(e)?rR(null,e.contents,n,Object.freeze([e]))===rM&&(e.contents=null):rR(null,e,n,Object.freeze([]))}function rR(e,t,n,r){let i=rT(e,t,n,r);if(rE(i)||rA(i))return rz(e,r,i),rR(e,i,n,r);if("symbol"!=typeof i){if(rO(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){let i=rR(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===rk)return rk;i===rM&&(t.items.splice(e,1),e-=1)}}}else if(rA(t)){r=Object.freeze(r.concat(t));let e=rR("key",t.key,n,r);if(e===rk)return rk;e===rM&&(t.key=null);let i=rR("value",t.value,n,r);if(i===rk)return rk;i===rM&&(t.value=null)}}return i}async function rI(e,t){let n=r_(t);rw(e)?await rL(null,e.contents,n,Object.freeze([e]))===rM&&(e.contents=null):await rL(null,e,n,Object.freeze([]))}async function rL(e,t,n,r){let i=await rT(e,t,n,r);if(rE(i)||rA(i))return rz(e,r,i),rL(e,i,n,r);if("symbol"!=typeof i){if(rO(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){let i=await rL(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===rk)return rk;i===rM&&(t.items.splice(e,1),e-=1)}}}else if(rA(t)){r=Object.freeze(r.concat(t));let e=await rL("key",t.key,n,r);if(e===rk)return rk;e===rM&&(t.key=null);let i=await rL("value",t.value,n,r);if(i===rk)return rk;i===rM&&(t.value=null)}}return i}function r_(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function rT(e,t,n,r){return"function"==typeof n?n(e,t,r):rS(t)?n.Map?.(e,t,r):rD(t)?n.Seq?.(e,t,r):rA(t)?n.Pair?.(e,t,r):rC(t)?n.Scalar?.(e,t,r):rj(t)?n.Alias?.(e,t,r):void 0}function rz(e,t,n){let r=t[t.length-1];if(rO(r))r.items[e]=n;else if(rA(r))"key"===e?r.key=n:r.value=n;else if(rw(r))r.contents=n;else{let e=rj(r)?"alias":"scalar";throw Error(`Cannot replace node with ${e} parent`)}}rV.BREAK=rk,rV.SKIP=rP,rV.REMOVE=rM,rI.BREAK=rk,rI.SKIP=rP,rI.REMOVE=rM;let rN={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},rH=e=>e.replace(/[!,[\]{}]/g,e=>rN[e]);class r${constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},r$.defaultYaml,e),this.tags=Object.assign({},r$.defaultTags,t)}clone(){let e=new r$(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new r$(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:r$.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},r$.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:r$.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},r$.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;let[e]=n;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;{let n=/^\d+\.\d+$/.test(e);return t(6,`Unsupported YAML version ${e}`,n),!1}}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){let n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}let[,n,r]=e.match(/^(.*!)([^!]*)$/s);r||t(`The ${e} tag has no suffix`);let i=this.tags[n];if(i)try{return i+decodeURIComponent(r)}catch(e){return t(String(e)),null}return"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+rH(e.substring(n.length));return"!"===e[0]?e:`!<${e}>`}toString(e){let t,n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);if(e&&r.length>0&&rE(e.contents)){let n={};rV(e.contents,(e,t)=>{rE(t)&&t.tag&&(n[t.tag]=!0)}),t=Object.keys(n)}else t=[];for(let[i,o]of r)("!!"!==i||"tag:yaml.org,2002:"!==o)&&(!e||t.some(e=>e.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join("\n")}}function rB(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let t=JSON.stringify(e);throw Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function rW(e){let t=new Set;return rV(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function rG(e,t){for(let n=1;;++n){let r=`${e}${n}`;if(!t.has(r))return r}}function rF(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){let n=r[t],i=rF(e,r,String(t),n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}else if(r instanceof Map)for(let t of Array.from(r.keys())){let n=r.get(t),i=rF(e,r,t,n);void 0===i?r.delete(t):i!==n&&r.set(t,i)}else if(r instanceof Set)for(let t of Array.from(r)){let n=rF(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(let[t,n]of Object.entries(r)){let i=rF(e,r,t,n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}return e.call(t,n,r)}function rq(e,t,n){if(Array.isArray(e))return e.map((e,t)=>rq(e,String(t),n));if(e&&"function"==typeof e.toJSON){if(!n||!((rC(e)||rO(e))&&e.anchor))return e.toJSON(t,n);let r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=e=>{r.res=e,delete n.onCreate};let i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}return"bigint"!=typeof e||n?.keep?e:Number(e)}r$.defaultYaml={explicit:!1,version:"1.2"},r$.defaultTags={"!!":"tag:yaml.org,2002:"};class rU{constructor(e){Object.defineProperty(this,rx,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:r,reviver:i}={}){if(!rw(e))throw TypeError("A document argument is required");let o={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=rq(this,"",o);if("function"==typeof r)for(let{count:e,res:t}of o.anchors.values())r(t,e);return"function"==typeof i?rF(i,{"":a},"",a):a}}class rJ extends rU{constructor(e){super(rh),this.source=e,Object.defineProperty(this,"tag",{set(){throw Error("Alias nodes cannot have tags")}})}resolve(e){let t;return rV(e,{Node:(e,n)=>{if(n===this)return rV.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};let{anchors:n,doc:r,maxAliasCount:i}=t,o=this.resolve(r);if(!o)throw ReferenceError(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);let a=n.get(o);if(a||(rq(o,null,t),a=n.get(o)),!a||void 0===a.res)throw ReferenceError("This should not happen: Alias anchor was not resolved?");if(i>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=function e(t,n,r){if(rj(n)){let e=n.resolve(t),i=r&&e&&r.get(e);return i?i.count*i.aliasCount:0}if(rO(n)){let i=0;for(let o of n.items){let n=e(t,o,r);n>i&&(i=n)}return i}return rA(n)?Math.max(e(t,n.key,r),e(t,n.value,r)):1}(r,o,n)),a.count*a.aliasCount>i))throw ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(e,t,n){let r=`*${this.source}`;if(e){if(rB(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source))throw Error(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);if(e.implicitKey)return`${r} `}return r}}let rY=e=>!e||"function"!=typeof e&&"object"!=typeof e;class rK extends rU{constructor(e){super(rb),this.value=e}toJSON(e,t){return t?.keep?this.value:rq(this.value,e,t)}toString(){return String(this.value)}}function rX(e,t,n){let r;if(rw(e)&&(e=e.contents),rE(e))return e;if(rA(e)){let t=n.schema[rm].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:i,onAnchor:o,onTagObj:a,schema:s,sourceObjects:l}=n;if(i&&e&&"object"==typeof e){if(r=l.get(e))return r.anchor||(r.anchor=o(e)),new rJ(r.anchor);r={anchor:null,node:null},l.set(e,r)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let u=function(e,t,n){if(t){let e=n.filter(e=>e.tag===t),r=e.find(e=>!e.format)??e[0];if(!r)throw Error(`Tag ${t} not found`);return r}return n.find(t=>t.identify?.(e)&&!t.format)}(e,t,s.tags);if(!u){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){let t=new rK(e);return r&&(r.node=t),t}u=e instanceof Map?s[rm]:Symbol.iterator in Object(e)?s[rv]:s[rm]}a&&(a(u),delete n.onTagObj);let d=u?.createNode?u.createNode(n.schema,e,n):"function"==typeof u?.nodeClass?.from?u.nodeClass.from(n.schema,e,n):new rK(e);return t?d.tag=t:u.default||(d.tag=u.tag),r&&(r.node=d),d}function rQ(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){let n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){let e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return rX(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}rK.BLOCK_FOLDED="BLOCK_FOLDED",rK.BLOCK_LITERAL="BLOCK_LITERAL",rK.PLAIN="PLAIN",rK.QUOTE_DOUBLE="QUOTE_DOUBLE",rK.QUOTE_SINGLE="QUOTE_SINGLE";let rZ=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class r0 extends rU{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>rE(t)||rA(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(rZ(e))this.add(t);else{let[n,...r]=e,i=this.get(n,!0);if(rO(i))i.addIn(r,t);else if(void 0===i&&this.schema)this.set(n,rQ(this.schema,r,t));else throw Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}deleteIn(e){let[t,...n]=e;if(0===n.length)return this.delete(t);let r=this.get(t,!0);if(rO(r))return r.deleteIn(n);throw Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){let[n,...r]=e,i=this.get(n,!0);return 0===r.length?!t&&rC(i)?i.value:i:rO(i)?i.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!rA(t))return!1;let n=t.value;return null==n||e&&rC(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[t,...n]=e;if(0===n.length)return this.has(t);let r=this.get(t,!0);return!!rO(r)&&r.hasIn(n)}setIn(e,t){let[n,...r]=e;if(0===r.length)this.set(n,t);else{let e=this.get(n,!0);if(rO(e))e.setIn(r,t);else if(void 0===e&&this.schema)this.set(n,rQ(this.schema,r,t));else throw Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}}let r1=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function r2(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}let r9=(e,t,n)=>e.endsWith("\n")?r2(n,t):n.includes("\n")?"\n"+r2(n,t):(e.endsWith(" ")?"":" ")+n,r3="block",r4="quoted";function r5(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){let l,u,d;if(!i||i<0)return e;i<o&&(o=0);let c=Math.max(1+o,1+i-t.length);if(e.length<=c)return e;let p=[],f={},h=i-t.length;"number"==typeof r&&(r>i-Math.max(2,o)?p.push(0):h=i-r);let g=!1,m=-1,y=-1,b=-1;for(n===r3&&-1!==(m=r7(e,m,t.length))&&(h=m+c);d=e[m+=1];){if(n===r4&&"\\"===d){switch(y=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}b=m}if("\n"===d)n===r3&&(m=r7(e,m,t.length)),h=m+t.length+c,l=void 0;else{if(" "===d&&u&&" "!==u&&"\n"!==u&&"	"!==u){let t=e[m+1];t&&" "!==t&&"\n"!==t&&"	"!==t&&(l=m)}if(m>=h)if(l)p.push(l),h=l+c,l=void 0;else if(n===r4){for(;" "===u||"	"===u;)u=d,d=e[m+=1],g=!0;let t=m>b+1?m-2:y-1;if(f[t])return e;p.push(t),f[t]=!0,h=t+c,l=void 0}else g=!0}u=d}if(g&&s&&s(),0===p.length)return e;a&&a();let v=e.slice(0,p[0]);for(let r=0;r<p.length;++r){let i=p[r],o=p[r+1]||e.length;0===i?v=`
${t}${e.slice(0,o)}`:(n===r4&&f[i]&&(v+=`${e[i]}\\`),v+=`
${t}${e.slice(i+1,o)}`)}return v}function r7(e,t,n){let r=t,i=t+1,o=e[i];for(;" "===o||"	"===o;)if(t<i+n)o=e[++t];else{do o=e[++t];while(o&&"\n"!==o);r=t,o=e[i=t+1]}return r}let r8=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth});function r6(e,t){let n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;let{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(/^(%|---|\.\.\.)/m.test(e)?"  ":""),a="",s=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(s,e)+"\\ ",e+=1,s=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(s,e);let t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,s=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<i)e+=1;else{for(a+=n.slice(s,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=o," "===n[e+2]&&(a+="\\"),e+=1,s=e+1}break;default:e+=1}return a=s?a+n.slice(s):n,r?a:r5(a,o,"quoted",r8(t,!1))}function ie(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return r6(e,t);let n=t.indent||(/^(%|---|\.\.\.)/m.test(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?r:r5(r,n,"flow",r8(t,!1))}function it(e,t){let n,{singleQuote:r}=t.options;if(!1===r)n=r6;else{let t=e.includes('"'),i=e.includes("'");n=t&&!i?ie:i&&!t?r6:r?ie:r6}return n(e,t)}try{r=RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{r=/\n+(?!\n|$)/g}function ir({comment:e,type:t,value:n},i,o,a){let s,l,u,d,{blockQuote:c,commentString:p,lineWidth:f}=i.options;if(!c||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return it(n,i);let h=i.indent||(i.forceBlockIndent||(d=n,/^(%|---|\.\.\.)/m.test(d))?"  ":""),g="literal"===c||"folded"!==c&&t!==rK.BLOCK_FOLDED&&(t===rK.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;let r=t-n,i=e.length;if(i<=r)return!1;for(let t=0,n=0;t<i;++t)if("\n"===e[t]){if(t-n>r)return!0;if(i-(n=t+1)<=r)return!1}return!0}(n,f,h.length));if(!n)return g?"|\n":">\n";for(l=n.length;l>0;--l){let e=n[l-1];if("\n"!==e&&"	"!==e&&" "!==e)break}let m=n.substring(l),y=m.indexOf("\n");-1===y?s="-":n===m||y!==m.length-1?(s="+",a&&a()):s="",m&&(n=n.slice(0,-m.length),"\n"===m[m.length-1]&&(m=m.slice(0,-1)),m=m.replace(r,`$&${h}`));let b=!1,v=-1;for(u=0;u<n.length;++u){let e=n[u];if(" "===e)b=!0;else if("\n"===e)v=u;else break}let x=n.substring(0,v<u?v+1:u);x&&(n=n.substring(x.length),x=x.replace(/\n+/g,`$&${h}`));let j=h?"2":"1",w=(b?j:"")+s;if(e&&(w+=" "+p(e.replace(/ ?[\r\n]+/g," ")),o&&o()),!g){let e=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`),r=!1,o=r8(i,!0);"folded"!==c&&t!==rK.BLOCK_FOLDED&&(o.onOverflow=()=>{r=!0});let a=r5(`${x}${e}${m}`,h,"block",o);if(!r)return`>${w}
${h}${a}`}return n=n.replace(/\n+/g,`$&${h}`),`|${w}
${h}${x}${n}${m}`}function ii(e,t,n,r){let{implicitKey:i,inFlow:o}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)}),{type:s}=e;s!==rK.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=rK.QUOTE_DOUBLE);let l=e=>{switch(e){case rK.BLOCK_FOLDED:case rK.BLOCK_LITERAL:return i||o?it(a.value,t):ir(a,t,n,r);case rK.QUOTE_DOUBLE:return r6(a.value,t);case rK.QUOTE_SINGLE:return ie(a.value,t);case rK.PLAIN:return function(e,t,n,r){let{type:i,value:o}=e,{actualString:a,implicitKey:s,indent:l,indentStep:u,inFlow:d}=t;if(s&&o.includes("\n")||d&&/[[\]{},]/.test(o))return it(o,t);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return s||d||!o.includes("\n")?it(o,t):ir(e,t,n,r);if(!s&&!d&&i!==rK.PLAIN&&o.includes("\n"))return ir(e,t,n,r);if(/^(%|---|\.\.\.)/m.test(o)){if(""===l)return t.forceBlockIndent=!0,ir(e,t,n,r);else if(s&&l===u)return it(o,t)}let c=o.replace(/\n+/g,`$&
${l}`);if(a){let e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(c),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return it(o,t)}return s?c:r5(c,l,"flow",r8(t,!1))}(a,t,n,r);default:return null}},u=l(s);if(null===u){let{defaultKeyType:e,defaultStringType:n}=t.options,r=i&&e||n;if(null===(u=l(r)))throw Error(`Unsupported default string type ${r}`)}return u}function io(e,t){let n,r=Object.assign({blockQuote:!0,commentString:r1,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof r.indent?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function ia(e,t,n,r){let i;if(rA(e))return e.toString(t,n,r);if(rj(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o=rE(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i||(i=function(e,t){let n,r;if(t.tag){let n=e.filter(e=>e.tag===t.tag);if(n.length>0)return n.find(e=>e.format===t.format)??n[0]}if(rC(t)){n=t.value;let i=e.filter(e=>e.identify?.(n));if(i.length>1){let e=i.filter(e=>e.test);e.length>0&&(i=e)}r=i.find(e=>e.format===t.format)??i.find(e=>!e.format)}else n=t,r=e.find(e=>e.nodeClass&&n instanceof e.nodeClass);if(!r){let e=n?.constructor?.name??typeof n;throw Error(`Tag not resolved for ${e} value`)}return r}(t.doc.schema.tags,o));let a=function(e,t,{anchors:n,doc:r}){if(!r.directives)return"";let i=[],o=(rC(e)||rO(e))&&e.anchor;o&&rB(o)&&(n.add(o),i.push(`&${o}`));let a=e.tag?e.tag:t.default?null:t.tag;return a&&i.push(r.directives.tagString(a)),i.join(" ")}(o,i,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);let s="function"==typeof i.stringify?i.stringify(o,t,n,r):rC(o)?ii(o,t,n,r):o.toString(t,n,r);return a?rC(o)||"{"===s[0]||"["===s[0]?`${a} ${s}`:`${a}
${t.indent}${s}`:s}let is={identify:e=>"<<"===e||"symbol"==typeof e&&"<<"===e.description,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new rK(Symbol("<<")),{addToJSMap:il}),stringify:()=>"<<"};function il(e,t,n){if(rD(n=e&&rj(n)?n.resolve(e.doc):n))for(let r of n.items)iu(e,t,r);else if(Array.isArray(n))for(let r of n)iu(e,t,r);else iu(e,t,n)}function iu(e,t,n){let r=e&&rj(n)?n.resolve(e.doc):n;if(!rS(r))throw Error("Merge sources must be maps or map aliases");for(let[n,i]of r.toJSON(null,e,Map))t instanceof Map?t.has(n)||t.set(n,i):t instanceof Set?t.add(n):Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(t,n,{value:i,writable:!0,enumerable:!0,configurable:!0});return t}function id(e,t,{key:n,value:r}){if(rE(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if((is.identify(n)||rC(n)&&(!n.type||n.type===rK.PLAIN)&&is.identify(n.value))&&e?.doc.schema.tags.some(e=>e.tag===is.tag&&e.default))il(e,t,r);else{let i=rq(n,"",e);if(t instanceof Map)t.set(i,rq(r,i,e));else if(t instanceof Set)t.add(i);else{let o=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(rE(e)&&n?.doc){let t=io(n.doc,{});for(let e of(t.anchors=new Set,n.anchors.keys()))t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;let o=e.toString(t);if(!n.mapKeyWarned){var r,i;let e=JSON.stringify(o);e.length>40&&(e=e.substring(0,36)+'..."'),r=n.doc.options.logLevel,i=`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`,("debug"===r||"warn"===r)&&console.warn(i),n.mapKeyWarned=!0}return o}return JSON.stringify(t)}(n,i,e),a=rq(r,o,e);o in t?Object.defineProperty(t,o,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[o]=a}}return t}function ic(e,t,n){return new ip(rX(e,void 0,n),rX(t,void 0,n))}class ip{constructor(e,t=null){Object.defineProperty(this,rx,{value:ry}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return rE(t)&&(t=t.clone(e)),rE(n)&&(n=n.clone(e)),new ip(t,n)}toJSON(e,t){let n=t?.mapAsMap?new Map:{};return id(t,n,this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,i){let o,a,s,{allNullValues:l,doc:u,indent:d,indentStep:c,options:{commentString:p,indentSeq:f,simpleKeys:h}}=n,g=rE(e)&&e.comment||null;if(h){if(g)throw Error("With simple keys, key nodes cannot have comments");if(rO(e)||!rE(e)&&"object"==typeof e)throw Error("With simple keys, collection cannot be used as a key value")}let m=!h&&(!e||g&&null==t&&!n.inFlow||rO(e)||(rC(e)?e.type===rK.BLOCK_FOLDED||e.type===rK.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!m&&(h||!l),indent:d+c});let y=!1,b=!1,v=ia(e,n,()=>y=!0,()=>b=!0);if(!m&&!n.inFlow&&v.length>1024){if(h)throw Error("With simple keys, single line scalar must not span more than 1024 characters");m=!0}if(n.inFlow){if(l||null==t)return y&&r&&r(),""===v?"?":m?`? ${v}`:v}else if(l&&!h||null==t&&m)return v=`? ${v}`,g&&!y?v+=r9(v,n.indent,p(g)):b&&i&&i(),v;y&&(g=null),m?(g&&(v+=r9(v,n.indent,p(g))),v=`? ${v}
${d}:`):(v=`${v}:`,g&&(v+=r9(v,n.indent,p(g)))),rE(t)?(o=!!t.spaceBefore,a=t.commentBefore,s=t.comment):(o=!1,a=null,s=null,t&&"object"==typeof t&&(t=u.createNode(t))),n.implicitKey=!1,!m&&!g&&rC(t)&&(n.indentAtStart=v.length+1),b=!1,!(!f&&c.length>=2&&!n.inFlow&&!m&&rD(t))||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let x=!1,j=ia(t,n,()=>x=!0,()=>b=!0),w=" ";if(g||o||a){if(w=o?"\n":"",a){let e=p(a);w+=`
${r2(e,n.indent)}`}""!==j||n.inFlow?w+=`
${n.indent}`:"\n"===w&&(w="\n\n")}else if(!m&&rO(t)){let e=j[0],r=j.indexOf("\n"),i=-1!==r,o=n.inFlow??t.flow??0===t.items.length;if(i||!o){let t=!1;if(i&&("&"===e||"!"===e)){let n=j.indexOf(" ");"&"===e&&-1!==n&&n<r&&"!"===j[n+1]&&(n=j.indexOf(" ",n+1)),(-1===n||r<n)&&(t=!0)}t||(w=`
${n.indent}`)}}else(""===j||"\n"===j[0])&&(w="");return v+=w+j,n.inFlow?x&&r&&r():s&&!x?v+=r9(v,n.indent,p(s)):b&&i&&i(),v}(this,e,t,n):JSON.stringify(this)}}function ih(e,t,n){return(t.inFlow??e.flow?function({items:e},t,{flowChars:n,itemIndent:r}){let{indent:i,indentStep:o,flowCollectionPadding:a,options:{commentString:s}}=t,l=Object.assign({},t,{indent:r+=o,inFlow:!0,type:null}),u=!1,d=0,c=[];for(let n=0;n<e.length;++n){let i=e[n],o=null;if(rE(i))i.spaceBefore&&c.push(""),ig(t,c,i.commentBefore,!1),i.comment&&(o=i.comment);else if(rA(i)){let e=rE(i.key)?i.key:null;e&&(e.spaceBefore&&c.push(""),ig(t,c,e.commentBefore,!1),e.comment&&(u=!0));let n=rE(i.value)?i.value:null;n?(n.comment&&(o=n.comment),n.commentBefore&&(u=!0)):null==i.value&&e?.comment&&(o=e.comment)}o&&(u=!0);let a=ia(i,l,()=>o=null);n<e.length-1&&(a+=","),o&&(a+=r9(a,r,s(o))),!u&&(c.length>d||a.includes("\n"))&&(u=!0),c.push(a),d=c.length}let{start:p,end:f}=n;if(0===c.length)return p+f;if(!u){let e=c.reduce((e,t)=>e+t.length+2,2);u=t.options.lineWidth>0&&e>t.options.lineWidth}if(!u)return`${p}${a}${c.join(" ")}${a}${f}`;{let e=p;for(let t of c)e+=t?`
${o}${i}${t}`:"\n";return`${e}
${i}${f}`}}:function({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:a,onComment:s}){let l,{indent:u,options:{commentString:d}}=n,c=Object.assign({},n,{indent:o,type:null}),p=!1,f=[];for(let e=0;e<t.length;++e){let i=t[e],a=null;if(rE(i))!p&&i.spaceBefore&&f.push(""),ig(n,f,i.commentBefore,p),i.comment&&(a=i.comment);else if(rA(i)){let e=rE(i.key)?i.key:null;e&&(!p&&e.spaceBefore&&f.push(""),ig(n,f,e.commentBefore,p))}p=!1;let s=ia(i,c,()=>a=null,()=>p=!0);a&&(s+=r9(s,o,d(a))),p&&a&&(p=!1),f.push(r+s)}if(0===f.length)l=i.start+i.end;else{l=f[0];for(let e=1;e<f.length;++e){let t=f[e];l+=t?`
${u}${t}`:"\n"}}return e?(l+="\n"+r2(d(e),u),s&&s()):p&&a&&a(),l})(e,t,n)}function ig({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){let i=r2(t(r),e);n.push(i.trimStart())}}function im(e,t){let n=rC(t)?t.value:t;for(let r of e)if(rA(r)&&(r.key===t||r.key===n||rC(r.key)&&r.key.value===n))return r}class iy extends r0{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(rm,e),this.items=[]}static from(e,t,n){let{keepUndefined:r,replacer:i}=n,o=new this(e),a=(e,a)=>{if("function"==typeof i)a=i.call(t,e,a);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==a||r)&&o.items.push(ic(e,a,n))};if(t instanceof Map)for(let[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(let e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o}add(e,t){let n;n=rA(e)?e:e&&"object"==typeof e&&"key"in e?new ip(e.key,e.value):new ip(e,e?.value);let r=im(this.items,n.key),i=this.schema?.sortMapEntries;if(r){if(!t)throw Error(`Key ${n.key} already set`);rC(r.value)&&rY(n.value)?r.value.value=n.value:r.value=n.value}else if(i){let e=this.items.findIndex(e=>0>i(n,e));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){let t=im(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){let n=im(this.items,e),r=n?.value;return(!t&&rC(r)?r.value:r)??void 0}has(e){return!!im(this.items,e)}set(e,t){this.add(new ip(e,t),!0)}toJSON(e,t,n){let r=n?new n:t?.mapAsMap?new Map:{};for(let e of(t?.onCreate&&t.onCreate(r),this.items))id(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(let e of this.items)if(!rA(e))throw Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ih(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}let ib={collection:"map",default:!0,nodeClass:iy,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(rS(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,n)=>iy.from(e,t,n)};class iv extends r0{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(rv,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=ix(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){let n=ix(e);if("number"!=typeof n)return;let r=this.items[n];return!t&&rC(r)?r.value:r}has(e){let t=ix(e);return"number"==typeof t&&t<this.items.length}set(e,t){let n=ix(e);if("number"!=typeof n)throw Error(`Expected a valid index, not ${e}.`);let r=this.items[n];rC(r)&&rY(t)?r.value=t:this.items[n]=t}toJSON(e,t){let n=[];t?.onCreate&&t.onCreate(n);let r=0;for(let e of this.items)n.push(rq(e,String(r++),t));return n}toString(e,t,n){return e?ih(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){let{replacer:r}=n,i=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof r){let n=t instanceof Set?o:String(e++);o=r.call(t,n,o)}i.items.push(rX(o,void 0,n))}}return i}}function ix(e){let t=rC(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}let ij={collection:"seq",default:!0,nodeClass:iv,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(rD(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,n)=>iv.from(e,t,n)},iw={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>ii(e,t=Object.assign({actualString:!0},t),n,r)},iS={identify:e=>null==e,createNode:()=>new rK(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new rK(null),stringify:({source:e},t)=>"string"==typeof e&&iS.test.test(e)?e:t.options.nullStr},iA={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new rK("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&iA.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function iC({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);let i="number"==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}let iD={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?-1/0:1/0,stringify:iC},iO={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():iC(e)}},iE={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new rK(parseFloat(e)),n=e.indexOf(".");return -1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:iC},ik=e=>"bigint"==typeof e||Number.isInteger(e),iP=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function iM(e,t,n){let{value:r}=e;return ik(r)&&r>=0?n+r.toString(t):iC(e)}let iV={identify:e=>ik(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>iP(e,2,8,n),stringify:e=>iM(e,8,"0o")},iR={identify:ik,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>iP(e,0,10,n),stringify:iC},iI={identify:e=>ik(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>iP(e,2,16,n),stringify:e=>iM(e,16,"0x")},iL=[ib,ij,iw,iS,iA,iV,iR,iI,iD,iO,iE];function i_(e){return"bigint"==typeof e||Number.isInteger(e)}let iT=({value:e})=>JSON.stringify(e),iz=[ib,ij].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:iT},{identify:e=>null==e,createNode:()=>new rK(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:iT},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:iT},{identify:i_,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>i_(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:iT}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),iN={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"!=typeof atob)return t("This environment does not support reading binary tags; either Buffer or atob is required"),e;{let t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}},stringify({comment:e,type:t,value:n},r,i,o){let a;if("function"==typeof btoa){let e="";for(let t=0;t<n.length;++t)e+=String.fromCharCode(n[t]);a=btoa(e)}else throw Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t||(t=rK.BLOCK_LITERAL),t!==rK.QUOTE_DOUBLE){let e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(a.length/e),i=Array(n);for(let t=0,r=0;t<n;++t,r+=e)i[t]=a.substr(r,e);a=i.join(t===rK.BLOCK_LITERAL?"\n":" ")}return ii({comment:e,type:t,value:a},r,i,o)}};function iH(e,t){if(rD(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!rA(r)){if(rS(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");let e=r.items[0]||new ip(new rK(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}
${e.key.commentBefore}`:r.commentBefore),r.comment){let t=e.value??e.key;t.comment=t.comment?`${r.comment}
${t.comment}`:r.comment}r=e}e.items[n]=rA(r)?r:new ip(r)}}else t("Expected a sequence for this tag");return e}function i$(e,t,n){let{replacer:r}=n,i=new iv(e);i.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,s;if("function"==typeof r&&(e=r.call(t,String(o++),e)),Array.isArray(e))if(2===e.length)a=e[0],s=e[1];else throw TypeError(`Expected [key, value] tuple: ${e}`);else if(e&&e instanceof Object){let t=Object.keys(e);if(1===t.length)s=e[a=t[0]];else throw TypeError(`Expected tuple with one key, not ${t.length} keys`)}else a=e;i.items.push(ic(a,s,n))}return i}let iB={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:iH,createNode:i$};class iW extends iv{constructor(){super(),this.add=iy.prototype.add.bind(this),this.delete=iy.prototype.delete.bind(this),this.get=iy.prototype.get.bind(this),this.has=iy.prototype.has.bind(this),this.set=iy.prototype.set.bind(this),this.tag=iW.tag}toJSON(e,t){if(!t)return super.toJSON(e);let n=new Map;for(let e of(t?.onCreate&&t.onCreate(n),this.items)){let r,i;if(rA(e)?(r=rq(e.key,"",t),i=rq(e.value,r,t)):r=rq(e,"",t),n.has(r))throw Error("Ordered maps must not include duplicate keys");n.set(r,i)}return n}static from(e,t,n){let r=i$(e,t,n),i=new this;return i.items=r.items,i}}iW.tag="tag:yaml.org,2002:omap";let iG={collection:"seq",identify:e=>e instanceof Map,nodeClass:iW,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let n=iH(e,t),r=[];for(let{key:e}of n.items)rC(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new iW,n)},createNode:(e,t,n)=>iW.from(e,t,n)};function iF({value:e,source:t},n){return t&&(e?iq:iU).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}let iq={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new rK(!0),stringify:iF},iU={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new rK(!1),stringify:iF},iJ=e=>"bigint"==typeof e||Number.isInteger(e);function iY(e,t,n,{intAsBigInt:r}){let i=e[0];if(("-"===i||"+"===i)&&(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}let t=BigInt(e);return"-"===i?BigInt(-1)*t:t}let o=parseInt(e,n);return"-"===i?-1*o:o}function iK(e,t,n){let{value:r}=e;if(iJ(r)){let e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return iC(e)}class iX extends iy{constructor(e){super(e),this.tag=iX.tag}add(e){let t;t=rA(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new ip(e.key,null):new ip(e,null),im(this.items,t.key)||this.items.push(t)}get(e,t){let n=im(this.items,e);return!t&&rA(n)?rC(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let n=im(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new ip(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw Error("Set items must all have null values")}static from(e,t,n){let{replacer:r}=n,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),i.items.push(ic(e,null,n));return i}}iX.tag="tag:yaml.org,2002:set";let iQ={collection:"map",identify:e=>e instanceof Set,nodeClass:iX,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>iX.from(e,t,n),resolve(e,t){if(rS(e))if(e.hasAllNullValues(!0))return Object.assign(new iX,e);else t("Set items must all have null values");else t("Expected a mapping for this tag");return e}};function iZ(e,t){let n=e[0],r="-"===n||"+"===n?e.substring(1):e,i=e=>t?BigInt(e):Number(e),o=r.replace(/_/g,"").split(":").reduce((e,t)=>e*i(60)+i(t),i(0));return"-"===n?i(-1)*o:o}function i0(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return iC(e);let r="";t<0&&(r="-",t*=n(-1));let i=n(60),o=[t%i];return t<60?o.unshift(0):(t=(t-o[0])/i,o.unshift(t%i),t>=60&&(t=(t-o[0])/i,o.unshift(t))),r+o.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}let i1={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>iZ(e,n),stringify:i0},i2={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>iZ(e,!1),stringify:i0},i9={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(i9.test);if(!t)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,r,i,o,a,s]=t.map(Number),l=Date.UTC(n,r-1,i,o||0,a||0,s||0,t[7]?Number((t[7]+"00").substr(1,3)):0),u=t[8];if(u&&"Z"!==u){let e=iZ(u,!1);30>Math.abs(e)&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/(T00:00:00)?\.000Z$/,"")},i3=[ib,ij,iw,iS,iq,iU,{identify:iJ,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>iY(e,2,2,n),stringify:e=>iK(e,2,"0b")},{identify:iJ,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>iY(e,1,8,n),stringify:e=>iK(e,8,"0")},{identify:iJ,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>iY(e,0,10,n),stringify:iC},{identify:iJ,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>iY(e,2,16,n),stringify:e=>iK(e,16,"0x")},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?-1/0:1/0,stringify:iC},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():iC(e)}},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new rK(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){let r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:iC},iN,is,iG,iB,iQ,i1,i2,i9],i4=new Map([["core",iL],["failsafe",[ib,ij,iw]],["json",iz],["yaml11",i3],["yaml-1.1",i3]]),i5={binary:iN,bool:iA,float:iE,floatExp:iO,floatNaN:iD,floatTime:i2,int:iR,intHex:iI,intOct:iV,intTime:i1,map:ib,merge:is,null:iS,omap:iG,pairs:iB,seq:ij,set:iQ,timestamp:i9},i7={"tag:yaml.org,2002:binary":iN,"tag:yaml.org,2002:merge":is,"tag:yaml.org,2002:omap":iG,"tag:yaml.org,2002:pairs":iB,"tag:yaml.org,2002:set":iQ,"tag:yaml.org,2002:timestamp":i9};function i8(e,t,n){let r=i4.get(t);if(r&&!e)return n&&!r.includes(is)?r.concat(is):r.slice();let i=r;if(!i)if(Array.isArray(e))i=[];else{let e=Array.from(i4.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}if(Array.isArray(e))for(let t of e)i=i.concat(t);else"function"==typeof e&&(i=e(i.slice()));return n&&(i=i.concat(is)),i.reduce((e,t)=>{let n="string"==typeof t?i5[t]:t;if(!n){let e=JSON.stringify(t),n=Object.keys(i5).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown custom tag ${e}; use one of ${n}`)}return e.includes(n)||e.push(n),e},[])}let i6=(e,t)=>e.key<t.key?-1:+(e.key>t.key);class oe{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?i8(e,"compat"):e?i8(null,e):null,this.name="string"==typeof i&&i||"core",this.knownTags=r?i7:{},this.tags=i8(t,this.name,n),this.toStringOptions=a??null,Object.defineProperty(this,rm,{value:ib}),Object.defineProperty(this,rb,{value:iw}),Object.defineProperty(this,rv,{value:ij}),this.sortMapEntries="function"==typeof o?o:!0===o?i6:null}clone(){let e=Object.create(oe.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class ot{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,rx,{value:rg});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=i;let{version:o}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new r$({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){let e=Object.create(ot.prototype,{[rx]:{value:rg}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=rE(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){on(this.contents)&&this.contents.add(e)}addIn(e,t){on(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let n=rW(this);e.anchor=!t||n.has(t)?rG(t||"a",n):t}return new rJ(e.anchor)}createNode(e,t,n){var r,i;let o,a,s,l;if("function"==typeof t)e=t.call({"":e},"",e),o=t;else if(Array.isArray(t)){let e=t.filter(e=>"number"==typeof e||e instanceof String||e instanceof Number).map(String);e.length>0&&(t=t.concat(e)),o=t}else void 0===n&&t&&(n=t,t=void 0);let{aliasDuplicateObjects:u,anchorPrefix:d,flow:c,keepUndefined:p,onTagObj:f,tag:h}=n??{},{onAnchor:g,setAnchors:m,sourceObjects:y}=(r=this,i=d||"a",a=[],s=new Map,l=null,{onAnchor:e=>{a.push(e),l||(l=rW(r));let t=rG(i,l);return l.add(t),t},setAnchors:()=>{for(let e of a){let t=s.get(e);if("object"==typeof t&&t.anchor&&(rC(t.node)||rO(t.node)))t.node.anchor=t.anchor;else{let t=Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}}},sourceObjects:s}),b={aliasDuplicateObjects:u??!0,keepUndefined:p??!1,onAnchor:g,onTagObj:f,replacer:o,schema:this.schema,sourceObjects:y},v=rX(e,h,b);return c&&rO(v)&&(v.flow=!0),m(),v}createPair(e,t,n={}){return new ip(this.createNode(e,null,n),this.createNode(t,null,n))}delete(e){return!!on(this.contents)&&this.contents.delete(e)}deleteIn(e){return rZ(e)?null!=this.contents&&(this.contents=null,!0):!!on(this.contents)&&this.contents.deleteIn(e)}get(e,t){return rO(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return rZ(e)?!t&&rC(this.contents)?this.contents.value:this.contents:rO(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!rO(this.contents)&&this.contents.has(e)}hasIn(e){return rZ(e)?void 0!==this.contents:!!rO(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=rQ(this.schema,[e],t):on(this.contents)&&this.contents.set(e,t)}setIn(e,t){rZ(e)?this.contents=t:null==this.contents?this.contents=rQ(this.schema,Array.from(e),t):on(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new r$({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new r$({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let t=JSON.stringify(e);throw Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(n)this.schema=new oe(Object.assign(n,t));else throw Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},s=rq(this.contents,t??"",a);if("function"==typeof i)for(let{count:e,res:t}of a.anchors.values())i(t,e);return"function"==typeof o?rF(o,{"":s},"",s):s}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||0>=Number(e.indent))){let t=JSON.stringify(e.indent);throw Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){let n=[],r=!0===t.directives;if(!1!==t.directives&&e.directives){let t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");let i=io(e,t),{commentString:o}=i.options;if(e.commentBefore){1!==n.length&&n.unshift("");let t=o(e.commentBefore);n.unshift(r2(t,""))}let a=!1,s=null;if(e.contents){if(rE(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){let t=o(e.contents.commentBefore);n.push(r2(t,""))}i.forceBlockIndent=!!e.comment,s=e.contents.comment}let t=s?void 0:()=>a=!0,l=ia(e.contents,i,()=>s=null,t);s&&(l+=r9(l,"",o(s))),("|"===l[0]||">"===l[0])&&"---"===n[n.length-1]?n[n.length-1]=`--- ${l}`:n.push(l)}else n.push(ia(e.contents,i));if(e.directives?.docEnd)if(e.comment){let t=o(e.comment);t.includes("\n")?(n.push("..."),n.push(r2(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&a&&(t=t.replace(/^\n+/,"")),t&&((!a||s)&&""!==n[n.length-1]&&n.push(""),n.push(r2(o(t),"")))}return n.join("\n")+"\n"}(this,e)}}function on(e){if(rO(e))return!0;throw Error("Expected a YAML collection as document contents")}let or=Symbol("break visit"),oi=Symbol("skip children"),oo=Symbol("remove item");function oa(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),function e(t,n,r){let i=r(n,t);if("symbol"==typeof i)return i;for(let o of["key","value"]){let a=n[o];if(a&&"items"in a){for(let n=0;n<a.items.length;++n){let i=e(Object.freeze(t.concat([[o,n]])),a.items[n],r);if("number"==typeof i)n=i-1;else{if(i===or)return or;i===oo&&(a.items.splice(n,1),n-=1)}}"function"==typeof i&&"key"===o&&(i=i(n,t))}}return"function"==typeof i?i(n,t):i}(Object.freeze([]),e,t)}function os(e,t,n){let r=null;if("function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){let e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){let{keepUndefined:e}=n??t??{};if(!e)return}return rw(e)&&!r?e.toString(n):new ot(e,r,n).toString(n)}function ol(){let{dashboard:e}=rf(),t=(0,h.useRef)(null),[n,r]=g().useState(null),o=!!n,a=(n,i)=>()=>{r(null);let{contentType:o,content:a}=function(e,t,n){switch(t){case"json":return{contentType:"application/json",content:JSON.stringify(e,null,2)};case"yaml":let r;if("cr"===n){let t=e.metadata.name.toLowerCase().replace(/[^a-z0-9-]/g,"-");r=os({apiVersion:"perses.dev/v1alpha1",kind:"PersesDashboard",metadata:{labels:{"app.kubernetes.io/name":"perses-dashboard","app.kubernetes.io/instance":t,"app.kubernetes.io/part-of":"perses-operator"},name:t,namespace:e.metadata.project},spec:e.spec},{schema:"yaml-1.1"})}else r=os(e,{schema:"yaml-1.1"});return{contentType:"application/yaml",content:r}}}(e,n,i);if(!t||!t.current)return;let s=URL.createObjectURL(new Blob([a],{type:o}));t.current.download=`${e.metadata.name}${"cr"===i?"-cr":""}.${n}`,t.current.href=s,t.current.click(),URL.revokeObjectURL(s)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ToolbarIconButton,{id:"download-dashboard-button","aria-controls":o?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:e=>{r(e.currentTarget)},children:(0,i.jsx)(rp.default,{})}),(0,i.jsx)(tM.A,{id:"download-dashboard-formats",anchorEl:n,open:o,hideBackdrop:!0,onClose:()=>r(null),MenuListProps:{"aria-labelledby":"download-dashboard-button"},children:(0,i.jsx)("div",{children:(0,i.jsx)(rd,{onClickAway:()=>r(null),children:(0,i.jsxs)(rc.A,{children:[(0,i.jsx)(tV.A,{onClick:a("json"),children:"JSON"}),(0,i.jsx)(tV.A,{onClick:a("yaml"),children:"YAML"}),(0,i.jsx)(tV.A,{onClick:a("yaml","cr"),children:"YAML (CR)"})]})})})}),(0,i.jsx)("a",{ref:t,style:{display:"none"}})]})}function ou(e){let[t,n]=nK(e.datasources),[r,a]=(0,h.useState)("update"),[s,l]=(0,h.useState)(null),u={default:!1,plugin:{kind:"PrometheusDatasource",spec:{}}},{openDiscardChangesConfirmationDialog:d,closeDiscardChangesConfirmationDialog:c}=eA();return(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(P.ValidationProvider,{children:(0,i.jsx)(P.DatasourceEditorForm,{initialDatasourceDefinition:s,action:r,isDraft:!0,onActionChange:a,onSave:e=>{n(t=>{delete t[s.name],t[e.name]=e.spec,l(null)})},onClose:()=>{l(null)}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eP.A,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsx)(to.A,{variant:"h2",children:"Edit Dashboard Datasources"}),(0,i.jsxs)(th.A,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(o.A,{disabled:e.datasources===t,variant:"contained",onClick:()=>{e.onChange(t)},children:"Apply"}),(0,i.jsx)(o.A,{color:"secondary",variant:"outlined",onClick:()=>{JSON.stringify(e.datasources)!==JSON.stringify(t)?d({onDiscardChanges:()=>{c(),e.onCancel()},onCancel:()=>{c()},description:"You have unapplied changes. Are you sure you want to discard these changes? Changes cannot be recovered."}):e.onCancel()},children:"Cancel"})]})]}),(0,i.jsx)(eP.A,{padding:2,sx:{overflowY:"scroll"},children:(0,i.jsx)(th.A,{spacing:2,children:(0,i.jsxs)(th.A,{spacing:2,children:[(0,i.jsx)(nA.A,{children:(0,i.jsxs)(nC.A,{sx:{minWidth:650},"aria-label":"table of datasources",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:"Name"}),(0,i.jsx)(nJ.A,{children:"Type"}),(0,i.jsx)(nJ.A,{children:"Description"}),(0,i.jsx)(nJ.A,{align:"right",children:"Actions"})]})}),(0,i.jsx)(nE.A,{children:Object.entries(t).map(([e,r])=>(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:e}),(0,i.jsx)(nJ.A,{children:r.plugin.kind}),(0,i.jsx)(nJ.A,{children:r.display?.description??""}),(0,i.jsxs)(nJ.A,{align:"right",sx:{whiteSpace:"nowrap"},children:[(0,i.jsx)(tk.A,{onClick:()=>{a("update"),l({name:e,spec:t[e]??u})},children:(0,i.jsx)(nX.default,{})}),(0,i.jsx)(tk.A,{onClick:()=>{n(t=>{delete t[e]})},children:(0,i.jsx)(nQ.default,{})})]})]},e))})]})}),(0,i.jsx)(eP.A,{display:"flex",children:(0,i.jsx)(o.A,{variant:"contained",startIcon:(0,i.jsx)(nY.default,{}),sx:{marginLeft:"auto"},onClick:()=>{a("create"),l({name:"NewDatasource",spec:u})},children:"Add Datasource"})})]})})})]})})}function od(){let[e,t]=(0,h.useState)(!1),{getLocalDatasources:n,setLocalDatasources:r,getSavedDatasources:a,setSavedDatasources:l}=(0,P.useDatasourceStore)(),u=n(),c=a(),{dashboard:f,setDashboard:g}=rf(),m=()=>{t(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:d,children:(0,i.jsx)(o.A,{startIcon:(0,i.jsx)(tj.default,{}),onClick:()=>{t(!0)},"aria-label":d,variant:"text",color:"primary",sx:p,children:"Datasources"})}),(0,i.jsx)(s.Drawer,{isOpen:e,onClose:m,PaperProps:{sx:{width:"50%"}},"data-testid":"datasource-editor",children:(0,i.jsx)(ou,{datasources:u,onCancel:m,onChange:e=>{let n=Object.keys(e).filter(t=>{let n="directUrl"in(e[t]?.plugin?.spec??{}),r=!n&&!("directUrl"in(c[t]?.plugin?.spec??{}))&&e[t]?.plugin?.spec?.proxy===c[t]?.plugin?.spec?.proxy;return n||r}).reduce((t,n)=>(t[n]=e[n],t),{});g((f.kind,{...f,spec:{...f.spec,datasources:e}})),l(n),r(e),t(!1)}})})]})}oa.BREAK=or,oa.SKIP=oi,oa.REMOVE=oo,oa.itemAtPath=(e,t)=>{let n=e;for(let[e,r]of t){let t=n?.[e];if(!t||!("items"in t))return;n=t.items[r]}return n},oa.parentCollection=(e,t)=>{let n=oa.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw Error("Parent collection not found")};var oc=n(65707);let op=e=>{let{isReadonly:t}=e,{openEditJsonDialog:n}=eD(),r=t?"View JSON":"Edit JSON";return(0,i.jsx)(s.InfoTooltip,{description:r,children:(0,i.jsx)(s.ToolbarIconButton,{"aria-label":r,variant:"outlined",onClick:()=>n(),children:(0,i.jsx)(oc.default,{})})})},of=({onSave:e,isDisabled:t,variant:n="contained"})=>{let[r,a]=(0,h.useState)(!1),{dashboard:s,setDashboard:l}=rf(),{getSavedVariablesStatus:u,setVariableDefaultValues:d}=nm(),{isSavedVariableModified:c}=u(),{timeRange:p,refreshInterval:f}=(0,P.useTimeRange)(),{setEditMode:g}=q(),{openSaveChangesConfirmationDialog:m,closeSaveChangesConfirmationDialog:y}=ew(),b=async()=>{if(e)try{a(!0),await e(s),y(),g(!1)}catch(e){throw Error(`An error occurred while saving the dashboard. ${e}`)}finally{a(!1)}else g(!1)};return(0,i.jsx)(o.A,{variant:n,onClick:()=>{let e=(0,no.bB)(p)&&s.spec.duration!==p.pastDuration,t=s.spec.refreshInterval!==f;e||c||t?m({onSaveChanges:(e,n,r)=>{if((0,no.bB)(p)&&e&&(s.spec.duration=p.pastDuration),r){let e=d();s.spec.variables=e}n&&t&&(s.spec.refreshInterval=f),l(s),b()},onCancel:()=>{y()},isSavedDurationModified:e,isSavedVariableModified:c,isSavedRefreshIntervalModified:t}):b()},disabled:t||r,children:"Save"})};function oh(e,t){let{disableHysteresis:n=!1,threshold:r=100,target:i}=t,o=e.current;return i&&(e.current=void 0!==i.pageYOffset?i.pageYOffset:i.scrollTop),(!!n||void 0===o||!(e.current<o))&&e.current>r}let og="undefined"!=typeof window?window:null;function om(e){return(0,eW.Ay)("MuiAppBar",e)}(0,eB.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);let oy=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,ob=(0,e_.A)(nP.A,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`position${(0,tL.A)(n.position)}`],t[`color${(0,tL.A)(n.color)}`]]}})((0,eT.A)(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter((0,t_.A)(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?oy(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?oy(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),ov=h.forwardRef(function(e,t){let n=(0,ez.b)({props:e,name:"MuiAppBar"}),{className:r,color:o="primary",enableColorOnDark:a=!1,position:s="fixed",...l}=n,u={...n,color:o,position:s,enableColorOnDark:a},d=(e=>{let{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,tL.A)(t)}`,`position${(0,tL.A)(n)}`]};return(0,eL.A)(i,om,r)})(u);return(0,i.jsx)(ob,{square:!0,component:"header",ownerState:u,elevation:4,className:(0,eV.A)(d.root,r,"fixed"===s&&"mui-fixed"),ref:t,...l})});var ox=n(29917),oj=n(80154),ow=n(48865),oS=n(81227),oA=n(5611),oC=n(93648),oD=n(42927),oO=n(47601);let oE=g().createContext(void 0);function ok(){let e=(0,h.useContext)(oE);if(!e)throw Error("ListVariableListBoxContext not found");return e}function oP({value:e,children:t}){return(0,i.jsx)(oE.Provider,{value:e,children:t})}let oM=(0,h.forwardRef)(function(e,t){let{children:n,...r}=e,{options:o,selectedOptions:a,filteredOptions:s,allowAllValue:l,onChange:u}=ok(),d=(0,h.useMemo)(()=>a.length,[a]),c=(0,h.useMemo)(()=>o.length>0&&d>0&&d!==o.length,[d,o]),p=(0,h.useMemo)(()=>o.length>0&&d===o.length,[d,o]);return(0,i.jsxs)("ul",{...r,ref:t,role:"listbox",children:[(0,i.jsxs)("li",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(oD.A,{indeterminate:c,checked:p,onChange:()=>{var e,t,n,r,i,d,f;return e=o,t=a,n=s,r=c,i=p,d=l,f=u,void(i?f(n.length!==e.length?t.filter(e=>!n.includes(e)):[]):r?f(d?n.length===e.length?t[0]?.value==="$__all"?e.filter(e=>"$__all"!==e.value):[{label:"$__all",value:"$__all"}]:n.every(e=>t.includes(e))?t.filter(e=>!n.includes(e)):[...t,...n.filter(e=>"$__all"!==e.value)]:n.length===e.length?e:n.every(e=>t.includes(e))?t.filter(e=>!n.includes(e)):[...t,...n]):f(n))}}),(0,i.jsxs)("span",{children:[(0,i.jsx)("strong",{children:d})," Selected"]})]}),(0,i.jsx)(tZ.A,{}),n]})});function oV(e){return null===e?null:Array.isArray(e)?e.map(e=>e.value):e.value}function oR({name:e,source:t}){let n=ng(e,t),r=n.definition?.kind;switch(r){case"TextVariable":return(0,i.jsx)(oz,{name:e,source:t});case"ListVariable":return(0,i.jsx)(oT,{name:e,source:t})}return(0,i.jsxs)("div",{children:["Unsupported Variable Kind: $",r]})}function oI(e,t,n){let r=e?.allowMultiple===!0,i=e?.allowAllValue===!0,o=e?.sort,a=(0,h.useMemo)(()=>n.isFetching??!1,[n.isFetching]),s=(0,h.useMemo)(()=>n.data??[],[n.data]),l=t?.value;r&&!Array.isArray(l)&&(l="string"==typeof l?[l]:[]);let u=(0,h.useMemo)(()=>{let e=s?[...s]:[];if(!o||"none"===o)return e;let t=P.SORT_METHODS[o];return t?t.sort(e):e},[s,o]),d=(0,h.useMemo)(()=>{let e=u;return i&&(e=[{value:"$__all",label:"All"},...e]),e},[i,u]),c=(0,h.useMemo)(()=>!!d.find(e=>r?l.includes(e.value):l===e.value),[d,l,r]);l=(0,h.useMemo)(()=>{let e=d?.[+!!i]?.value;return!e||c&&l&&0!==l.length?l:r?[e]:e},[d,l,c,r,i]);let p=(0,h.useMemo)(()=>Array.isArray(l)?d.filter(e=>l?.includes(e.value)):d.find(e=>l===e.value)??{value:"",label:""},[l,d]);return{value:l,loading:a,options:s,selectedOptions:p,viewOptions:d}}let oL=e=>(0,i.jsx)(ow.A,{...e,sx:{minWidth:"fit-content"},placement:"bottom-start"}),o_=(e,t)=>{let n=(e.length+1)*8+40*("list"===t);return n<120?120:n>500?500:n};function oT({name:e,source:t}){let n=ng(e,t),r=n.definition,o=(0,P.useListVariablePluginValues)(r),{setVariableValue:a,setVariableLoading:s,setVariableOptions:l}=nm(),{selectedOptions:u,value:d,loading:c,options:p,viewOptions:f}=oI(r?.spec,n.state,o),[g,m]=(0,h.useState)(120),[y,b]=(0,h.useState)(""),v=r?.spec.display?.name??e,x=r?.spec.allowMultiple===!0,j=r?.spec.allowAllValue===!0,w=(0,oS.Z)({}),S=(0,h.useMemo)(()=>w(f,{inputValue:y,getOptionLabel:e=>e.label}),[y,f,w]);(0,h.useEffect)(()=>{d&&a(e,d,t)},[a,e,d,t]),(0,h.useEffect)(()=>{s(e,c,t)},[s,e,c,t]),(0,h.useEffect)(()=>{p&&l(e,p,t)},[l,e,p,t]);let A=(0,h.useCallback)(n=>{a(e,oV(n),t)},[e,a,t]),C=(0,h.useMemo)(()=>({options:f,selectedOptions:u,filteredOptions:S,allowAllValue:j,onChange:A}),[j,S,A,u,f]),D=(0,h.useMemo)(()=>(0,i.jsx)(oA.A,{disablePortal:!0,loading:c,disableCloseOnSelect:x,multiple:x,fullWidth:!0,limitTags:3,size:"small",disableClearable:!0,slotProps:{listbox:{component:x?oM:void 0}},slots:{popper:oL},sx:{"& .MuiInputBase-root":{minHeight:"38px"},"& .MuiAutocomplete-tag":{margin:"1px 2px"}},filterOptions:w,options:f,value:u,onChange:(n,r)=>{(null===r||Array.isArray(r)&&0===r.length)&&j?a(e,"$__all",t):a(e,oV(r),t)},inputValue:x?y:void 0,onInputChange:(e,t)=>{x||m(o_(t,"list"))},onBlur:()=>{x&&b("")},renderInput:e=>x?(0,i.jsx)(oC.A,{...e,label:v,onChange:e=>b(e.target.value)}):(0,i.jsx)(oC.A,{...e,label:v,style:{width:`${g}px`}}),renderOption:(e,t,{selected:n})=>{let{key:r,...o}=e;return(0,i.jsxs)("li",{...o,style:{padding:0},children:[(0,i.jsx)(oD.A,{style:{marginRight:8},checked:n}),t.label]},r)},renderTags:(e,t,n)=>{if(n.focused)return(0,i.jsx)(eP.A,{sx:{maxHeight:200,overflowY:"auto"},children:e.map((e,n)=>(0,h.createElement)(oO.A,{...t({index:n}),key:n,label:e.label,size:"small"}))});let r=n.limitTags,o=e.length;return(0,i.jsxs)(i.Fragment,{children:[e.slice(0,r).map((e,n)=>(0,h.createElement)(oO.A,{...t({index:n}),key:n,label:e.label,size:"small"})),r&&o>r&&` +${o-r}`]})}}),[j,x,w,y,g,c,e,u,a,t,v,f]);return x?(0,i.jsx)(oP,{value:C,children:D}):D}function oz({name:e,source:t}){let n=ng(e,t),r=n.state,o=n.definition,[a,s]=(0,h.useState)(r?.value??""),[l,u]=(0,h.useState)(o_(a,"text")),{setVariableValue:d}=nm();return(0,h.useEffect)(()=>{s(r?.value??"")},[r?.value]),(0,i.jsx)(oC.A,{title:a,value:a,onChange:e=>{s(e.target.value),u(o_(e.target.value,"text"))},onBlur:()=>d(e,a,t),placeholder:e,label:o?.spec.display?.name??e,slotProps:{input:{readOnly:o?.spec.constant??!1}},sx:{width:`${l}px`,"& .MuiInputBase-root":{minHeight:"38px"},"& .MuiInputBase-input":{textOverflow:"ellipsis"}}})}function oN(){let e=ny(),t=nb();return(0,i.jsxs)(i.Fragment,{children:[t.slice().reverse().map(e=>e.definitions.map(t=>(0,i.jsx)(oH,{spec:t.spec,source:e.source},t.spec.name+e.source))),e.map(e=>(0,i.jsx)(oH,{spec:e.spec},e.spec.name))]})}function oH({spec:e,source:t}){let n=ng(e.name,t);return n.state?.overridden?null:(0,i.jsx)(eP.A,{display:e.display?.hidden?"none":void 0,minWidth:"120px",maxWidth:"500px",flexShrink:0,"data-testid":"variable-"+e.name,children:(0,i.jsx)(oR,{name:e.name,source:t},e.name+(t??""))},e.name+(t??""))}function o$(e){let[t,n]=(0,h.useState)(e.initialVariableIsSticky),r=function(e={}){let{getTrigger:t=oh,target:n=og,...r}=e,i=h.useRef(),[o,a]=h.useState(()=>t(i,r));return h.useEffect(()=>{if(null===n)return a(!1);let e=()=>{a(t(i,{target:n,...r}))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}},[n,t,JSON.stringify(r)]),o}({disableHysteresis:!0})&&e.initialVariableIsSticky&&t,o=(0,ri.A)((0,eM.A)().breakpoints.up("md"));return(0,i.jsx)(eP.A,{marginBottom:-1,"data-testid":"variable-list",children:(0,i.jsx)(ov,{color:"inherit",position:r?"fixed":"static",elevation:4*!!r,sx:{backgroundColor:"inherit",...e.sx},children:(0,i.jsxs)(eP.A,{display:"flex",justifyContent:"space-between",sx:{flexDirection:o?"row":"column"},children:[(0,i.jsxs)(eP.A,{display:"flex",flexWrap:!r&&o?"wrap":"nowrap",maxWidth:r||!o?"100vw":"100%",pt:1,pl:+!!r,mt:r&&o?.5:0,ml:r&&o?.5:0,sx:{overflowX:!r&&o?"hidden":"auto",scrollbarWidth:"thin","&::-webkit-scrollbar":{height:"8px",backgroundColor:e=>e.palette.grey["300"]},"&::-webkit-scrollbar-thumb":{background:e=>e.palette.grey["600"]}},gap:1,children:[(0,i.jsx)(oN,{}),e.initialVariableIsSticky&&(0,i.jsx)(tk.A,{style:{width:"fit-content",height:"fit-content"},onClick:()=>n(!t),children:t?(0,i.jsx)(ox.default,{}):(0,i.jsx)(oj.default,{})})]}),r&&(0,i.jsx)(th.A,{m:o?1.5:1,mt:1.5*!!o,ml:o?1.5:"auto",direction:"row",justifyContent:"end",children:(0,i.jsx)(P.TimeRangeControls,{})})]})})})}let oB=e=>{let{dashboardName:t,dashboardTitleComponent:n,initialVariableIsSticky:r,isReadonly:a,isVariableEnabled:l,isDatasourceEnabled:u,onEditButtonClick:d,onCancelButtonClick:c,onSave:p}=e,{isEditMode:f}=q(),h=(0,ri.A)((0,eM.A)().breakpoints.up("sm")),g=(0,ri.A)((0,eM.A)().breakpoints.up("md")),m=n||(0,i.jsx)(to.A,{variant:"h2",children:t});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(th.A,{"data-testid":"dashboard-toolbar",children:[(0,i.jsxs)(eP.A,{px:2,py:1.5,display:"flex",sx:{backgroundColor:e=>e.palette.primary.main+(f?"30":"0")},children:[m,f?(0,i.jsxs)(th.A,{direction:"row",gap:1,ml:"auto",children:[a&&(0,i.jsx)(nS.A,{severity:"warning",sx:{backgroundColor:"transparent",padding:0},children:"Dashboard managed via code only. Download JSON and commit changes to save."}),(0,i.jsxs)(th.A,{direction:"row",spacing:.5,ml:1,whiteSpace:"nowrap",children:[l&&(0,i.jsx)(n7,{}),u&&(0,i.jsx)(od,{}),(0,i.jsx)(ek,{}),(0,i.jsx)(eO,{})]}),(0,i.jsx)(of,{onSave:p,isDisabled:a}),(0,i.jsx)(o.A,{variant:"outlined",onClick:c,children:"Cancel"})]}):(0,i.jsx)(i.Fragment,{children:h&&(0,i.jsx)(th.A,{direction:"row",gap:1,ml:"auto",children:(0,i.jsx)(n8,{onClick:d})})})]}),(0,i.jsxs)(eP.A,{sx:{display:"flex",width:"100%",alignItems:"start",padding:e=>e.spacing(1,2,0,2),flexDirection:g?"row":"column",flexWrap:"nowrap",gap:1},children:[(0,i.jsx)(eP.A,{width:"100%",children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(o$,{initialVariableIsSticky:r,sx:{backgroundColor:({palette:e})=>e.background.default}})})}),(0,i.jsx)(th.A,{direction:"row",ml:"auto",flexWrap:"wrap",justifyContent:"end",children:(0,i.jsxs)(th.A,{direction:"row",spacing:1,mt:1,ml:1,children:[(0,i.jsx)(P.TimeRangeControls,{}),(0,i.jsx)(ol,{}),(0,i.jsx)(op,{isReadonly:!f})]})})]})]})})},oW=()=>{let{deletePanelDialog:e,closeDeletePanelDialog:t}=eh();return(0,i.jsxs)(s.Dialog,{open:void 0!==e,children:[(0,i.jsx)(s.Dialog.Header,{onClose:()=>t(),children:"Delete Panel"}),e&&(0,i.jsx)(oG,{deletePanelDialog:e})]})},oG=({deletePanelDialog:e})=>{let{deletePanel:t,closeDeletePanelDialog:n}=eh(),{setViewPanel:r}=eb();return(0,i.jsxs)("form",{onSubmit:i=>{i.preventDefault();let{panelGroupItemId:o}=e;t(o),n(),r(void 0)},children:[(0,i.jsxs)(s.Dialog.Content,{children:["Are you sure you want to delete ",e.panelName," from ",e.panelGroupName,"? This action cannot be undone."]}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(s.Dialog.PrimaryButton,{children:"Delete"}),(0,i.jsx)(s.Dialog.SecondaryButton,{onClick:()=>n(),children:"Cancel"})]})]})},oF=()=>{let{deletePanelGroupDialog:e,closeDeletePanelGroupDialog:t,deletePanelGroup:n}=es(),{setViewPanel:r}=eb(),a=e?.panelGroupId;return(0,i.jsxs)(s.Dialog,{open:void 0!==e,children:[(0,i.jsx)(s.Dialog.Header,{children:"Delete Panel Group"}),(0,i.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),void 0===a)throw Error("group index is undefined");n(a),t(),r(void 0)},children:[(0,i.jsxs)(s.Dialog.Content,{dividers:!0,sx:{width:"500px"},children:["Are you sure you want to delete ",e?.panelGroupName??"panel group","? This will delete all the panels within the group."]}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(o.A,{variant:"contained",type:"submit",children:"Delete"}),(0,i.jsx)(o.A,{variant:"outlined",color:"secondary",onClick:()=>t(),children:"Cancel"})]})]})]})},oq=()=>{let{discardChangesConfirmationDialog:e}=eA();return void 0===e?null:(0,i.jsx)(s.DiscardChangesConfirmationDialog,{description:e.description||"You have unsaved changes in this dashboard. Are you sure you want to discard these changes? Changes cannot be recovered.",isOpen:!0,onCancel:e.onCancel,onDiscardChanges:e.onDiscardChanges})};var oU=n(67987);let oJ=e=>{let{isReadonly:t,disableMetadataEdition:n}=e,{editJsonDialog:r,closeEditJsonDialog:o}=eD();return(0,i.jsxs)(s.Dialog,{open:!!r?.isOpen,scroll:"paper",fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(s.Dialog.Header,{onClose:()=>o(),children:[!t&&"Edit "," Dashboard JSON"]}),r?.isOpen&&(0,i.jsx)(oY,{isReadonly:t,disableMetadataEdition:n})]})},oY=e=>{let{isReadonly:t,disableMetadataEdition:n}=e,{closeEditJsonDialog:r}=eD(),{setTimeRange:o,setRefreshInterval:a}=(0,P.useTimeRange)(),{dashboard:l,setDashboard:u}=rf(),{setLocalDatasources:d}=(0,P.useDatasourceStore)(),[c,p]=(0,h.useState)(l),f=e=>{e.preventDefault(),u(c),o({pastDuration:c.spec.duration}),a(c.spec.refreshInterval??"0s"),d(c.spec.datasources??{}),r()};return(0,i.jsxs)(s.Dialog.Form,{onSubmit:f,children:[(0,i.jsxs)(s.Dialog.Content,{sx:{width:"100%"},children:[n&&!t&&(0,i.jsx)(nS.A,{sx:{marginBottom:e=>e.spacing(1)},severity:"warning",children:"Metadata cannot be modified or saved."}),"EphemeralDashboard"===c.kind&&(0,i.jsx)(nS.A,{sx:{marginBottom:1},severity:"warning",children:"Time-to-live cannot be modified or saved from here. Go to the project view to modify it."}),(0,i.jsx)(oU.A,{fullWidth:!0,children:(0,i.jsx)(s.JSONEditor,{minHeight:"300px",maxHeight:"70vh",value:c,onChange:e=>(e=>{try{let t=JSON.parse(e??"{}");p(t)}catch(e){}})(e),readOnly:t})})]}),!t&&(0,i.jsx)(s.Dialog.Actions,{children:(0,i.jsx)(s.Dialog.PrimaryButton,{onClick:f,children:"Apply"})})]})};var oK=n(585);let oX=e=>(e.preventDefault(),e.returnValue="","");function oQ({isBlocked:e,message:t}){let n=(0,oK.useBlocker)(e),r="blocked"===n.state,o="proceeding"===n.state;return(0,h.useEffect)(()=>(e?window.addEventListener("beforeunload",oX):window.removeEventListener("beforeunload",oX),()=>{window.removeEventListener("beforeunload",oX)}),[n,e,r]),(0,i.jsx)(s.DiscardChangesConfirmationDialog,{description:t,isOpen:r||o,onDiscardChanges:()=>n.proceed?.(),onCancel:()=>n.reset?.()})}function oZ({original:e,current:t}){return(0,i.jsx)(oQ,{isBlocked:n=>JSON.stringify(e)!==JSON.stringify(t)&&n.currentLocation.pathname!==n.nextLocation.pathname,message:"You have unsaved changes, are you sure you want to leave?"})}var o0=n(66395),o1=n(11613),o2=n(42338);let o9=(0,h.createContext)(void 0),o3=({children:e})=>{let[t,n]=(0,h.useState)(void 0),r=(0,h.useMemo)(()=>({preview:{previewPanelWidth:t,setPreviewPanelWidth:n}}),[t]);return(0,i.jsx)(o9.Provider,{value:r,children:e})};function o4({plugin:e,control:t,panelDefinition:n,onQueriesChange:r,onPluginSpecChange:o,onJSONChange:a}){let{data:l}=(0,P.usePlugin)("Panel",e.kind),u=(0,h.useContext)(eY.PanelEditorContext),d=(0,P.useSuggestedStepMs)(u?.preview.previewPanelWidth),c=(0,h.useMemo)(()=>"function"==typeof l?.queryOptions?l?.queryOptions(n.spec.plugin.spec):l?.queryOptions,[n.spec.plugin.spec,l]),[p,f]=(0,h.useState)(()=>n.spec.queries?.map(e=>({kind:e.spec.plugin.kind,spec:e.spec.plugin.spec}))??[]),g=(0,h.useCallback)((e,t)=>{f(n=>{let r=[...n];return r[e]={kind:t.spec.plugin.kind,spec:t.spec.plugin.spec},r})},[]);return(0,i.jsxs)(P.DataQueriesProvider,{definitions:p,options:{suggestedStepMs:d,...c},children:[(0,i.jsxs)(o0.Ay,{item:!0,xs:12,children:[(0,i.jsx)(to.A,{variant:"h4",marginBottom:1,children:"Preview"}),(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(eY.PanelPreview,{panelDefinition:n})})]}),(0,i.jsx)(o0.Ay,{item:!0,xs:12,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(P.PanelSpecEditor,{control:t,panelDefinition:n,onJSONChange:a,onQueriesChange:r,onQueryRun:g,onPluginSpecChange:o})})})]})}function o5(e){let{initialValues:t,initialAction:n,onSave:r,onClose:a}=e,l=Q(),{panelDefinition:u,setName:d,setDescription:c,setLinks:p,setQueries:f,setPlugin:g,setPanelDefinition:m}=(e=>{let{display:t,plugin:n,queries:r,links:i}=e.spec,[o,a]=(0,h.useState)(t.name),[s,l]=(0,h.useState)(t.description),[u,d]=(0,h.useState)(i),[c,p]=(0,h.useState)(n),[f,g]=(0,h.useState)(r),[m,y]=(0,h.useState)(r),b=(0,h.useCallback)((e,t)=>{t?(g(m),y(void 0)):y(void 0===e?f:e)},[y,m,g,f]),v=(0,h.useCallback)(e=>{let{display:t,plugin:n,queries:r,links:i}=e.spec;a(t.name),l(t.description),d(i),p(n),b(r)},[a,l,d,p,b]);return(0,h.useMemo)(()=>({panelDefinition:{kind:"Panel",spec:{display:{name:o,description:s},plugin:c,queries:m,links:u}},setName:a,setDescription:l,setLinks:d,setQueries:b,setPlugin:p,setPanelDefinition:v}),[o,s,u,c,m,b,v])})(t.panelDefinition),{plugin:y}=u.spec,[b,v]=(0,h.useState)(!1),{panelEditorSchema:x}=(0,P.useValidationSchemas)(),j=(0,o1.useForm)({resolver:(0,o2.u)(x),mode:"onBlur",defaultValues:t}),w=(0,P.usePluginEditor)({pluginTypes:["Panel"],value:{selection:{kind:y.kind,type:"Panel"},spec:y.spec},onChange:e=>{j.setValue("panelDefinition.spec.plugin",{kind:e.selection.kind,spec:e.spec}),g({kind:e.selection.kind,spec:e.spec})},onHideQueryEditorChange:e=>{f(void 0,e)}}),S=(0,P.getTitleAction)(n,!0),A=(0,P.getSubmitText)(n,!0),C=(0,o1.useWatch)({control:j.control,name:"panelDefinition.spec.links"});(0,h.useEffect)(()=>{p(C)},[p,C]);let D=(0,h.useCallback)(e=>{r(e)},[r]),O=(0,o1.useWatch)({control:j.control,name:"panelDefinition.spec.display.name"}),E=(0,o1.useWatch)({control:j.control,name:"panelDefinition.spec.display.description"}),k=(0,o1.useWatch)({control:j.control,name:"panelDefinition.spec.plugin.kind"}),M=(0,h.useCallback)(()=>{j.handleSubmit(D)()},[j,D]);return(0,i.jsx)(o1.FormProvider,{...j,children:(0,i.jsxs)(o3,{children:[(0,i.jsxs)(eP.A,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsxs)(to.A,{variant:"h2",children:[S," Panel"]}),(0,i.jsxs)(th.A,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(o.A,{variant:"contained",disabled:!j.formState.isValid,onClick:M,children:A}),(0,i.jsx)(o.A,{color:"secondary",variant:"outlined",onClick:function(){JSON.stringify(t)!==JSON.stringify(j.getValues())?v(!0):a()},children:"Cancel"})]})]}),(0,i.jsx)(eP.A,{id:o7,sx:{flex:1,overflowY:"scroll",padding:e=>e.spacing(2)},children:(0,i.jsxs)(o0.Ay,{container:!0,spacing:2,children:[(0,i.jsx)(o0.Ay,{item:!0,xs:8,children:(0,i.jsx)(o1.Controller,{control:j.control,name:"panelDefinition.spec.display.name",render:({field:e,fieldState:t})=>(0,i.jsx)(oC.A,{...e,required:!0,fullWidth:!0,label:"Name",error:!!t.error,helperText:t.error?.message,value:O??"",onChange:t=>{e.onChange(t),d(t.target.value)}})})}),(0,i.jsx)(o0.Ay,{item:!0,xs:4,children:(0,i.jsx)(o1.Controller,{control:j.control,name:"groupId",render:({field:e,fieldState:t})=>(0,i.jsx)(oC.A,{select:!0,...e,required:!0,fullWidth:!0,label:"Group",error:!!t.error,helperText:t.error?.message,onChange:t=>{e.onChange(t)},children:l.map((e,t)=>(0,i.jsx)(tV.A,{value:e.id,children:e.title??`Group ${t+1}`},e.id))})})}),(0,i.jsx)(o0.Ay,{item:!0,xs:8,children:(0,i.jsx)(o1.Controller,{control:j.control,name:"panelDefinition.spec.display.description",render:({field:e,fieldState:t})=>(0,i.jsx)(oC.A,{...e,fullWidth:!0,label:"Description",error:!!t.error,helperText:t.error?.message,value:E??"",onChange:t=>{e.onChange(t),c(t.target.value)}})})}),(0,i.jsx)(o0.Ay,{item:!0,xs:4,children:(0,i.jsx)(o1.Controller,{control:j.control,name:"panelDefinition.spec.plugin.kind",render:({field:e,fieldState:t})=>(0,i.jsx)(P.PluginKindSelect,{...e,pluginTypes:["Panel"],required:!0,fullWidth:!0,label:"Type",disabled:w.isLoading,error:!!w.error||!!t.error,helperText:w.error?.message??t.error?.message,value:{type:"Panel",kind:k},onChange:t=>{e.onChange(t.kind),w.onSelectionChange(t)}})})}),(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(o4,{control:j.control,plugin:y,panelDefinition:u,onQueriesChange:e=>f(e),onPluginSpecChange:e=>{w.onSpecChange(e)},onJSONChange:e=>{let t=JSON.parse(e),{kind:n,spec:r}=t.spec.plugin;u.spec.plugin.kind!==n&&JSON.stringify(u.spec.plugin.spec)!==JSON.stringify(r)&&w.rememberCurrentSpecState(),m(t)}})})]})}),(0,i.jsx)(s.DiscardChangesConfirmationDialog,{description:"You have unapplied changes in this panel. Are you sure you want to discard these changes? Changes cannot be recovered.",isOpen:b,onCancel:()=>{v(!1)},onDiscardChanges:()=>{v(!1),a()}})]})})}let o7="panel-editor-form",o8=()=>{let e=ep(),[t,n]=(0,h.useState)(!1),r=void 0!==e&&!t,o=(0,h.useCallback)(t=>{if(void 0===e||void 0===t)throw Error("Cannot apply changes");e.applyChanges(t),n(!0)},[e]),a=()=>{n(!0)},l=(0,h.useCallback)(()=>{e?.close(),n(!1)},[e]),u=()=>{},d=(0,h.useMemo)(()=>(0,i.jsx)(s.Drawer,{isOpen:r,onClose:u,SlideProps:{onExited:l},"data-testid":"panel-editor",children:e&&(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(o5,{initialAction:e.mode,initialValues:e.initialValues,onSave:o,onClose:a})})}),[l,o,r,e]);return e?.panelGroupItemId?.repeatVariable?(0,i.jsx)(o6,{repeatVariable:e.panelGroupItemId.repeatVariable,children:d}):d};function o6({repeatVariable:e,children:t}){let n=(0,P.useVariableValues)();return(0,i.jsx)(P.VariableContext.Provider,{value:{state:{...n,[e[0]]:{value:e[1],loading:!1}}},children:t})}function ae({panelDefinition:e}){let t=(0,h.useRef)(null),n=840,r=(0,h.useContext)(o9);return(null!==t.current&&(n=t.current.getBoundingClientRect().width,r?.preview?.setPreviewPanelWidth?.(n)),""===e.spec.plugin.kind)?null:(0,i.jsx)(eP.A,{ref:t,height:300,children:(0,i.jsx)(tQ,{definition:e})})}function at(e){let{initialValues:t,variables:n,onSubmit:r}=e,[o,a]=(0,h.useState)(t.title),[s,l]=(0,h.useState)(t.isCollapsed),[u,d]=(0,h.useState)(t.repeatVariable);return(0,i.jsxs)("form",{id:an,onSubmit:e=>{e.preventDefault(),r({title:o,isCollapsed:s,repeatVariable:u})},children:[(0,i.jsx)(oU.A,{fullWidth:!0,margin:"normal",children:(0,i.jsx)(oC.A,{required:!0,label:"Name",variant:"outlined",value:o,onChange:e=>a(e.target.value),"data-testid":"panel-group-editor-name"})}),(0,i.jsxs)(oU.A,{fullWidth:!0,margin:"normal",children:[(0,i.jsxs)(oC.A,{select:!0,required:!0,label:"Collapse State",size:"small",value:s?"Closed":"Open",onChange:e=>l("Closed"===e.target.value),children:[(0,i.jsx)(tV.A,{value:"Open",children:"Open"}),(0,i.jsx)(tV.A,{value:"Closed",children:"Closed"})]}),(0,i.jsx)(oU.A,{fullWidth:!0,margin:"normal",children:(0,i.jsxs)(oC.A,{select:!0,label:"Repeat Variable",variant:"outlined",value:u??"",onChange:e=>d(""===e.target.value?void 0:e.target.value),children:[(0,i.jsx)(tV.A,{value:"",children:(0,i.jsx)(to.A,{sx:{fontStyle:"italic"},children:"None"})}),n?.sort((e,t)=>e.localeCompare(t)).map(e=>(0,i.jsx)(tV.A,{value:e,children:e},e))]})})]})]})}let an="panel-group-editor-form";function ar(){let e=eo(),t=(0,P.useVariableValues)(),[n,r]=(0,h.useState)(!1),a=void 0!==e&&!1===n;return(0,i.jsx)(s.Dialog,{open:a,TransitionProps:{onExited:()=>{e?.close(),r(!1)}},children:void 0!==e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Dialog.Header,{children:[e.mode," Panel Group"]}),(0,i.jsx)(s.Dialog.Content,{dividers:!0,sx:{width:"500px"},children:(0,i.jsx)(at,{initialValues:e.initialValues,variables:Object.keys(t),onSubmit:t=>{if(void 0===e)throw Error("Cannot apply changes");e.applyChanges(t),r(!0)}})}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(o.A,{variant:"contained",type:"submit",form:an,children:"Edit"===e.mode?"Apply":"Add"}),(0,i.jsx)(o.A,{variant:"outlined",color:"secondary",onClick:e.close,children:"Cancel"})]})]})})}var ai=n(91807);function ao(e){let{showTotalQueries:t=!0}=e,n=(0,P.useDatasourceClient)({kind:"PrometheusDatasource"}),{absoluteTimeRange:r}=(0,P.useTimeRange)(),a=(0,ai.useQueryClient)().getQueryCache().findAll(),s=a.filter(e=>"loading"===e.state.status),l=a.filter(e=>"success"===e.state.status),u=(0,P.useActiveTimeSeriesQueries)();if(!0===n.isLoading)return null;let d=[];return u.forEach(e=>{let t=e.state.data;if(t&&t.metadata?.notices){let n=e.queryKey,r=t.metadata.notices[0]?.message;r&&d.push({query:String(n[0].spec.plugin.spec.query),summary:r})}}),(0,i.jsxs)(th.A,{spacing:1,mb:2,sx:{maxWidth:1e3},children:[(0,i.jsxs)(eP.A,{sx:{p:1},children:[(0,i.jsx)(to.A,{variant:"h2",mb:1,children:"Query Summary"}),(0,i.jsx)(nA.A,{component:nP.A,children:(0,i.jsxs)(nC.A,{size:"small","aria-label":"query summary table",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:"Queries Loading"}),(0,i.jsx)(nJ.A,{children:"Recent Time Series Queries"}),t&&(0,i.jsx)(nJ.A,{children:"Total Queries"}),(0,i.jsx)(nJ.A,{children:"Start Time"}),(0,i.jsx)(nJ.A,{children:"End Time"})]})}),(0,i.jsx)(nE.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:s.length}),(0,i.jsx)(nJ.A,{children:u.length}),t&&(0,i.jsx)(nJ.A,{children:l.length}),(0,i.jsx)(nJ.A,{children:r.start.toString()}),(0,i.jsx)(nJ.A,{children:r.end.toString()})]})})]})})]}),d.length>0&&(0,i.jsxs)(eP.A,{sx:{p:1,m:0},children:[(0,i.jsx)(to.A,{variant:"h3",mb:1,children:"Warnings"}),(0,i.jsx)(nA.A,{component:nP.A,sx:{mb:2},children:(0,i.jsxs)(nC.A,{size:"small","aria-label":"query warnings table",children:[(0,i.jsx)(nD.A,{children:(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:"Query"}),(0,i.jsx)(nJ.A,{children:"Summary"})]})}),(0,i.jsx)(nE.A,{children:d.map((e,t)=>(0,i.jsxs)(nO.A,{children:[(0,i.jsx)(nJ.A,{children:e.query}),(0,i.jsx)(nJ.A,{children:e.summary})]},t))})]})}),(0,i.jsx)(o.A,{disabled:!0,variant:"outlined",children:"TODO: Action Button"})]})]})}var aa=n(45158),as=n(10740);let al=()=>{let{saveChangesConfirmationDialog:e}=ew(),t=e?.isSavedDurationModified??!0,n=e?.isSavedVariableModified??!0,r=e?.isSavedRefreshIntervalModified??!0,[o,a]=(0,h.useState)(t),[l,u]=(0,h.useState)(n),[d,c]=(0,h.useState)(r),{getSavedVariablesStatus:p}=nm(),{modifiedVariableNames:f}=p(),g=void 0!==e,{timeRange:m,refreshInterval:y}=(0,P.useTimeRange)(),b=(0,no.bB)(m)?`(Last ${m.pastDuration})`:"(Absolute time ranges can not be saved)",v=`Save current time range as new default ${b}`,x=`Save current variable values as new default (${f.length>0?f.join(", "):"No modified variables"})`,j=P.DEFAULT_REFRESH_INTERVAL_OPTIONS.some(e=>e.display===y)?y:P.DEFAULT_REFRESH_INTERVAL_OPTIONS.find(e=>e.value.pastDuration===y)?.display,w=`Save current refresh interval as new default ${j?`(${j})`:"refresh interval not modified"}`;return(0,i.jsx)(s.Dialog,{open:g,children:void 0!==e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Dialog.Header,{onClose:()=>e.onCancel(),children:"Save Dashboard"}),(0,i.jsxs)(s.Dialog.Content,{children:[(0,i.jsx)(to.A,{marginBottom:2,children:e.description||"You have made changes to the time range or the variables values. Would you like to save these as defaults?"}),(0,i.jsxs)(aa.A,{children:[(0,i.jsx)(as.A,{control:(0,i.jsx)(oD.A,{disabled:!t||!(0,no.bB)(m),checked:o&&t&&(0,no.bB)(m),onChange:e=>a(e.target.checked)}),label:v}),(0,i.jsx)(as.A,{control:(0,i.jsx)(oD.A,{disabled:!r,checked:d&&r,onChange:e=>c(e.target.checked)}),label:w}),(0,i.jsx)(as.A,{control:(0,i.jsx)(oD.A,{disabled:!n,checked:l&&n,onChange:e=>u(e.target.checked)}),label:x})]})]}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(s.Dialog.PrimaryButton,{onClick:()=>e.onSaveChanges(o,d,l),children:"Save Changes"}),(0,i.jsx)(s.Dialog.SecondaryButton,{onClick:()=>e.onCancel(),children:"Cancel"})]})]})})};function au(e){let{projectName:t,datasourceApi:n,onCreate:r,children:o}=e,[a,s]=(0,h.useState)(e.dashboardResource),[l,u]=(0,h.useState)(e.savedDatasources??{}),d=t??a?.metadata.project,{getPlugin:c,listPluginMetadata:p}=(0,P.usePluginRegistry)(),f=(0,P.useEvent)(async e=>{if(a){let{datasources:t}=a.spec,r=function(e,t){if(void 0===e)return;if(void 0!==t.name){let n=e[t.name];if(void 0===n)return;return n.plugin.kind===t.kind?{name:t.name,spec:n}:void 0}let n=Object.entries(e).find(e=>e[1].plugin.kind===t.kind&&e[1].default);if(n)return{name:n[0],spec:n[1]}}(t,e);if(void 0!==r)return{spec:r.spec,proxyUrl:ad(n,{project:a.metadata.project,dashboard:a.metadata.name,name:r.name})}}if(d){let t=await n.getDatasource(d,e);if(void 0!==t)return{spec:t.spec,proxyUrl:ad(n,{project:t.metadata.project,name:t.metadata.name})}}let t=await n.getGlobalDatasource(e);if(void 0!==t)return{spec:t.spec,proxyUrl:ad(n,{name:t.metadata.name})};throw Error(`No datasource found for kind '${e.kind}' and name '${e.name}'`)}),g=(0,h.useCallback)(async e=>{let{spec:t}=await f(e);return t},[f]),m=(0,h.useCallback)(async function(e){let{kind:t}=e,[{spec:n,proxyUrl:i},o]=await Promise.all([f(e),c("Datasource",t)]),a=o.createClient(n.plugin.spec,{proxyUrl:i});return void 0!==r?r(a):a},[f,c,r]),y=(0,P.useEvent)(async e=>{var t;let r,i,o,s,u,c,[f,h,g]=await Promise.all([p(["Datasource"]),d?n.listDatasources(d,e):[],n.listGlobalDatasources(e)]),m=f.find(t=>t.spec.name===e);if(void 0===m)throw Error(`Could not find a Datasource plugin with kind '${e}'`);let{results:y,addItem:b}=(t=m.spec.display.name,r=[],i=new Set,o=!0,s=!1,u={},c=1,{results:r,addItem:({spec:e,selectorName:n,selectorGroup:a,editLink:l,saved:d})=>{a=a??"",o&&r.push({group:`Default ${t}`,items:[]});let p=r[u[a]??-1];!p&&(u[a]=c,p={items:[],group:a,editLink:l},r[c]=p,c++);let f=i.has(n);p.items.push({name:e.display?.name??n,overridden:f,saved:d,selector:{kind:e.plugin.kind,name:n,group:a}}),i.add(n);let h=!f&&e.default&&!s;if(r[0]&&(o||h)&&(r[0].items=[{name:`Default (${n} from ${a})`,selector:{kind:e.plugin.kind}}],s=h),f)for(let e=+!!s;e<c;e++)(r[e]?.items??[]).filter(e=>e.selector.name===n).forEach(e=>{e.overriding=!0});o=!1}});if(a?.spec.datasources)for(let t in a.spec.datasources){let n=a.spec.datasources[t];if(void 0===n||n.plugin.kind!==e)continue;let r=t in l;b({spec:n,selectorName:t,selectorGroup:"dashboard",saved:r})}for(let e of h){let t=e.metadata.name;b({spec:e.spec,selectorName:t,selectorGroup:"project",editLink:`/projects/${d}/datasources`})}for(let e of g){let t=e.metadata.name;b({spec:e.spec,selectorName:t,selectorGroup:"global",editLink:"/admin/datasources"})}return y}),b=(0,h.useCallback)(()=>a?.spec.datasources??{},[a]),v=(0,h.useCallback)(()=>l,[l]),x=(0,h.useCallback)(e=>{a&&s((a.kind,{...a,spec:{...a.spec,datasources:e}}))},[a]),j=(0,h.useMemo)(()=>({getDatasource:g,getDatasourceClient:m,getLocalDatasources:b,setLocalDatasources:x,setSavedDatasources:u,getSavedDatasources:v,listDatasourceSelectItems:y}),[g,m,b,x,y,u,v]);return(0,i.jsx)(P.DatasourceStoreContext.Provider,{value:j,children:o})}function ad(e,t){return e.buildProxyUrl?e.buildProxyUrl(t):""}function ac({children:e,initialState:t}){let[n,r]=(0,nu.useQueryParam)("viewPanelRef",nu.JsonParam);return(0,i.jsx)(W,{initialState:{...t,viewPanelRef:n??void 0,setViewPanelRef:r},children:e})}let ap=e=>{let{dashboardResource:t,emptyDashboardProps:n,isReadonly:r,isVariableEnabled:o,isDatasourceEnabled:a,isCreating:l,isInitialVariableSticky:u,isLeavingConfirmDialogEnabled:d,dashboardTitleComponent:c,onSave:p,onDiscard:f}=e,g=(0,s.useChartsTheme)(),{isEditMode:m,setEditMode:y}=q(),{dashboard:b,setDashboard:v}=rf(),[x,j]=(0,h.useState)(void 0),{setSavedDatasources:w}=(0,P.useDatasourceStore)(),{openDiscardChangesConfirmationDialog:S,closeDiscardChangesConfirmationDialog:A}=eA(),C=()=>{y(!0),j(b),w(b.spec.datasources??{})};return(0,i.jsxs)(eP.A,{sx:{flexGrow:1,overflowX:"hidden",overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(oB,{dashboardName:t.metadata.name,dashboardTitleComponent:c,initialVariableIsSticky:u,onSave:p,isReadonly:r,isVariableEnabled:o,isDatasourceEnabled:a,onEditButtonClick:C,onCancelButtonClick:()=>{JSON.stringify(b)===JSON.stringify(x)?y(!1):S({onDiscardChanges:()=>{x&&v(x),y(!1),A(),f&&f(b)},onCancel:()=>{A()}})}}),(0,i.jsxs)(eP.A,{sx:{paddingTop:2,paddingX:2,height:"100%"},children:[(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(rr,{emptyDashboardProps:{onEditButtonClick:C,...n}})}),(0,i.jsx)(s.ChartsProvider,{chartsTheme:g,enablePinning:!1,enableSyncGrouping:!1,children:(0,i.jsx)(o8,{})}),(0,i.jsx)(ar,{}),(0,i.jsx)(oF,{}),(0,i.jsx)(oW,{}),(0,i.jsx)(oq,{}),(0,i.jsx)(oJ,{isReadonly:!m,disableMetadataEdition:!l}),(0,i.jsx)(al,{}),d&&m&&(0,i.jsx)(oZ,{original:x,current:b})]})]})};function af(e){let{dashboardResource:t,datasourceApi:n,externalVariableDefinitions:r,emptyDashboardProps:o,isReadonly:a,isVariableEnabled:l,isDatasourceEnabled:u,isEditing:d,isCreating:c,isInitialVariableSticky:p,isLeavingConfirmDialogEnabled:f,dashboardTitleComponent:g,onSave:m,onDiscard:y,sx:b,...v}=e,{spec:x}=t,j=x.duration??"1h",w=x.refreshInterval??"0s",S=(0,P.useInitialTimeRange)(j),A=(0,P.useInitialRefreshInterval)(w),{data:C}=(0,P.usePluginBuiltinVariableDefinitions)(),D=(0,h.useMemo)(()=>{let e=[{kind:"BuiltinVariable",spec:{name:"__dashboard",value:()=>t.metadata.name,source:"Dashboard",display:{name:"__dashboard",description:"The name of the current dashboard",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__project",value:()=>t.metadata.project,source:"Dashboard",display:{name:"__project",description:"The name of the current dashboard project",hidden:!0}}}];return C&&C.forEach(t=>e.push(t)),e},[t.metadata.name,t.metadata.project,C]);return(0,i.jsx)(au,{dashboardResource:t,datasourceApi:n,children:(0,i.jsx)(ac,{initialState:{isEditMode:!!d,dashboardResource:t},children:(0,i.jsx)(P.TimeRangeProviderWithQueryParams,{initialTimeRange:S,initialRefreshInterval:A,children:(0,i.jsx)(nw,{initialVariableDefinitions:x.variables,externalVariableDefinitions:r,builtinVariableDefinitions:D,children:(0,i.jsx)(eP.A,{sx:(0,s.combineSx)({display:"flex",width:"100%",height:"100%",position:"relative",overflow:"hidden"},b),...v,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(ap,{dashboardResource:t,emptyDashboardProps:o,isReadonly:a,isVariableEnabled:l,isDatasourceEnabled:u,isCreating:c,isInitialVariableSticky:p,isLeavingConfirmDialogEnabled:f,dashboardTitleComponent:g,onSave:m,onDiscard:y})})})})})})})}},78784:function(e){function t(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}(e))&&(r&&(r+=" "),r+=t);return r}e.exports=t,e.exports.clsx=t},90568:function(e,t){(function(e){"use strict";function t(e){return function(t,n,r,i,o,a,s){return e(t,n,s)}}function n(e){return function(t,n,r,i){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r,i);var o=i.get(t),a=i.get(n);if(o&&a)return o===n&&a===t;i.set(t,n),i.set(n,t);var s=e(t,n,r,i);return i.delete(t),i.delete(n),s}}function r(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function i(e){return e.constructor===Object||null==e.constructor}function o(e){return"function"==typeof e.then}function a(e,t){return e===t||e!=e&&t!=t}var s=Object.prototype.toString;function l(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,l=e.areObjectsEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,c=(0,e.createIsNestedEqual)(p);function p(e,p,f){if(e===p)return!0;if(!e||!p||"object"!=typeof e||"object"!=typeof p)return e!=e&&p!=p;if(i(e)&&i(p))return l(e,p,c,f);var h=Array.isArray(e),g=Array.isArray(p);if(h||g)return h===g&&t(e,p,c,f);var m=s.call(e);return m===s.call(p)&&("[object Date]"===m?n(e,p,c,f):"[object RegExp]"===m?u(e,p,c,f):"[object Map]"===m?r(e,p,c,f):"[object Set]"===m?d(e,p,c,f):"[object Object]"===m||"[object Arguments]"===m?!(o(e)||o(p))&&l(e,p,c,f):("[object Boolean]"===m||"[object Number]"===m||"[object String]"===m)&&a(e.valueOf(),p.valueOf()))}return p}function u(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],i,i,e,t,r))return!1;return!0}var d=n(u);function c(e,t){return a(e.valueOf(),t.valueOf())}function p(e,t,n,r){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var o={},a=0;return e.forEach(function(s,l){if(i){var u=!1,d=0;t.forEach(function(i,c){!u&&!o[d]&&(u=n(l,c,a,d,e,t,r)&&n(s,i,l,c,e,t,r))&&(o[d]=!0),d++}),a++,i=u}}),i}var f=n(p),h=Object.prototype.hasOwnProperty;function g(e,t,n,r){var i,o=Object.keys(e),a=o.length;if(Object.keys(t).length!==a)return!1;for(;a-- >0;){if("_owner"===(i=o[a])){var s=!!e.$$typeof,l=!!t.$$typeof;if((s||l)&&s!==l)return!1}if(!h.call(t,i)||!n(e[i],t[i],i,i,e,t,r))return!1}return!0}var m=n(g);function y(e,t){return e.source===t.source&&e.flags===t.flags}function b(e,t,n,r){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var o={};return e.forEach(function(a,s){if(i){var l=!1,u=0;t.forEach(function(i,d){!l&&!o[u]&&(l=n(a,i,s,d,e,t,r))&&(o[u]=!0),u++}),i=l}}),i}var v=n(b),x=Object.freeze({areArraysEqual:u,areDatesEqual:c,areMapsEqual:p,areObjectsEqual:g,areRegExpsEqual:y,areSetsEqual:b,createIsNestedEqual:t}),j=Object.freeze({areArraysEqual:d,areDatesEqual:c,areMapsEqual:f,areObjectsEqual:m,areRegExpsEqual:y,areSetsEqual:v,createIsNestedEqual:t}),w=l(x),S=l(r(x,{createIsNestedEqual:function(){return a}})),A=l(j),C=l(r(j,{createIsNestedEqual:function(){return a}}));e.circularDeepEqual=function(e,t){return A(e,t,new WeakMap)},e.circularShallowEqual=function(e,t){return C(e,t,new WeakMap)},e.createCustomCircularEqual=function(e){var t=l(r(j,e(j)));return function(e,n,r){return void 0===r&&(r=new WeakMap),t(e,n,r)}},e.createCustomEqual=function(e){return l(r(x,e(x)))},e.deepEqual=function(e,t){return w(e,t,void 0)},e.sameValueZeroEqual=a,e.shallowEqual=function(e,t){return S(e,t,void 0)},Object.defineProperty(e,"__esModule",{value:!0})})(t)},4178:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z","Alert")},74830:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z","AlertCircle")},35050:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M19.5,3.09L15,7.59V4H13V11H20V9H16.41L20.91,4.5L19.5,3.09M4,13V15H7.59L3.09,19.5L4.5,20.91L9,16.41V20H11V13H4Z","ArrowCollapse")},46001:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z","ArrowDown")},53493:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z","ArrowExpand")},65168:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z","ArrowUp")},69525:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M22 5V7H19V10H17V7H14V5H17V2H19V5H22M19 19H5V5H11V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V13H19V19M15 13V17H17V13H15M11 17H13V9H11V17M9 17V11H7V17H9Z","ChartBoxPlusOutline")},38990:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z","ChevronUp")},65707:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z","CodeBraces")},50172:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z","ContentCopy")},30576:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z","ContentDuplicate")},72795:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M18.68,12.32C16.92,10.56 14.07,10.57 12.32,12.33C10.56,14.09 10.56,16.94 12.32,18.69C13.81,20.17 16.11,20.43 17.89,19.32L21,22.39L22.39,21L19.3,17.89C20.43,16.12 20.17,13.8 18.68,12.32M17.27,17.27C16.29,18.25 14.71,18.24 13.73,17.27C12.76,16.29 12.76,14.71 13.74,13.73C14.71,12.76 16.29,12.76 17.27,13.73C18.24,14.71 18.24,16.29 17.27,17.27M10.9,20.1C10.25,19.44 9.74,18.65 9.42,17.78C6.27,17.25 4,15.76 4,14V17C4,19.21 7.58,21 12,21V21C11.6,20.74 11.23,20.44 10.9,20.1M4,9V12C4,13.68 6.07,15.12 9,15.7C9,15.63 9,15.57 9,15.5C9,14.57 9.2,13.65 9.58,12.81C6.34,12.3 4,10.79 4,9M12,3C7.58,3 4,4.79 4,7C4,9 7,10.68 10.85,11H10.9C12.1,9.74 13.76,9 15.5,9C16.41,9 17.31,9.19 18.14,9.56C19.17,9.09 19.87,8.12 20,7C20,4.79 16.42,3 12,3Z","DatabaseSearch")},97090:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z","DownloadOutline")},61318:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z","DragVertical")},65241:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z","Launch")},14637:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z","Menu")},10571:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z","OpenInNew")},49603:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z","Pencil")},59909:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z","PencilOutline")},80154:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M8,6.2V4H7V2H17V4H16V12L18,14V16H17.8L14,12.2V4H10V8.2L8,6.2M20,20.7L18.7,22L12.8,16.1V22H11.2V16H6V14L8,12V11.3L2,5.3L3.3,4L20,20.7M8.8,14H10.6L9.7,13.1L8.8,14Z","PinOffOutline")},2859:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M19,19V5H5V19H19M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5C3,3.89 3.9,3 5,3H19M11,7H13V11H17V13H13V17H11V13H7V11H11V7Z","PlusBoxOutline")},4150:function(e,t,n){"use strict";var r;t.default=void 0,t.default=(0,((r=n(1448))&&r.__esModule?r:{default:r}).default)("M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z","TrashCan")},9111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(void 0);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=p(n(62688)),o=p(n(20231)),a=p(n(38262)),s=n(32837),l=n(10402),u=n(26732),d=p(n(11060)),c=p(n(57988));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends r.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return n&&(!r||n.x!==r.x||n.y!==r.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}}):null}constructor(e){super(e),g(this,"onDragStart",(e,t)=>{if((0,c.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",t);let n=(0,l.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){let{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;let[i,o]=(0,l.getBoundPosition)(this,r.x,r.y);r.x=i,r.y=o,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(r)}),g(this,"onDragStop",(e,t)=>{if(!this.state.dragging||!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,c.default)("Draggable: onDragStop: %j",t);let n={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!=(e=null==(t=this.props)||null==(t=t.nodeRef)?void 0:t.current)?e:o.default.findDOMNode(this)}render(){let{axis:e,bounds:t,children:n,defaultPosition:i,defaultClassName:o,defaultClassNameDragging:u,defaultClassNameDragged:c,position:p,positionOffset:f,scale:g,...m}=this.props,y={},b=null,v=!p||this.state.dragging,x=p||i,j={x:(0,l.canDragX)(this)&&v?this.state.x:x.x,y:(0,l.canDragY)(this)&&v?this.state.y:x.y};this.state.isElementSVG?b=(0,s.createSVGTransform)(j,f):y=(0,s.createCSSTransform)(j,f);let w=(0,a.default)(n.props.className||"",o,{[u]:this.state.dragging,[c]:this.state.dragged});return r.createElement(d.default,h({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:w,style:{...n.props.style,...y},transform:b}))}}t.default=m,g(m,"displayName","Draggable"),g(m,"propTypes",{...d.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),g(m,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},11060:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(void 0);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=d(n(62688)),o=d(n(20231)),a=n(32837),s=n(10402),l=n(26732),u=d(n(57988));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"},g=h;class m extends r.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();let r=(0,a.getTouchIdentifier)(e);this.touchIdentifier=r;let i=(0,s.getControlPosition)(e,r,this);if(null==i)return;let{x:o,y:l}=i,d=(0,s.createCoreData)(this,o,l);(0,u.default)("DraggableCore: handleDragStart: %j",d),(0,u.default)("calling",this.props.onStart),!1!==this.props.onStart(e,d)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,a.addEvent)(n,g.move,this.handleDrag),(0,a.addEvent)(n,g.stop,this.handleDragStop))}),p(this,"handleDrag",e=>{let t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}let i=(0,s.createCoreData)(this,n,r);if((0,u.default)("DraggableCore: handleDrag: %j",i),!1===this.props.onDrag(e,i)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(t){let e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}return}this.lastX=n,this.lastY=r}),p(this,"handleDragStop",e=>{if(!this.dragging)return;let t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,r=this.lastY+t}let i=(0,s.createCoreData)(this,n,r);if(!1===this.props.onStop(e,i)||!1===this.mounted)return!1;let o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(o.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,u.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(o.ownerDocument,g.move,this.handleDrag),(0,a.removeEvent)(o.ownerDocument,g.stop,this.handleDragStop))}),p(this,"onMouseDown",e=>(g=h,this.handleDragStart(e))),p(this,"onMouseUp",e=>(g=h,this.handleDragStop(e))),p(this,"onTouchStart",e=>(g=f,this.handleDragStart(e))),p(this,"onTouchEnd",e=>(g=f,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;let e=this.findDOMNode();e&&(0,a.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;(0,a.removeEvent)(t,h.move,this.handleDrag),(0,a.removeEvent)(t,f.move,this.handleDrag),(0,a.removeEvent)(t,h.stop,this.handleDragStop),(0,a.removeEvent)(t,f.stop,this.handleDragStop),(0,a.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!=(e=this.props)&&e.nodeRef?null==(t=this.props)||null==(t=t.nodeRef)?void 0:t.current:o.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=m,p(m,"displayName","DraggableCore"),p(m,"propTypes",{allowAnyClick:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(m,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},38230:function(e,t,n){"use strict";let{default:r,DraggableCore:i}=n(9111);e.exports=r,e.exports.default=r,e.exports.DraggableCore=i},32837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=u,t.addEvent=function(e,t,n,r){if(!e)return;let i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&u(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){let n=l(e,t,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,r.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,r.findInArray)(e.changedTouches,e=>t===e.identifier)},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingTop),t-=(0,r.int)(n.paddingBottom)},t.innerWidth=function(e){let t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingLeft),t-=(0,r.int)(n.paddingRight)},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(s(r,t))return!0;if(r===n)break;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){let r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-r.left)/n,y:(e.clientY+t.scrollTop-r.top)/n}},t.outerHeight=function(e){let t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderTopWidth),t+=(0,r.int)(n.borderBottomWidth)},t.outerWidth=function(e){let t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderLeftWidth),t+=(0,r.int)(n.borderRightWidth)},t.removeClassName=d,t.removeEvent=function(e,t,n,r){if(!e)return;let i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&d(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var r=n(26732),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(void 0);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(47350));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}let a="";function s(e,t){return a||(a=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,r.isFunction)(e[t])})),!!(0,r.isFunction)(e[a])&&e[a](t)}function l(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){let e="".concat("string"==typeof t.x?t.x:t.x+n),r="".concat("string"==typeof t.y?t.y:t.y+n);o="translate(".concat(e,", ").concat(r,")")+o}return o}function u(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function d(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},47350:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;let n=["Moz","Webkit","O","ms"];function r(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let r=null==(e=window.document)||null==(e=e.documentElement)?void 0:e.style;if(!r||t in r)return"";for(let e=0;e<n.length;e++)if(i(t,n[e])in r)return n[e];return""}function i(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}t.default=r()},57988:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},10402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){let i=!(0,r.isNum)(e.lastX),a=o(e);return i?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){let n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){var a;if(!e.props.bounds)return[t,n];let{bounds:s}=e.props;s="string"==typeof s?s:{left:(a=s).left,top:a.top,right:a.right,bottom:a.bottom};let l=o(e);if("string"==typeof s){let e,{ownerDocument:t}=l,n=t.defaultView;if(!((e="parent"===s?l.parentNode:t.querySelector(s))instanceof n.HTMLElement))throw Error('Bounds selector "'+s+'" could not find an element.');let o=n.getComputedStyle(l),a=n.getComputedStyle(e);s={left:-l.offsetLeft+(0,r.int)(a.paddingLeft)+(0,r.int)(o.marginLeft),top:-l.offsetTop+(0,r.int)(a.paddingTop)+(0,r.int)(o.marginTop),right:(0,i.innerWidth)(e)-(0,i.outerWidth)(l)-l.offsetLeft+(0,r.int)(a.paddingRight)-(0,r.int)(o.marginRight),bottom:(0,i.innerHeight)(e)-(0,i.outerHeight)(l)-l.offsetTop+(0,r.int)(a.paddingBottom)-(0,r.int)(o.marginBottom)}}return(0,r.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,r.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,r.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,r.isNum)(s.top)&&(n=Math.max(n,s.top)),[t,n]},t.getControlPosition=function(e,t,n){let r="number"==typeof t?(0,i.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;let a=o(n),s=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,i.offsetXYFromParent)(r||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var r=n(26732),i=n(32837);function o(e){let t=e.findDOMNode();if(!t)throw Error("<DraggableCore>: Unmounted during event!");return t}},26732:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},38262:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r);else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(r&&(r+=" "),r+=t);return r}n.r(t),n.d(t,{clsx:()=>r,default:()=>i});let i=r},18100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(70451)),i=n(20231),o=p(n(62688)),a=n(38230),s=n(50936),l=n(20414),u=n(20906),d=n(47222),c=p(n(78784));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends r.default.Component{constructor(){super(...arguments),f(this,"state",{resizing:null,dragging:null,className:""}),f(this,"elementRef",r.default.createRef()),f(this,"onDragStart",(e,t)=>{let{node:n}=t,{onDragStart:r,transformScale:i}=this.props;if(!r)return;let o={top:0,left:0},{offsetParent:a}=n;if(!a)return;let s=a.getBoundingClientRect(),l=n.getBoundingClientRect(),d=l.left/i,c=s.left/i,p=l.top/i,f=s.top/i;o.left=d-c+a.scrollLeft,o.top=p-f+a.scrollTop,this.setState({dragging:o});let{x:h,y:g}=(0,u.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return r.call(this,this.props.i,h,g,{e,node:n,newPosition:o})}),f(this,"onDrag",(e,t,n)=>{let{node:r,deltaX:o,deltaY:a}=t,{onDrag:s}=this.props;if(!s)return;if(!this.state.dragging)throw Error("onDrag called before onDragStart.");let l=this.state.dragging.top+a,d=this.state.dragging.left+o,{isBounded:c,i:p,w:f,h,containerWidth:g}=this.props,m=this.getPositionParams();if(c){let{offsetParent:e}=r;if(e){let{margin:t,rowHeight:n,containerPadding:r}=this.props,i=e.clientHeight-(0,u.calcGridItemWHPx)(h,n,t[1]);l=(0,u.clamp)(l-r[1],0,i);let o=(0,u.calcGridColWidth)(m),a=g-(0,u.calcGridItemWHPx)(f,o,t[0]);d=(0,u.clamp)(d-r[0],0,a)}}let y={top:l,left:d};n?this.setState({dragging:y}):(0,i.flushSync)(()=>{this.setState({dragging:y})});let{x:b,y:v}=(0,u.calcXY)(m,l,d,f,h);return s.call(this,p,b,v,{e,node:r,newPosition:y})}),f(this,"onDragStop",(e,t)=>{let{node:n}=t,{onDragStop:r}=this.props;if(!r)return;if(!this.state.dragging)throw Error("onDragEnd called before onDragStart.");let{w:i,h:o,i:a}=this.props,{left:s,top:l}=this.state.dragging;this.setState({dragging:null});let{x:d,y:c}=(0,u.calcXY)(this.getPositionParams(),l,s,i,o);return r.call(this,a,d,c,{e,node:n,newPosition:{top:l,left:s}})}),f(this,"onResizeStop",(e,t,n)=>this.onResizeHandler(e,t,n,"onResizeStop")),f(this,"onResizeStart",(e,t,n)=>this.onResizeHandler(e,t,n,"onResizeStart")),f(this,"onResize",(e,t,n)=>this.onResizeHandler(e,t,n,"onResize"))}shouldComponentUpdate(e,t){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;let n=(0,u.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),r=(0,u.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(n,r)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){let{droppingPosition:t}=this.props;if(!t)return;let n=this.elementRef.current;if(!n)return;let r=e.droppingPosition||{left:0,top:0},{dragging:i}=this.state,o=i&&t.left!==r.left||t.top!==r.top;if(i){if(o){let e=t.left-i.left,r=t.top-i.top;this.onDrag(t.e,{node:n,deltaX:e,deltaY:r},!0)}}else this.onDragStart(t.e,{node:n,deltaX:t.left,deltaY:t.top})}getPositionParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){let t,{usePercentages:n,containerWidth:r,useCSSTransforms:i}=this.props;return i?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),n&&(t.left=(0,l.perc)(e.left/r),t.width=(0,l.perc)(e.width/r))),t}mixinDraggable(e,t){return r.default.createElement(a.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,t){return(n,r)=>t(n,r,e)}mixinResizable(e,t,n){let{cols:i,minW:o,minH:a,maxW:l,maxH:d,transformScale:c,resizeHandles:p,resizeHandle:f}=this.props,h=this.getPositionParams(),g=(0,u.calcGridItemPosition)(h,0,0,i,0).width,m=(0,u.calcGridItemPosition)(h,0,0,o,a),y=(0,u.calcGridItemPosition)(h,0,0,l,d),b=[m.width,m.height],v=[Math.min(y.width,g),Math.min(y.height,1/0)];return r.default.createElement(s.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:b,maxConstraints:v,onResizeStop:this.curryResizeHandler(t,this.onResizeStop),onResizeStart:this.curryResizeHandler(t,this.onResizeStart),onResize:this.curryResizeHandler(t,this.onResize),transformScale:c,resizeHandles:p,handle:f},e)}onResizeHandler(e,t,n,r){let{node:o,size:a,handle:s}=t,d=this.props[r];if(!d)return;let{x:c,y:p,i:f,maxH:h,minH:g,containerWidth:m}=this.props,{minW:y,maxW:b}=this.props,v=a;o&&(v=(0,l.resizeItemInDirection)(s,n,a,m),(0,i.flushSync)(()=>{this.setState({resizing:"onResizeStop"===r?null:v})}));let{w:x,h:j}=(0,u.calcWH)(this.getPositionParams(),v.width,v.height,c,p,s);x=(0,u.clamp)(x,Math.max(y,1),b),j=(0,u.clamp)(j,g,h),d.call(this,f,x,j,{e,node:o,size:v,handle:s})}render(){let{x:e,y:t,w:n,h:i,isDraggable:o,isResizable:a,droppingPosition:s,useCSSTransforms:l}=this.props,d=(0,u.calcGridItemPosition)(this.getPositionParams(),e,t,n,i,this.state),p=r.default.Children.only(this.props.children),f=r.default.cloneElement(p,{ref:this.elementRef,className:(0,c.default)("react-grid-item",p.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":o,"react-draggable-dragging":!!this.state.dragging,dropping:!!s,cssTransforms:l}),style:{...this.props.style,...p.props.style,...this.createStyle(d)}});return f=this.mixinResizable(f,d,a),f=this.mixinDraggable(f,o)}}t.default=h,f(h,"propTypes",{children:o.default.element,cols:o.default.number.isRequired,containerWidth:o.default.number.isRequired,rowHeight:o.default.number.isRequired,margin:o.default.array.isRequired,maxRows:o.default.number.isRequired,containerPadding:o.default.array.isRequired,x:o.default.number.isRequired,y:o.default.number.isRequired,w:o.default.number.isRequired,h:o.default.number.isRequired,minW:function(e,t){let n=e[t];return"number"!=typeof n?Error("minWidth not Number"):n>e.w||n>e.maxW?Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){let n=e[t];return"number"!=typeof n?Error("maxWidth not Number"):n<e.w||n<e.minW?Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){let n=e[t];return"number"!=typeof n?Error("minHeight not Number"):n>e.h||n>e.maxH?Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){let n=e[t];return"number"!=typeof n?Error("maxHeight not Number"):n<e.h||n<e.minH?Error("maxHeight smaller than item height/minHeight"):void 0},i:o.default.string.isRequired,resizeHandles:d.resizeHandleAxesType,resizeHandle:d.resizeHandleType,onDragStop:o.default.func,onDragStart:o.default.func,onDrag:o.default.func,onResizeStop:o.default.func,onResizeStart:o.default.func,onResize:o.default.func,isDraggable:o.default.bool.isRequired,isResizable:o.default.bool.isRequired,isBounded:o.default.bool.isRequired,static:o.default.bool,useCSSTransforms:o.default.bool.isRequired,transformScale:o.default.number,className:o.default.string,handle:o.default.string,cancel:o.default.string,droppingPosition:o.default.shape({e:o.default.object.isRequired,left:o.default.number.isRequired,top:o.default.number.isRequired})}),f(h,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},59482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(void 0);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=n(90568),o=d(n(78784)),a=n(20414),s=n(20906),l=d(n(18100)),u=d(n(47222));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f="react-grid-layout",h=!1;try{h=/firefox/i.test(navigator.userAgent)}catch(e){}class g extends r.Component{constructor(){super(...arguments),p(this,"state",{activeDrag:null,layout:(0,a.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,a.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),p(this,"dragEnterCounter",0),p(this,"onDragStart",(e,t,n,r)=>{let{e:i,node:o}=r,{layout:s}=this.state,l=(0,a.getLayoutItem)(s,e);if(!l)return;let u={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,a.cloneLayoutItem)(l),oldLayout:s,activeDrag:u}),this.props.onDragStart(s,l,l,null,i,o)}),p(this,"onDrag",(e,t,n,r)=>{let{e:i,node:o}=r,{oldDragItem:s}=this.state,{layout:l}=this.state,{cols:u,allowOverlap:d,preventCollision:c}=this.props,p=(0,a.getLayoutItem)(l,e);if(!p)return;let f={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:e};l=(0,a.moveElement)(l,p,t,n,!0,c,(0,a.compactType)(this.props),u,d),this.props.onDrag(l,s,p,f,i,o),this.setState({layout:d?l:(0,a.compact)(l,(0,a.compactType)(this.props),u),activeDrag:f})}),p(this,"onDragStop",(e,t,n,r)=>{let{e:i,node:o}=r;if(!this.state.activeDrag)return;let{oldDragItem:s}=this.state,{layout:l}=this.state,{cols:u,preventCollision:d,allowOverlap:c}=this.props,p=(0,a.getLayoutItem)(l,e);if(!p)return;l=(0,a.moveElement)(l,p,t,n,!0,d,(0,a.compactType)(this.props),u,c);let f=c?l:(0,a.compact)(l,(0,a.compactType)(this.props),u);this.props.onDragStop(f,s,p,null,i,o);let{oldLayout:h}=this.state;this.setState({activeDrag:null,layout:f,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(f,h)}),p(this,"onResizeStart",(e,t,n,r)=>{let{e:i,node:o}=r,{layout:s}=this.state,l=(0,a.getLayoutItem)(s,e);l&&(this.setState({oldResizeItem:(0,a.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(s,l,l,null,i,o))}),p(this,"onResize",(e,t,n,r)=>{let i,o,s,{e:l,node:u,size:d,handle:c}=r,{oldResizeItem:p}=this.state,{layout:f}=this.state,{cols:h,preventCollision:g,allowOverlap:m}=this.props,y=!1,[b,v]=(0,a.withLayoutItem)(f,e,e=>(o=e.x,s=e.y,-1!==["sw","w","nw","n","ne"].indexOf(c)&&(-1!==["sw","nw","w"].indexOf(c)&&(o=e.x+(e.w-t),t=e.x!==o&&o<0?e.w:t,o=o<0?0:o),-1!==["ne","n","nw"].indexOf(c)&&(s=e.y+(e.h-n),n=e.y!==s&&s<0?e.h:n,s=s<0?0:s),y=!0),g&&!m&&(0,a.getAllCollisions)(f,{...e,w:t,h:n,x:o,y:s}).filter(t=>t.i!==e.i).length>0&&(s=e.y,n=e.h,o=e.x,t=e.w,y=!1),e.w=t,e.h=n,e));if(!v)return;i=b,y&&(i=(0,a.moveElement)(b,v,o,s,!0,this.props.preventCollision,(0,a.compactType)(this.props),h,m));let x={w:v.w,h:v.h,x:v.x,y:v.y,static:!0,i:e};this.props.onResize(i,p,v,x,l,u),this.setState({layout:m?i:(0,a.compact)(i,(0,a.compactType)(this.props),h),activeDrag:x})}),p(this,"onResizeStop",(e,t,n,r)=>{let{e:i,node:o}=r,{layout:s,oldResizeItem:l}=this.state,{cols:u,allowOverlap:d}=this.props,c=(0,a.getLayoutItem)(s,e),p=d?s:(0,a.compact)(s,(0,a.compactType)(this.props),u);this.props.onResizeStop(p,l,c,null,i,o);let{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,f)}),p(this,"onDragOver",e=>{if(e.preventDefault(),e.stopPropagation(),h&&!e.nativeEvent.target?.classList.contains(f))return!1;let{droppingItem:t,onDropDragOver:n,margin:i,cols:o,rowHeight:a,maxRows:l,width:u,containerPadding:d,transformScale:c}=this.props,p=n?.(e);if(!1===p)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;let g={...t,...p},{layout:m}=this.state,y=e.currentTarget.getBoundingClientRect(),b=e.clientX-y.left,v=e.clientY-y.top,x={left:b/c,top:v/c,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){let{left:e,top:t}=this.state.droppingPosition;(e!=b||t!=v)&&this.setState({droppingPosition:x})}}else{let e=(0,s.calcXY)({cols:o,margin:i,maxRows:l,rowHeight:a,containerWidth:u,containerPadding:d||i},v,b,g.w,g.h);this.setState({droppingDOMNode:r.createElement("div",{key:g.i}),droppingPosition:x,layout:[...m,{...g,x:e.x,y:e.y,static:!1,isDraggable:!0}]})}}),p(this,"removeDroppingPlaceholder",()=>{let{droppingItem:e,cols:t}=this.props,{layout:n}=this.state,r=(0,a.compact)(n.filter(t=>t.i!==e.i),(0,a.compactType)(this.props),t,this.props.allowOverlap);this.setState({layout:r,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),p(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,0===this.dragEnterCounter&&this.removeDroppingPlaceholder()}),p(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),p(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();let{droppingItem:t}=this.props,{layout:n}=this.state,r=n.find(e=>e.i===t.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,r,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,t){let n;return t.activeDrag?null:((0,i.deepEqual)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,a.childrenEqual)(e.children,t.children)||(n=t.layout):n=e.layout,n)?{layout:(0,a.synchronizeLayoutWithChildren)(n,e.children,e.cols,(0,a.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null}shouldComponentUpdate(e,t){return this.props.children!==e.children||!(0,a.fastRGLPropsEqual)(this.props,e,i.deepEqual)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}componentDidUpdate(e,t){if(!this.state.activeDrag){let e=this.state.layout,n=t.layout;this.onLayoutMaybeChanged(e,n)}}containerHeight(){if(!this.props.autoSize)return;let e=(0,a.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}onLayoutMaybeChanged(e,t){t||(t=this.state.layout),(0,i.deepEqual)(t,e)||this.props.onLayoutChange(e)}placeholder(){let{activeDrag:e}=this.state;if(!e)return null;let{width:t,cols:n,margin:i,containerPadding:o,rowHeight:a,maxRows:s,useCSSTransforms:u,transformScale:d}=this.props;return r.createElement(l.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:t,cols:n,margin:i,containerPadding:o||i,maxRows:s,rowHeight:a,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:u,transformScale:d},r.createElement("div",null))}processGridItem(e,t){if(!e||!e.key)return;let n=(0,a.getLayoutItem)(this.state.layout,String(e.key));if(!n)return null;let{width:i,cols:o,margin:s,containerPadding:u,rowHeight:d,maxRows:c,isDraggable:p,isResizable:f,isBounded:h,useCSSTransforms:g,transformScale:m,draggableCancel:y,draggableHandle:b,resizeHandles:v,resizeHandle:x}=this.props,{mounted:j,droppingPosition:w}=this.state,S="boolean"==typeof n.isDraggable?n.isDraggable:!n.static&&p,A="boolean"==typeof n.isResizable?n.isResizable:!n.static&&f,C=n.resizeHandles||v,D=S&&h&&!1!==n.isBounded;return r.createElement(l.default,{containerWidth:i,cols:o,margin:s,containerPadding:u||s,maxRows:c,rowHeight:d,cancel:y,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:S,isResizable:A,isBounded:D,useCSSTransforms:g&&j,usePercentages:!j,transformScale:m,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:t?w:void 0,resizeHandles:C,resizeHandle:x},e)}render(){let{className:e,style:t,isDroppable:n,innerRef:i}=this.props,s=(0,o.default)(f,e),l={height:this.containerHeight(),...t};return r.createElement("div",{ref:i,className:s,style:l,onDrop:n?this.onDrop:a.noop,onDragLeave:n?this.onDragLeave:a.noop,onDragEnter:n?this.onDragEnter:a.noop,onDragOver:n?this.onDragOver:a.noop},r.Children.map(this.props.children,e=>this.processGridItem(e)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}t.default=g,p(g,"displayName","ReactGridLayout"),p(g,"propTypes",u.default),p(g,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:a.noop,onDragStart:a.noop,onDrag:a.noop,onDragStop:a.noop,onResizeStart:a.noop,onResize:a.noop,onResizeStop:a.noop,onDrop:a.noop,onDropDragOver:a.noop})},47222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var r=o(n(62688)),i=o(n(70451));function o(e){return e&&e.__esModule?e:{default:e}}let a=t.resizeHandleAxesType=r.default.arrayOf(r.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),s=t.resizeHandleType=r.default.oneOfType([r.default.node,r.default.func]);t.default={className:r.default.string,style:r.default.object,width:r.default.number,autoSize:r.default.bool,cols:r.default.number,draggableCancel:r.default.string,draggableHandle:r.default.string,verticalCompact:function(e){e.verticalCompact},compactType:r.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&n(20414).validateLayout(t,"layout")},margin:r.default.arrayOf(r.default.number),containerPadding:r.default.arrayOf(r.default.number),rowHeight:r.default.number,maxRows:r.default.number,isBounded:r.default.bool,isDraggable:r.default.bool,isResizable:r.default.bool,allowOverlap:r.default.bool,preventCollision:r.default.bool,useCSSTransforms:r.default.bool,transformScale:r.default.number,isDroppable:r.default.bool,resizeHandles:a,resizeHandle:s,onLayoutChange:r.default.func,onDragStart:r.default.func,onDrag:r.default.func,onDragStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,onResizeStop:r.default.func,onDrop:r.default.func,droppingItem:r.default.shape({i:r.default.string.isRequired,w:r.default.number.isRequired,h:r.default.number.isRequired}),children:function(e,t){let n=e[t],r={};i.default.Children.forEach(n,function(e){if(e?.key!=null){if(r[e.key])throw Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');r[e.key]=!0}})},innerRef:r.default.any}},74636:function(e,t,n){"use strict";t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(void 0);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=u(n(62688)),o=n(90568),a=n(20414),s=n(50544),l=u(n(59482));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f=e=>Object.prototype.toString.call(e);function h(e,t){return null==e?null:Array.isArray(e)?e:e[t]}class g extends r.Component{constructor(){super(...arguments),p(this,"state",this.generateInitialState()),p(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){let{width:e,breakpoints:t,layouts:n,cols:r}=this.props,i=(0,s.getBreakpointFromWidth)(t,e),o=(0,s.getColsFromBreakpoint)(i,r),a=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,s.findOrGenerateResponsiveLayout)(n,t,i,i,o,a),breakpoint:i,cols:o}}static getDerivedStateFromProps(e,t){if(!(0,o.deepEqual)(e.layouts,t.layouts)){let{breakpoint:n,cols:r}=t;return{layout:(0,s.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,o.deepEqual)(this.props.breakpoints,e.breakpoints)&&(0,o.deepEqual)(this.props.cols,e.cols)||this.onWidthChange(e)}onWidthChange(e){let{breakpoints:t,cols:n,layouts:r,compactType:i}=this.props,o=this.props.breakpoint||(0,s.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),l=this.state.breakpoint,u=(0,s.getColsFromBreakpoint)(o,n),d={...r};if(l!==o||e.breakpoints!==t||e.cols!==n){l in d||(d[l]=(0,a.cloneLayout)(this.state.layout));let e=(0,s.findOrGenerateResponsiveLayout)(d,t,o,l,u,i);e=(0,a.synchronizeLayoutWithChildren)(e,this.props.children,u,i,this.props.allowOverlap),d[o]=e,this.props.onBreakpointChange(o,u),this.props.onLayoutChange(e,d),this.setState({breakpoint:o,layout:e,cols:u})}let c=h(this.props.margin,o),p=h(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,c,u,p)}render(){let{breakpoint:e,breakpoints:t,cols:n,layouts:i,margin:o,containerPadding:a,onBreakpointChange:s,onLayoutChange:u,onWidthChange:d,...p}=this.props;return r.createElement(l.default,c({},p,{margin:h(o,this.state.breakpoint),containerPadding:h(a,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}t.default=g,p(g,"propTypes",{breakpoint:i.default.string,breakpoints:i.default.object,allowOverlap:i.default.bool,cols:i.default.object,margin:i.default.oneOfType([i.default.array,i.default.object]),containerPadding:i.default.oneOfType([i.default.array,i.default.object]),layouts(e,t){if("[object Object]"!==f(e[t]))throw Error("Layout property must be an object. Received: "+f(e[t]));Object.keys(e[t]).forEach(t=>{if(!(t in e.breakpoints))throw Error("Each key in layouts must align with a key in breakpoints.");(0,a.validateLayout)(e.layouts[t],"layouts."+t)})},width:i.default.number.isRequired,onBreakpointChange:i.default.func,onLayoutChange:i.default.func,onWidthChange:i.default.func}),p(g,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:a.noop,onLayoutChange:a.noop,onWidthChange:a.noop})},20906:function(e,t){"use strict";function n(e){let{margin:t,containerPadding:n,containerWidth:r,cols:i}=e;return(r-t[0]*(i-1)-2*n[0])/i}function r(e,t,n){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*n):e}function i(e,t,n){return Math.max(Math.min(e,n),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=n,t.calcGridItemPosition=function(e,t,i,o,a,s){let{margin:l,containerPadding:u,rowHeight:d}=e,c=n(e),p={};return s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=r(o,c,l[0]),p.height=r(a,d,l[1])),s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):s&&s.resizing&&"number"==typeof s.resizing.top&&"number"==typeof s.resizing.left?(p.top=Math.round(s.resizing.top),p.left=Math.round(s.resizing.left)):(p.top=Math.round((d+l[1])*i+u[1]),p.left=Math.round((c+l[0])*t+u[0])),p},t.calcGridItemWHPx=r,t.calcWH=function(e,t,r,o,a,s){let{margin:l,maxRows:u,cols:d,rowHeight:c}=e,p=n(e),f=Math.round((t+l[0])/(p+l[0])),h=Math.round((r+l[1])/(c+l[1])),g=i(f,0,d-o),m=i(h,0,u-a);return -1!==["sw","w","nw"].indexOf(s)&&(g=i(f,0,d)),-1!==["nw","n","ne"].indexOf(s)&&(m=i(h,0,u)),{w:g,h:m}},t.calcXY=function(e,t,r,o,a){let{margin:s,containerPadding:l,cols:u,rowHeight:d,maxRows:c}=e,p=n(e),f=Math.round((r-l[0])/(p+s[0])),h=Math.round((t-l[1])/(d+s[1]));return{x:f=i(f,0,u-o),y:h=i(h,0,c-a)}},t.clamp=i},59186:function(e,t,n){"use strict";t.default=function(e){var t;return t=class extends r.Component{constructor(){super(...arguments),d(this,"state",{width:1280}),d(this,"elementRef",r.createRef()),d(this,"mounted",!1),d(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new o.default(e=>{if(this.elementRef.current instanceof HTMLElement){let t=e[0].contentRect.width;this.setState({width:t})}});let e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.observe(e)}componentWillUnmount(){this.mounted=!1;let e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.unobserve(e),this.resizeObserver.disconnect()}render(){let{measureBeforeMount:t,...n}=this.props;return t&&!this.mounted?r.createElement("div",{className:(0,a.default)(this.props.className,"react-grid-layout"),style:this.props.style,ref:this.elementRef}):r.createElement(e,u({innerRef:this.elementRef},n,this.state))}},d(t,"defaultProps",{measureBeforeMount:!1}),d(t,"propTypes",{measureBeforeMount:i.default.bool}),t};var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(void 0);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=s(n(62688)),o=s(n(90883)),a=s(n(78784));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},37434:function(e){e.exports=function(e,t,n){return e===t||e.className===t.className&&n(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&n(e.verticalCompact,t.verticalCompact)&&n(e.compactType,t.compactType)&&n(e.layout,t.layout)&&n(e.margin,t.margin)&&n(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&n(e.resizeHandles,t.resizeHandles)&&n(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&n(e.droppingItem,t.droppingItem)&&n(e.innerRef,t.innerRef)}},50544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,n,o,a,s){if(e[n])return(0,r.cloneLayout)(e[n]);let l=e[o],u=i(t),d=u.slice(u.indexOf(n));for(let t=0,n=d.length;t<n;t++){let n=d[t];if(e[n]){l=e[n];break}}return l=(0,r.cloneLayout)(l||[]),(0,r.compact)((0,r.correctBounds)(l,{cols:a}),s,a)},t.getBreakpointFromWidth=function(e,t){let n=i(e),r=n[0];for(let i=1,o=n.length;i<o;i++){let o=n[i];t>e[o]&&(r=o)}return r},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=i;var r=n(20414);function i(e){return Object.keys(e).sort(function(t,n){return e[t]-e[n]})}},20414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=a,t.childrenEqual=function(e,t){return(0,i.deepEqual)(o.default.Children.map(e,e=>e?.key),o.default.Children.map(t,e=>e?.key))&&(0,i.deepEqual)(o.default.Children.map(e,e=>e?.props["data-grid"]),o.default.Children.map(t,e=>e?.props["data-grid"]))},t.cloneLayout=s,t.cloneLayoutItem=u,t.collides=d,t.compact=c,t.compactItem=h,t.compactType=function(e){let{verticalCompact:t,compactType:n}=e||{};return!1===t?null:n},t.correctBounds=g,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=b,t.getFirstCollision=y,t.getLayoutItem=m,t.getStatics=v,t.modifyLayout=l,t.moveElement=x,t.moveElementAwayFromCollision=j,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.resizeItemInDirection=function(e,t,n,r){let i=E[e];return i?i(t,{...t,...n},r):n},t.setTopLeft=function(e){let{top:t,left:n,width:r,height:i}=e;return{top:`${t}px`,left:`${n}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}},t.setTransform=function(e){let{top:t,left:n,width:r,height:i}=e,o=`translate(${n}px,${t}px)`;return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:`${r}px`,height:`${i}px`,position:"absolute"}},t.sortLayoutItems=k,t.sortLayoutItemsByColRow=M,t.sortLayoutItemsByRowCol=P,t.synchronizeLayoutWithChildren=function(e,t,n,r,i){e=e||[];let s=[];o.default.Children.forEach(t,t=>{if(t?.key==null)return;let n=m(e,String(t.key)),r=t.props["data-grid"];n&&null==r?s.push(u(n)):r?s.push(u({...r,i:t.key})):s.push(u({w:1,h:1,x:0,y:a(s),i:String(t.key)}))});let l=g(s,{cols:n});return i?l:c(l,r,n)},t.validateLayout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw Error(t+" must be an array!");for(let r=0,i=e.length;r<i;r++){let i=e[r];for(let e=0;e<n.length;e++){let o=n[e],a=i[o];if("number"!=typeof a||Number.isNaN(a))throw Error(`ReactGridLayout: ${t}[${r}].${o} must be a number! Received: ${a} (${typeof a})`)}if(void 0!==i.i&&"string"!=typeof i.i)throw Error(`ReactGridLayout: ${t}[${r}].i must be a string! Received: ${i.i} (${typeof i.i})`)}},t.withLayoutItem=function(e,t,n){let r=m(e,t);return r?[e=l(e,r=n(u(r))),r]:[e,null]};var r,i=n(90568),o=(r=n(70451))&&r.__esModule?r:{default:r};function a(e){let t=0,n;for(let r=0,i=e.length;r<i;r++)(n=e[r].y+e[r].h)>t&&(t=n);return t}function s(e){let t=Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=u(e[n]);return t}function l(e,t){let n=Array(e.length);for(let r=0,i=e.length;r<i;r++)t.i===e[r].i?n[r]=t:n[r]=e[r];return n}function u(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function d(e,t){return e.i!==t.i&&!(e.x+e.w<=t.x)&&!(e.x>=t.x+t.w)&&!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h)}function c(e,t,n,r){let i=v(e),o=k(e,t),a=Array(e.length);for(let s=0,l=o.length;s<l;s++){let l=u(o[s]);l.static||(l=h(i,l,t,n,o,r),i.push(l)),a[e.indexOf(o[s])]=l,l.moved=!1}return a}t.fastRGLPropsEqual=n(37434);let p={x:"w",y:"h"};function f(e,t,n,r){let i=p[r];t[r]+=1;let o=e.map(e=>e.i).indexOf(t.i);for(let a=o+1;a<e.length;a++){let o=e[a];if(!o.static){if(o.y>t.y+t.h)break;d(t,o)&&f(e,o,n+t[i],r)}}t[r]=n}function h(e,t,n,r,i,o){let s,l="horizontal"===n;if("vertical"===n)for(t.y=Math.min(a(e),t.y);t.y>0&&!y(e,t);)t.y--;else if(l)for(;t.x>0&&!y(e,t);)t.x--;for(;(s=y(e,t))&&!(null===n&&o);)if(l?f(i,t,s.x+s.w,"x"):f(i,t,s.y+s.h,"y"),l&&t.x+t.w>r)for(t.x=r-t.w,t.y++;t.x>0&&!y(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function g(e,t){let n=v(e);for(let r=0,i=e.length;r<i;r++){let i=e[r];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),i.static)for(;y(n,i);)i.y++;else n.push(i)}return e}function m(e,t){for(let n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function y(e,t){for(let n=0,r=e.length;n<r;n++)if(d(e[n],t))return e[n]}function b(e,t){return e.filter(e=>d(e,t))}function v(e){return e.filter(e=>e.static)}function x(e,t,n,r,i,o,a,l,u){if(t.static&&!0!==t.isDraggable||t.y===r&&t.x===n)return e;t.i,String(n),String(r),t.x,t.y;let d=t.x,c=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;let p=k(e,a);("vertical"===a&&"number"==typeof r?c>=r:"horizontal"===a&&"number"==typeof n&&d>=n)&&(p=p.reverse());let f=b(p,t),h=f.length>0;if(h&&u)return s(e);if(h&&o)return V(`Collision prevented on ${t.i}, reverting.`),t.x=d,t.y=c,t.moved=!1,e;for(let n=0,r=f.length;n<r;n++){let r=f[n];t.i,t.x,t.y,r.i,r.x,r.y,r.moved||(e=r.static?j(e,r,t,i,a,l):j(e,t,r,i,a,l))}return e}function j(e,t,n,r,i,o){let a="horizontal"===i,s="vertical"===i,l=t.static;if(r){r=!1;let u={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},d=y(e,u),c=d&&d.y+d.h>t.y,p=d&&t.x+t.w>d.x;if(!d)return V(`Doing reverse collision on ${n.i} up to [${u.x},${u.y}].`),x(e,n,a?u.x:void 0,s?u.y:void 0,r,l,i,o);if(c&&s)return x(e,n,void 0,t.y+1,r,l,i,o);if(c&&null==i)return t.y=n.y,n.y=n.y+n.h,e;else if(p&&a)return x(e,t,n.x,void 0,r,l,i,o)}let u=a?n.x+1:void 0,d=s?n.y+1:void 0;return null==u&&null==d?e:x(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,l,i,o)}let w=(e,t,n,r)=>e+n>r?t:n,S=(e,t,n)=>e<0?t:n,A=(e,t,n)=>{let{left:r,height:i,width:o}=t,a=e.top-(i-e.height);return{left:r,width:o,height:S(a,e.height,i),top:Math.max(0,a)}},C=(e,t,n)=>{let{top:r,left:i,height:o,width:a}=t;return{top:r,height:o,width:w(e.left,e.width,a,n),left:Math.max(0,i)}},D=(e,t,n)=>{let{top:r,height:i,width:o}=t,a=e.left-(o-e.width);return{height:i,width:a<0?e.width:w(e.left,e.width,o,n),top:Math.max(0,r),left:Math.max(0,a)}},O=(e,t,n)=>{let{top:r,left:i,height:o,width:a}=t;return{width:a,left:i,height:S(r,e.height,o),top:Math.max(0,r)}},E={n:A,ne:function(){return A(arguments.length<=0?void 0:arguments[0],C(...arguments),arguments.length<=2?void 0:arguments[2])},e:C,se:function(){return O(arguments.length<=0?void 0:arguments[0],C(...arguments),arguments.length<=2?void 0:arguments[2])},s:O,sw:function(){return O(arguments.length<=0?void 0:arguments[0],D(...arguments),arguments.length<=2?void 0:arguments[2])},w:D,nw:function(){return A(arguments.length<=0?void 0:arguments[0],D(...arguments),arguments.length<=2?void 0:arguments[2])}};function k(e,t){return"horizontal"===t?M(e):"vertical"===t?P(e):e}function P(e){return e.slice(0).sort(function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1})}function M(e){return e.slice(0).sort(function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1})}function V(){}t.noop=()=>{}},12548:function(e,t,n){e.exports=n(59482).default,n(20414),n(20906),e.exports.Responsive=n(74636).default,e.exports.Responsive.utils=n(50544),e.exports.WidthProvider=n(59186).default},11794:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(void 0);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=n(38230),o=n(39954),a=n(16333),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,p(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(e,t){var n=this.props,r=n.minConstraints,i=n.maxConstraints,o=n.lockAspectRatio;if(!r&&!i&&!o)return[e,t];if(o){var a=this.props.width/this.props.height;Math.abs(e-this.props.width)>Math.abs((t-this.props.height)*a)?t=e/a:e=t*a}var s=e,l=t,u=this.slack||[0,0],d=u[0],c=u[1];return e+=d,t+=c,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),this.slack=[d+(s-e),c+(l-t)],[e,t]},n.resizeHandler=function(e,t){var n=this;return function(r,i){var o=i.node,a=i.deltaX,s=i.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,u=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var d=t[0],c=t[t.length-1],p=o.getBoundingClientRect();null!=n.lastHandleRect&&("w"===c&&(a+=p.left-n.lastHandleRect.left),"n"===d&&(s+=p.top-n.lastHandleRect.top)),n.lastHandleRect=p,"w"===c&&(a=-a),"n"===d&&(s=-s);var f=n.props.width+(l?a/n.props.transformScale:0),h=n.props.height+(u?s/n.props.transformScale:0),g=n.runConstraints(f,h);f=g[0],h=g[1];var m=f!==n.props.width||h!==n.props.height,y="function"==typeof n.props[e]?n.props[e]:null;y&&!("onResize"===e&&!m)&&(null==r.persist||r.persist(),y(r,{node:o,size:{width:f,height:h},handle:t})),"onResizeStop"===e&&n.resetData()}}},n.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return r.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var i=c({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return r.cloneElement(n,i)},n.render=function(){var e=this,t=this.props,n=t.children,a=t.className,l=t.draggableOpts,d=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,s));return(0,o.cloneElement)(n,c(c({},p),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(n.props.children,d.map(function(t){var n,o=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=r.createRef();return r.createElement(i.DraggableCore,u({},l,{nodeRef:o,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,o))}))}))},t}(r.Component);t.default=f,f.propTypes=a.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},96609:function(e,t,n){"use strict";t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(void 0);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(70451)),i=l(n(62688)),o=l(n(11794)),a=n(16333),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var r=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(r,function(){return t.props.onResize&&t.props.onResize(e,n)})):t.setState(r)},t}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e),t.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},t.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize,i=(e.onResize,e.onResizeStart),a=e.onResizeStop,l=e.draggableOpts,u=e.minConstraints,c=e.maxConstraints,f=e.lockAspectRatio,h=e.axis,g=(e.width,e.height,e.resizeHandles),m=e.style,y=e.transformScale,b=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,s);return r.createElement(o.default,{axis:h,draggableOpts:l,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:f,maxConstraints:c,minConstraints:u,onResizeStart:i,onResize:this.onResize,onResizeStop:a,resizeHandles:g,transformScale:y,width:this.state.width},r.createElement("div",d({},b,{style:p(p({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(r.Component);t.default=h,h.propTypes=p(p({},a.resizableProps),{},{children:i.default.element})},16333:function(e,t,n){"use strict";t.__esModule=!0,t.resizableProps=void 0;var r,i=(r=n(62688))&&r.__esModule?r:{default:r};n(38230),t.resizableProps={axis:i.default.oneOf(["both","x","y","none"]),className:i.default.string,children:i.default.element.isRequired,draggableOpts:i.default.shape({allowAnyClick:i.default.bool,cancel:i.default.string,children:i.default.node,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:i.default.node,grid:i.default.arrayOf(i.default.number),handle:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number}),height:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"both"===o.axis||"y"===o.axis?(e=i.default.number).isRequired.apply(e,n):i.default.number.apply(i.default,n)},handle:i.default.oneOfType([i.default.node,i.default.func]),handleSize:i.default.arrayOf(i.default.number),lockAspectRatio:i.default.bool,maxConstraints:i.default.arrayOf(i.default.number),minConstraints:i.default.arrayOf(i.default.number),onResizeStop:i.default.func,onResizeStart:i.default.func,onResize:i.default.func,resizeHandles:i.default.arrayOf(i.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:i.default.number,width:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];return"both"===o.axis||"x"===o.axis?(e=i.default.number).isRequired.apply(e,n):i.default.number.apply(i.default,n)}}},39954:function(e,t,n){"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=a(a({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),i.default.cloneElement(e,t)};var r,i=(r=n(70451))&&r.__esModule?r:{default:r};function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},50936:function(e,t,n){"use strict";e.exports=function(){throw Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=n(11794).default,e.exports.ResizableBox=n(96609).default},90883:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>w});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function s(){a(o)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);i=e}return l}(this.refresh.bind(this),0)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),d=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},c=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},p=m(0,0,0,0);function f(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+f(e["border-"+n+"-width"])},0)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof c(e).SVGGraphicsElement}:function(e){return e instanceof c(e).SVGElement&&"function"==typeof e.getBBox};function m(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){if(!i)return p;if(g(e)){var t;return m(0,0,(t=e.getBBox()).width,t.height)}return function(e){var t,n=e.clientWidth,r=e.clientHeight;if(!n&&!r)return p;var i=c(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=f(o)}return t}(i),a=o.left+o.right,s=o.top+o.bottom,l=f(i.width),u=f(i.height);if("border-box"===i.boxSizing&&(Math.round(l+a)!==n&&(l-=h(i,"left","right")+a),Math.round(u+s)!==r&&(u-=h(i,"top","bottom")+s)),(t=e)!==c(t).document.documentElement){var d=Math.round(l+a)-n,g=Math.round(u+s)-r;1!==Math.abs(d)&&(l-=d),1!==Math.abs(g)&&(u-=g)}return m(o.left,o.top,l,u)}(e)}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,i,o,a,s=(n=t.x,r=t.y,i=t.width,o=t.height,d(a=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:n,y:r,width:i,height:o,top:r,right:n+i,bottom:o+r,left:n}),a);d(this,{target:e,contentRect:s})},v=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new b(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),x="undefined"!=typeof WeakMap?new WeakMap:new r,j=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var n=new v(t,u.getInstance(),this);x.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){j.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}});let w=void 0!==o.ResizeObserver?o.ResizeObserver:j},32473:function(e,t,n){"use strict";var r=n(70451),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,d=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&d({inst:i})},[e,n,t]),a(function(){return u(i)&&d({inst:i}),e(function(){u(i)&&d({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},21750:function(e,t,n){"use strict";var r=n(70451),i=n(43676),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var c=s(null);if(null===c.current){var p={hasValue:!1,value:null};c.current=p}else p=c.current;var f=a(e,(c=u(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&p.hasValue){var t=p.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]))[0],c[1]);return l(function(){p.hasValue=!0,p.value=f},[f]),d(f),f}},43676:function(e,t,n){"use strict";e.exports=n(32473)},95390:function(e,t,n){"use strict";e.exports=n(21750)},42338:function(e,t,n){"use strict";n.d(t,{u:()=>a});var r=n(25511),i=n(72694),o=function(e,t){for(var n={};e.length;){var r=e[0],o=r.code,a=r.message,s=r.path.join(".");if(!n[s])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[s]={message:l.message,type:l.code}}else n[s]={message:a,type:o};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var u=n[s].types,d=u&&u[r.code];n[s]=(0,i.appendErrors)(s,t,n,o,d?[].concat(d,r.message):r.message)}e.shift()}return n},a=function(e,t,n){return void 0===n&&(n={}),function(i,a,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](i,t)).then(function(e){return s.shouldUseNativeValidation&&(0,r.validateFieldsNatively)({},s),{errors:{},values:n.raw?i:e}})}catch(e){return a(e)}return l&&l.then?l.then(void 0,a):l}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:(0,r.toNestErrors)(o(e.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};throw e}))}catch(e){return Promise.reject(e)}}}}}]);