"use strict";(self.chunk_Prometheus=self.chunk_Prometheus||[]).push([["9020"],{24340:function(e,r,t){t.d(r,{T:()=>ee});var n=t(62540),a=t(79058),s=t(40565),l=t(41865),i=t(56599),o=t(315),c=t(54227),d=t(65211),p=t(47095),u=t(25742),x=t(93196),h=t(70451),m=t(37266),g=t(7800),j=t(57744),f=t(68616),y=t(91807),b=t(74628),$=t(88091),v=t(76477),A=t(79956),w=t(29618),S=t(74830);let F={"+":3,"-":3,"*":2,"/":2,"%":2,"^":1,"==":4,"!=":4,">":4,"<":4,">=":4,"<=":4,and:5,or:6,unless:5,atan2:2},k=(e,r)=>"binaryExpr"!==r.type||F[e]>F[r.op]?r:{type:"parenExpr",expr:r},E=["topk","bottomk","quantile","count_values","limitk","limit_ratio"];var _=t(77308),L=t(69791);let C=(0,_.A)("span")(()=>({fontFamily:'"DejaVu Sans Mono", monospace'})),q=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#e5c07b":"#708"}}),O=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#61afef":"#2a2e42"}}),T=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#e06c75":"#2a2e42"}}),R=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#61afef":"#219"}}),I=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#98c379":"#a31515"}}),M=(0,_.A)("span")(()=>({color:"#aaaaaa"})),z=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#e5c07b":"#09885a"}}),B=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#e5c07b":"#164"}}),U=(0,_.A)("span")(e=>{let{theme:r}=e;return{color:"dark"===r.palette.mode?"#56b6c2":"#708"}}),P=e=>e.map((e,r)=>(0,n.jsxs)("span",{children:[0!==r&&", ",(0,n.jsx)(R,{children:e})]},r)),V=(e,r,t)=>(0,n.jsxs)(n.Fragment,{children:[null!==e?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(U,{children:"@"})," ",(0,n.jsx)(B,{children:(e/1e3).toFixed(3)})]}):null!==r?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(U,{children:"@"})," ",(0,n.jsx)(q,{children:r}),(0,n.jsx)("span",{children:"("}),(0,n.jsx)("span",{children:")"})]}):(0,n.jsx)(n.Fragment,{}),0===t?(0,n.jsx)(n.Fragment,{}):t>0?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"offset"})," ",(0,n.jsx)(z,{children:(0,L.a3)((0,L.eo)(t))})]}):(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"offset"})," ",(0,n.jsxs)(z,{children:["-",(0,L.a3)((0,L.eo)(-t))]})]})]}),Q=(0,n.jsx)(M,{children:"…"}),D=(e,r,t)=>(0,n.jsx)(C,{children:((e,r,t)=>{if(0===t)return Q;let a=void 0===t?void 0:t-1;switch(e.type){case"aggregation":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{children:e.op}),e.without?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"without"}),(0,n.jsx)("span",{children:"("}),P(e.grouping),(0,n.jsx)("span",{children:")"})," "]}):e.grouping.length>0&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"by"}),(0,n.jsx)("span",{children:"("}),P(e.grouping),(0,n.jsx)("span",{children:")"})," "]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"("}),null!==e.param&&(0,n.jsxs)(n.Fragment,{children:[D(e.param,r,a),", "]}),D(e.expr,r,a),(0,n.jsx)("span",{children:")"})]})]});case"subquery":return(0,n.jsxs)(n.Fragment,{children:[r&&D(e.expr,r,a),"[",(0,n.jsx)(z,{children:(0,L.a3)((0,L.eo)(e.range))}),":",0!==e.step&&(0,n.jsx)(z,{children:(0,L.a3)((0,L.eo)(e.step))}),"]",V(e.timestamp,e.startOrEnd,e.offset)]});case"parenExpr":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"("}),r&&D(e.expr,r,a),(0,n.jsx)("span",{children:")"})]});case"call":{let t=void 0===a||a>0?e.args.map((e,t)=>(0,n.jsxs)("span",{children:[0!==t&&", ",D(e,r)]},t)):e.args.length>0?Q:"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{children:e.func.name}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"("}),t,(0,n.jsx)("span",{children:")"})]})]})}case"matrixSelector":case"vectorSelector":let s;return s=e.matchers.filter(r=>"__name__"!==r.name||"="!==r.type||r.value!==e.name).map((e,r)=>(0,n.jsxs)("span",{children:[0!==r&&",",(0,n.jsx)(R,{children:e.name}),e.type,(0,n.jsxs)(I,{children:['"',e.value.replace(/([\\"])/g,"\\$1"),'"']})]},r)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T,{children:e.name}),s.length>0&&(0,n.jsxs)(n.Fragment,{children:["{",(0,n.jsx)("span",{children:s}),"}"]}),"matrixSelector"===e.type&&(0,n.jsxs)(n.Fragment,{children:["[",(0,n.jsx)(z,{children:(0,L.a3)((0,L.eo)(e.range))}),"]"]}),V(e.timestamp,e.startOrEnd,e.offset)]});case"numberLiteral":return(0,n.jsx)(B,{children:e.val});case"stringLiteral":return(0,n.jsxs)(I,{children:['"',e.val.replace(/([\\"])/g,"\\$1"),'"']});case"unaryExpr":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{children:e.op}),r&&D(e.expr,r,a)]});case"binaryExpr":{let t=(0,n.jsx)(n.Fragment,{}),s=(0,n.jsx)(n.Fragment,{}),l=e.matching;return null!==l&&(l.labels.length>0||l.on)&&(t=l.on?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"on"}),(0,n.jsx)("span",{children:"("}),P(l.labels),(0,n.jsx)("span",{children:")"})]}):(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"ignoring"}),(0,n.jsx)("span",{children:"("}),P(l.labels),(0,n.jsx)("span",{children:")"})]}),("many-to-one"===l.card||"one-to-many"===l.card)&&(s=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(q,{children:[" ","group_","many-to-one"===l.card?"left":"right"]}),(0,n.jsx)("span",{children:"("}),P(l.include),(0,n.jsx)("span",{children:")"})]}))),(0,n.jsxs)(n.Fragment,{children:[r&&D(k(e.op,e.lhs),r,a)," ",(["atan2","and","or","unless"].includes(e.op),(0,n.jsx)(U,{children:e.op})),e.bool&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(q,{children:"bool"})]}),t,s," ",r&&D(k(e.op,e.rhs),r,a)]})}case"placeholder":return Q;default:throw Error("unsupported node type")}})(e,r,t)}),G=(e,r,t)=>`${null!==e?` @ ${(e/1e3).toFixed(3)}`:null!==r?` @ ${r}()`:""}${0===t?"":t>0?` offset ${(0,L.a3)((0,L.eo)(t))}`:` offset -${(0,L.a3)((0,L.eo)(-t))}`}`,W=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=t?"\n":"",s=t?"\n":" ",l=r+2,i=t?" ".repeat(r):"",o=n?i:"";switch(e.type){case"aggregation":return`${o}${e.op}${e.without?` without(${e.grouping.join(", ")}) `:e.grouping.length>0?` by(${e.grouping.join(", ")}) `:""}(${a}${E.includes(e.op)&&null!==e.param?`${W(e.param,l,t)},${s}`:""}${W(e.expr,l,t)}${a}${i})`;case"subquery":return`${o}${W(e.expr,r,t)}[${(0,L.a3)((0,L.eo)(e.range))}:${0!==e.step?(0,L.a3)((0,L.eo)(e.step)):""}]${G(e.timestamp,e.startOrEnd,e.offset)}`;case"parenExpr":return`${o}(${a}${W(e.expr,l,t)}${a}${i})`;case"call":{let r=e.args.length>0?a:"";return`${o}${e.func.name}(${r}${e.args.map(e=>W(e,l,t)).join(","+s)}${r}${e.args.length>0?i:""})`}case"matrixSelector":case"vectorSelector":let c,d,p;return`${o}${c=e.matchers.filter(r=>"__name__"!==r.name||"="!==r.type||r.value!==e.name).map(e=>`${e.name}${e.type}"${e.value.replace(/([\\"])/g,"\\$1")}"`),d="matrixSelector"===e.type?`[${(0,L.a3)((0,L.eo)(e.range))}]`:"",p=G(e.timestamp,e.startOrEnd,e.offset),`${e.name}${c.length>0?`{${c.join(",")}}`:""}${d}${p}`}`;case"numberLiteral":return`${o}${e.val}`;case"stringLiteral":return`${o}"${e.val.replace(/([\\"])/g,"\\$1")}"`;case"unaryExpr":return`${o}${e.op}${W(e.expr,r,t,!1)}`;case"binaryExpr":{let r="",n="",a=e.matching;return null!==a&&(a.labels.length>0||a.on)&&(r=a.on?` on(${a.labels.join(", ")})`:` ignoring(${a.labels.join(", ")})`,("many-to-one"===a.card||"one-to-many"===a.card)&&(n=` group_${"many-to-one"===a.card?"left":"right"}(${a.include.join(",")})`)),`${W(k(e.op,e.lhs),l,t)}${s}${i}${e.op}${e.bool?" bool":""}${r}${n}${s}${W(k(e.op,e.rhs),l,t)}`}case"placeholder":return`${o}…${e.children.length>0?`(${a}${e.children.map(e=>W(e,l,t)).join(","+s)}${a}${i})`:""}`;default:throw Error("unsupported node type")}},Z={name:"last_over_time",argTypes:["matrix"],variadic:0,returnType:"vector"};function N(e){let{node:r,parentEl:t,reverse:a,datasource:s,childIdx:l,reportNodeState:c}=e,d=(0,i.A)(),p=(e=>{switch(e.type){case"aggregation":return null===e.param?[e.expr]:[e.param,e.expr];case"subquery":case"parenExpr":case"unaryExpr":return[e.expr];case"call":return e.args;case"matrixSelector":case"vectorSelector":case"numberLiteral":case"stringLiteral":return[];case"placeholder":return e.children;case"binaryExpr":return[e.lhs,e.rhs];default:throw Error("unsupported node type")}})(r),[u,x]=(0,h.useState)(null),m=(0,h.useCallback)(e=>x(e),[]),[g,f]=(0,h.useState)({numSeries:0,labelExamples:{},sortedLabelCards:[]}),[$,v]=(0,h.useState)({borderColor:d.palette.grey["500"],borderLeftStyle:"solid",borderLeftWidth:2,width:25,left:-25}),[A,w]=(0,h.useState)(p.map(()=>"waiting")),S=(0,h.useMemo)(()=>A.includes("error")?"error":A.includes("waiting")?"waiting":A.includes("running")?"running":"success",[A]),F=r;"matrixSelector"===F.type&&(F={type:"call",func:Z,args:[r]});let{data:k,isFetching:E,error:_}=function(e,r,t){let{data:n}=(0,j.useDatasourceClient)(r);return(0,y.useQuery)({enabled:!!n&&t,queryKey:["instantQuery",e,"datasource",r.kind],queryFn:async()=>{let r=performance.now(),t=await n.instantQuery({query:e}),a=performance.now()-r;return{...t,responseTime:a}}})}(W(F)??"",s,"success"===S);(0,h.useEffect)(()=>{c&&("error"===S||_?c(l,"error"):E&&c(l,"running"))},[S,_,E,c,l]);let L=(0,h.useCallback)((e,r)=>{w(t=>{let n=[...t];return n[e]=r,n})},[w]);(0,h.useLayoutEffect)(()=>{if(void 0===t||null===t||null===u)return;let e=t.getBoundingClientRect(),r=u.getBoundingClientRect();a?v(t=>({...t,top:"calc(50% - 1px)",bottom:r.bottom-e.top,borderTopLeftRadius:10,borderTopStyle:"solid",borderBottomLeftRadius:void 0})):v(t=>({...t,top:e.bottom-r.top,bottom:"calc(50% - 1px)",borderBottomLeftRadius:10,borderBottomStyle:"solid",borderTopLeftRadius:void 0}))},[t,u,a,m,v]),(0,h.useEffect)(()=>{if((null==k?void 0:k.status)!=="success")return;c&&c(l,"success");let e=0,r={},{resultType:t,result:n}=k.data;"scalar"===t||"string"===t?e=1:n&&n.length>0&&(e=n.length,n.forEach(e=>{Object.entries(e.metric).forEach(e=>{let[t,n]=e;"__name__"!==t&&(r[t]=r[t]??{},r[t][n]=(r[t][n]??0)+1)})}));let a={},s={};Object.entries(r).forEach(e=>{let[r,t]=e;a[r]=Object.keys(t).length,s[r]=Object.entries(t).sort((e,r)=>{let[,t]=e,[,n]=r;return n-t}).slice(0,10).map(e=>{let[r,t]=e;return{value:r,count:t}})}),f({numSeries:e,sortedLabelCards:Object.entries(a).sort((e,r)=>r[1]-e[1]),labelExamples:s})},[k,c,l]);let C=(0,n.jsxs)(o.A,{direction:"row",gap:2,children:[(0,n.jsxs)(b.A,{ref:m,sx:{position:"relative",display:"inline-block",padding:1,marginBottom:1.5,borderRadius:2,backgroundColor:d.palette.background.code},children:[void 0!==t&&(0,n.jsx)(b.A,{sx:{position:"absolute",display:"inline-block",...$}}),D(r,!1,1)]}),(0,n.jsx)(J,{mergedChildState:S,isFetching:E,error:_,resultStats:g,responseTime:null==k?void 0:k.responseTime})]});return"binaryExpr"===r.type?(0,n.jsxs)("div",{children:[(0,n.jsx)(b.A,{ml:5,children:(0,n.jsx)(N,{node:p[0],parentEl:u,reverse:!0,datasource:s,childIdx:0,reportNodeState:L})}),C,(0,n.jsx)(b.A,{ml:5,children:(0,n.jsx)(N,{node:p[1],parentEl:u,reverse:!1,datasource:s,childIdx:1,reportNodeState:L})})]}):(0,n.jsxs)("div",{children:[C,p.map((e,r)=>(0,n.jsx)(b.A,{ml:5,children:(0,n.jsx)(N,{node:e,parentEl:u,reverse:!1,datasource:s,childIdx:r,reportNodeState:L})},r))]})}function J(e){let{mergedChildState:r,isFetching:t,error:a,resultStats:s,responseTime:l}=e;return"waiting"===r?(0,n.jsx)(K,{text:"Waiting for child query"}):"running"===r?(0,n.jsx)(K,{text:"Running"}):"error"===r?(0,n.jsxs)(o.A,{children:[(0,n.jsx)(S.default,{}),"Blocked on child query error"]}):t?(0,n.jsx)(K,{text:"Loading"}):a?(0,n.jsxs)(b.A,{display:"flex",alignItems:"center",gap:1,sx:{color:e=>e.palette.error.main},marginBottom:1.5,children:[(0,n.jsx)(S.default,{}),(0,n.jsxs)($.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"Error executing query:"})," ",a.message]})]}):(0,n.jsxs)(o.A,{direction:"row",gap:1,alignItems:"center",marginBottom:1.5,children:[(0,n.jsxs)($.A,{variant:"body2",component:"span",sx:{color:e=>e.palette.grey[500]},children:[s.numSeries," result",1!==s.numSeries&&"s","\xa0\xa0–\xa0\xa0",l?`${Math.round(l)}ms`:"? ms",s.sortedLabelCards.length>0&&(0,n.jsx)(n.Fragment,{children:"\xa0\xa0–"})]}),s.sortedLabelCards.slice(0,10).map(e=>{var r;let[t,a]=e;return(0,n.jsx)(d.A,{title:(0,n.jsx)(b.A,{children:(0,n.jsxs)(v.A,{dense:!0,children:[null==(r=s.labelExamples[t])?void 0:r.map(e=>{let{value:r,count:t}=e;return(0,n.jsxs)(A.Ay,{sx:{display:"flex",gap:1,py:0,px:.5},children:[(0,n.jsx)(w.default,{sx:{fontSize:8}}),(0,n.jsx)($.A,{variant:"body2",component:"span",sx:{color:e=>"dark"===e.palette.mode?e.palette.warning.dark:e.palette.warning.main,fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexGrow:1},children:r.replace(/([\\"])/g,"\\$1")}),(0,n.jsxs)($.A,{variant:"body2",component:"span",sx:{whiteSpace:"nowrap",flexShrink:0},children:["(",t,"x)"]})]},r)}),a>10&&(0,n.jsxs)(A.Ay,{sx:{display:"flex",gap:1,py:0,px:.5},children:[(0,n.jsx)(w.default,{sx:{fontSize:8}}),(0,n.jsx)($.A,{variant:"body2",children:". . ."})]})]})}),arrow:!0,children:(0,n.jsxs)("span",{style:{cursor:"pointer",whiteSpace:"nowrap"},children:[(0,n.jsx)($.A,{variant:"body2",component:"span",sx:{fontFamily:"monospace",color:e=>e.palette.success.main},children:t}),(0,n.jsxs)($.A,{variant:"body2",component:"span",sx:{color:e=>e.palette.grey[500]},children:[": ",a]})]})},t)}),s.sortedLabelCards.length>10?(0,n.jsxs)($.A,{variant:"body2",children:["...",s.sortedLabelCards.length-10," more..."]}):null]})}function K(e){let{text:r}=e;return(0,n.jsxs)(b.A,{display:"flex",alignItems:"center",gap:1,marginBottom:1.5,children:[(0,n.jsx)(u.A,{size:16,color:"secondary"}),(0,n.jsxs)($.A,{variant:"body2",color:"text.secondary",children:[r,"..."]})]})}let H="Tree View",X="Open "+H,Y="Close "+H;function ee(e){let{completeConfig:r,datasource:t,isReadOnly:b,treeViewMetadata:$,...v}=e,A=(0,i.A)(),w="dark"===A.palette.mode,[S,F]=(0,h.useState)(!1),k=(0,h.useMemo)(()=>new s.TI().activateLinter(!1).setComplete(r).asExtension(),[r]),E=(0,j.useReplaceVariablesInString)(v.value);if(E&&$){let{minStepMs:e,intervalMs:r}=$;E=(0,f.J)(E,e,r)}let{data:_,isLoading:L,error:C}=function(e,r,t){let{data:n}=(0,j.useDatasourceClient)(r);return(0,y.useQuery)({enabled:!!n&&t,queryKey:["parseQuery",e,"datasource",r],queryFn:async()=>await n.parseQuery({query:e})})}(E??"",t,S);return(0,n.jsxs)(o.A,{position:"relative",children:[(0,n.jsx)(c.A,{shrink:!0,sx:{position:"absolute",top:"-12px",left:"10px",padding:"0 4px",color:A.palette.text.primary,zIndex:1},children:"PromQL Expression"}),(0,n.jsx)(a.Ay,{"data-testid":"promql_expression_editor",...v,style:{border:`1px solid ${A.palette.divider}`},theme:w?"dark":"light",readOnly:b??!1,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1,foldGutter:!1},extensions:[l.Lz.lineWrapping,k,l.Lz.theme({".cm-content":{paddingTop:"8px",paddingBottom:"8px",paddingRight:"40px"}})],placeholder:"Example: sum(rate(http_requests_total[5m]))"}),E&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{title:S?Y:X,children:(0,n.jsx)(p.A,{"aria-label":S?Y:X,onClick:()=>{F(!S)},sx:{position:"absolute",right:"5px",top:"5px"},size:"small",children:(0,n.jsx)(x.default,{sx:{fontSize:"18px"}})},"tree-view-button")}),S&&(0,n.jsxs)("div",{style:{border:`1px solid ${A.palette.divider}`,position:"relative"},children:[(0,n.jsx)(d.A,{title:Y,children:(0,n.jsx)(p.A,{"aria-label":Y,onClick:()=>F(!1),sx:{position:"absolute",top:"5px",right:"5px"},size:"small",children:(0,n.jsx)(g.default,{sx:{fontSize:"18px"}})},"tree-view-close-button")}),C?(0,n.jsx)(m.ErrorAlert,{error:{name:`${H} not available`,message:C.message}}):(0,n.jsx)("div",{style:{padding:`${A.spacing(1.5)} ${A.spacing(1.5)} 0 ${A.spacing(1.5)}`,overflowX:"auto",backgroundColor:A.palette.background.default},children:L?(0,n.jsx)(u.A,{}):(null==_?void 0:_.data)?(0,n.jsx)(N,{node:_.data,reverse:!1,childIdx:0,datasource:t}):null})]})]})]})}},3412:function(e,r,t){function n(e){let[r,t]=e;return[1e3*r,function(e){let r;switch(e){case"+Inf":r=1/0;break;case"-Inf":r=-1/0;break;default:r=parseFloat(e)}return r}(t)]}t.d(r,{OM:()=>p,l3:()=>c,Vx:()=>d,eU:()=>f.eU,_H:()=>i,z:()=>A,Ul:()=>u,bZ:()=>l,ZO:()=>f.ZO,mA:()=>x,gM:()=>o,lS:()=>n,hu:()=>f.hu,LY:()=>$,kG:()=>v,do:()=>f.do});var a=t(37856);function s(e,r){let t=r||new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;t.set(r,n)});let n=t.toString();return""!==n?`?${n}`:""}function l(e){return async()=>{let r=`${e.datasourceUrl}/-/healthy${s(e.queryParams)}`;try{let t=await (0,a.hd)(r,{headers:e.headers,signal:e.abortSignal});return 200===t.status}catch{return!1}}}function i(e,r){return m("/api/v1/query",e,r)}function o(e,r){return m("/api/v1/query_range",e,r)}function c(e,r){return m("/api/v1/labels",e,r)}function d(e,r){let{labelName:t,...n}=e;return 0===t.length?new Promise(e=>{e({data:[]})}):h(`/api/v1/label/${encodeURIComponent(t)}/values`,n,r)}function p(e,r){return h("/api/v1/metadata",e,r)}function u(e,r){return m("/api/v1/series",e,r)}function x(e,r){return m("/api/v1/parse_query",e,r)}function h(e,r,t){let{datasourceUrl:n,headers:l,queryParams:i}=t,o=`${n}${e}${s(i,g(r))}`;return(0,a.x6)(o,{method:"GET",headers:l})}function m(e,r,t){let{datasourceUrl:n,headers:a,abortSignal:l,queryParams:i}=t;return j(`${n}${e}${s(i)}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",...a},signal:l,body:g(r)})}function g(e){let r=new URLSearchParams;for(let t in e){let n=e[t];if(void 0!==n){if("string"==typeof n){r.append(t,n);continue}if("number"==typeof n){r.append(t,n.toString());continue}for(let e of n)r.append(t,e)}}return r}async function j(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let n=await (0,a.hd)(...r);return{...await n.json(),rawResponse:n}}var f=t(24381),y=t(69791),b=t(94461);function $(e){let{start:r,end:t}=e;return{start:Math.ceil((0,b.getUnixTime)(r)),end:Math.ceil((0,b.getUnixTime)(t))}}function v(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=(e.end-e.start)/1e4;return a>1&&(a=Math.ceil(a)),Math.max(n/1e3*t,r,a)}function A(e){if(!e)return;let r=(0,y.pW)(e);return Math.floor((0,b.milliseconds)(r)/1e3)}},24381:function(e,r,t){t.d(r,{ZO:()=>i,do:()=>l,eU:()=>a,hu:()=>s});var n=t(57744);let a="PrometheusDatasource",s={kind:a};function l(e){return!(0,n.isVariableDatasource)(e)&&void 0===e.name}function i(e){return(0,n.isVariableDatasource)(e)||e.kind===a}},68616:function(e,r,t){t.d(r,{J:()=>s});var n=t(57744),a=t(69791);function s(e,r,t){let s=(0,n.replaceVariable)(e,"__interval_ms",t.toString());s=(0,n.replaceVariable)(s,"__interval",(0,a.a3)((0,a.eo)(t)));let l=Math.max(t+r,4*r);return(0,n.replaceVariable)(s,"__rate_interval",(0,a.a3)((0,a.eo)(l)))}}}]);