{"version":3,"sources":["../../../src/utils/utils.ts"],"sourcesContent":["// Copyright 2025 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { produce } from 'immer';\nimport { ChangeEventHandler } from 'react';\nimport { FlameChartOptionsEditorProps } from '../flame-chart-model';\n\n/**\n * Hook to manage `palette` state.\n */\nexport function usePaletteState(props: FlameChartOptionsEditorProps): {\n  handlePaletteChange: (newPalette: 'package-name' | 'value') => void;\n} {\n  const { onChange, value } = props;\n\n  const handlePaletteChange = (newPalette: 'package-name' | 'value'): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.palette = newPalette;\n      })\n    );\n  };\n\n  return { handlePaletteChange };\n}\n\n/**\n * Hook to manage `traceHeight` state.\n */\nexport function useTraceHeightState(props: FlameChartOptionsEditorProps): {\n  handleTraceHeightChange: ChangeEventHandler<HTMLInputElement>;\n} {\n  const { onChange, value } = props;\n\n  const handleTraceHeightChange: ChangeEventHandler<HTMLInputElement> = (event): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.traceHeight = event.target.value ? Number(event.target.value) : undefined;\n      })\n    );\n  };\n\n  return { handleTraceHeightChange };\n}\n\n/**\n * Hook to manage `showSettings` state.\n */\nexport function useShowSettingsState(props: FlameChartOptionsEditorProps): {\n  handleShowSettingsChange: (newValue: boolean) => void;\n} {\n  const { onChange, value } = props;\n\n  const handleShowSettingsChange = (newValue: boolean): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.showSettings = newValue;\n      })\n    );\n  };\n\n  return { handleShowSettingsChange };\n}\n\n/**\n * Hook to manage `showSeries` state.\n */\nexport function useShowSeriesState(props: FlameChartOptionsEditorProps): {\n  handleShowSeriesChange: (newValue: boolean) => void;\n} {\n  const { onChange, value } = props;\n\n  const handleShowSeriesChange = (newValue: boolean): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.showSeries = newValue;\n      })\n    );\n  };\n\n  return { handleShowSeriesChange };\n}\n\n/**\n * Hook to manage `showTable` state.\n */\nexport function useShowTableState(props: FlameChartOptionsEditorProps): {\n  handleShowTableChange: (newValue: boolean) => void;\n} {\n  const { onChange, value } = props;\n\n  const handleShowTableChange = (newValue: boolean): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.showTable = newValue;\n      })\n    );\n  };\n\n  return { handleShowTableChange };\n}\n\n/**\n * Hook to manage `showFlameGraph` state.\n */\nexport function useShowFlameGraphState(props: FlameChartOptionsEditorProps): {\n  handleShowFlameGraphChange: (newValue: boolean) => void;\n} {\n  const { onChange, value } = props;\n\n  const handleShowFlameGraphChange = (newValue: boolean): void => {\n    onChange(\n      produce(value, (draft) => {\n        draft.showFlameGraph = newValue;\n      })\n    );\n  };\n\n  return { handleShowFlameGraphChange };\n}\n\n/**\n * Reset all settings to their initial values\n */\nexport function resetSettings(props: FlameChartOptionsEditorProps): void {\n  const { onChange, value } = props;\n\n  onChange(\n    produce(value, (draft) => {\n      draft.palette = 'package-name';\n      draft.showSettings = true;\n      draft.showSeries = false;\n      draft.showTable = true;\n      draft.showFlameGraph = true;\n    })\n  );\n}\n"],"names":["produce","usePaletteState","props","onChange","value","handlePaletteChange","newPalette","draft","palette","useTraceHeightState","handleTraceHeightChange","event","traceHeight","target","Number","undefined","useShowSettingsState","handleShowSettingsChange","newValue","showSettings","useShowSeriesState","handleShowSeriesChange","showSeries","useShowTableState","handleShowTableChange","showTable","useShowFlameGraphState","handleShowFlameGraphChange","showFlameGraph","resetSettings"],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAEjC,SAASA,OAAO,QAAQ,QAAQ;AAIhC;;CAEC,GACD,OAAO,SAASC,gBAAgBC,KAAmC;IAGjE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMG,sBAAsB,CAACC;QAC3BH,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMC,OAAO,GAAGF;QAClB;IAEJ;IAEA,OAAO;QAAED;IAAoB;AAC/B;AAEA;;CAEC,GACD,OAAO,SAASI,oBAAoBP,KAAmC;IAGrE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMQ,0BAAgE,CAACC;QACrER,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMK,WAAW,GAAGD,MAAME,MAAM,CAACT,KAAK,GAAGU,OAAOH,MAAME,MAAM,CAACT,KAAK,IAAIW;QACxE;IAEJ;IAEA,OAAO;QAAEL;IAAwB;AACnC;AAEA;;CAEC,GACD,OAAO,SAASM,qBAAqBd,KAAmC;IAGtE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMe,2BAA2B,CAACC;QAChCf,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMY,YAAY,GAAGD;QACvB;IAEJ;IAEA,OAAO;QAAED;IAAyB;AACpC;AAEA;;CAEC,GACD,OAAO,SAASG,mBAAmBlB,KAAmC;IAGpE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMmB,yBAAyB,CAACH;QAC9Bf,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMe,UAAU,GAAGJ;QACrB;IAEJ;IAEA,OAAO;QAAEG;IAAuB;AAClC;AAEA;;CAEC,GACD,OAAO,SAASE,kBAAkBrB,KAAmC;IAGnE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMsB,wBAAwB,CAACN;QAC7Bf,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMkB,SAAS,GAAGP;QACpB;IAEJ;IAEA,OAAO;QAAEM;IAAsB;AACjC;AAEA;;CAEC,GACD,OAAO,SAASE,uBAAuBxB,KAAmC;IAGxE,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5B,MAAMyB,6BAA6B,CAACT;QAClCf,SACEH,QAAQI,OAAO,CAACG;YACdA,MAAMqB,cAAc,GAAGV;QACzB;IAEJ;IAEA,OAAO;QAAES;IAA2B;AACtC;AAEA;;CAEC,GACD,OAAO,SAASE,cAAc3B,KAAmC;IAC/D,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAE,GAAGF;IAE5BC,SACEH,QAAQI,OAAO,CAACG;QACdA,MAAMC,OAAO,GAAG;QAChBD,MAAMY,YAAY,GAAG;QACrBZ,MAAMe,UAAU,GAAG;QACnBf,MAAMkB,SAAS,GAAG;QAClBlB,MAAMqB,cAAc,GAAG;IACzB;AAEJ"}