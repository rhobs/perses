{"version":3,"sources":["../../../src/model/api-types.ts"],"sourcesContent":["// Copyright 2025 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { otlpcommonv1, otlptracev1 } from '@perses-dev/core';\n\n/**\n * Request parameters of Tempo HTTP API endpoint GET /api/search\n * https://grafana.com/docs/tempo/latest/api_docs/#search\n */\nexport interface SearchRequestParameters {\n  q: string;\n  start?: number;\n  end?: number;\n  /** max number of search results, default: 20 */\n  limit?: number;\n  /** max number of matching spans per trace in search result, default: 3 */\n  spss?: number;\n}\n\nexport const DEFAULT_SEARCH_LIMIT = 20;\n\n/**\n * Response of Tempo HTTP API endpoint GET /api/search\n * https://grafana.com/docs/tempo/latest/api_docs/#search\n */\nexport interface SearchResponse {\n  traces: TraceSearchResponse[];\n}\n\nexport interface TraceSearchResponse {\n  traceID: string;\n  rootServiceName: string;\n  rootTraceName: string;\n  startTimeUnixNano: string;\n  /** unset if duration is less than 1ms */\n  durationMs?: number;\n  /** @deprecated spanSet is deprecated in favor of spanSets */\n  spanSet?: {\n    spans: SpanSearchResponse[];\n    matched: number;\n  };\n  spanSets?: Array<{\n    spans: SpanSearchResponse[];\n    matched: number;\n  }>;\n  /** ServiceStats are only available in Tempo vParquet4+ blocks */\n  serviceStats?: Record<string, ServiceStats>;\n}\n\nexport interface SpanSearchResponse {\n  spanID: string;\n  name?: string;\n  startTimeUnixNano: string;\n  durationNanos: string;\n  attributes?: otlpcommonv1.KeyValue[];\n}\n\nexport interface ServiceStats {\n  spanCount: number;\n  /** number of spans with errors, unset if zero */\n  errorCount?: number;\n}\n\n/**\n * Request parameters of Tempo HTTP API endpoint GET /api/traces/<traceID>\n * https://grafana.com/docs/tempo/latest/api_docs/#query\n */\nexport interface QueryRequestParameters {\n  traceId: string;\n}\n\n/**\n * Response of Tempo HTTP API endpoint GET /api/traces/<traceID>\n * OTEL trace proto: https://github.com/open-telemetry/opentelemetry-proto-go/blob/main/otlp/trace/v1/trace.pb.go\n */\nexport interface QueryResponse {\n  batches: otlptracev1.ResourceSpan[];\n}\n\n/**\n * Request parameters of Tempo HTTP API endpoint GET /api/v2/search/tags\n * https://grafana.com/docs/tempo/latest/api_docs/#search-tags-v2\n */\nexport interface SearchTagsRequestParameters {\n  scope?: 'resource' | 'span' | 'intrinsic';\n  q?: string;\n  start?: number;\n  end?: number;\n  limit?: number;\n  maxStaleValues?: number;\n}\n\n/**\n * Response of Tempo HTTP API endpoint GET /api/v2/search/tags\n * https://grafana.com/docs/tempo/latest/api_docs/#search-tags-v2\n */\nexport interface SearchTagsResponse {\n  scopes: SearchTagsScope[];\n}\n\nexport interface SearchTagsScope {\n  name: 'resource' | 'span' | 'intrinsic';\n  tags: string[];\n}\n\n/**\n * Request parameters of Tempo HTTP API endpoint GET /api/v2/search/tag/<tag>/values\n * https://grafana.com/docs/tempo/latest/api_docs/#search-tag-values-v2\n */\nexport interface SearchTagValuesRequestParameters {\n  tag: string;\n  q?: string;\n  start?: number;\n  end?: number;\n  limit?: number;\n  maxStaleValues?: number;\n}\n\n/**\n * Response of Tempo HTTP API endpoint GET /api/v2/search/tag/<tag>/values\n * https://grafana.com/docs/tempo/latest/api_docs/#search-tag-values-v2\n */\nexport interface SearchTagValuesResponse {\n  tagValues: SearchTagValue[];\n}\n\nexport interface SearchTagValue {\n  type: string;\n  /** The tag value. Empty strings are omitted (i.e. undefined) in the response. */\n  value?: string;\n}\n"],"names":["DEFAULT_SEARCH_LIMIT"],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAkBjC,OAAO,MAAMA,uBAAuB,GAAG"}