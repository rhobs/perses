/*! For license information please see __federation_expose_VictoriaLogsDatasource.adbfa9d6.js.LICENSE.txt */
"use strict";(self.chunk_VictoriaLogs=self.chunk_VictoriaLogs||[]).push([["4090"],{2192:function(e,t,r){var n=r(70451),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var n,s={},d=null,c=null;for(n in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:d,ref:c,props:s,_owner:i.current}}t.Fragment=s,t.jsx=d,t.jsxs=d},62540:function(e,t,r){e.exports=r(2192)},29867:function(e,t,r){function n(e,t){if(t.startsWith("http://")||t.startsWith("https://"))return new URL(e,t);return new URL(t.endsWith("/")&&e.startsWith("/")?t+e.slice(1):t.endsWith("/")||e.startsWith("/")?t+e:t+"/"+e,window.location.origin)}async function o(e,t){let r=n("/select/logsql/query",t.datasourceUrl),o={query:e.query,start:e.start,end:e.end};(null==e?void 0:e.limit)&&(o.limit=e.limit.toString()),(null==e?void 0:e.offset)&&(o.offset=e.offset.toString());let s=new URLSearchParams(o).toString(),a=await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/stream+json",...t.headers},body:s});if(200!==a.status)throw Error(await a.text());let i=[];if(!(null==a?void 0:a.body))return i;let l=a.body.getReader(),d=new TextDecoder("utf-8"),c="";for(;;){let{value:e,done:t}=await l.read();if(t)break;let r=(c+=d.decode(e,{stream:!0})).indexOf("\n");for(;-1!==r;){let e=c.slice(0,r);c=c.slice(r+1),i.push(JSON.parse(e)),r=c.indexOf("\n")}}return c.trim().length>0&&i.push(JSON.parse(c)),i}async function s(e,t){let r=n("/select/logsql/stats_query_range",t.datasourceUrl),o={query:e.query,start:e.start,end:e.end};(null==e?void 0:e.step)&&(o.step=e.step.toString());let s=new URLSearchParams(o).toString(),a=await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",...t.headers},body:s});return await a.json()}async function a(e,t){let r=n("/select/logsql/field_names",t.datasourceUrl),o={query:e.query};e.start&&(o.start=e.start),e.end&&(o.end=e.end);let s=new URLSearchParams(o).toString(),a=await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",...t.headers},body:s});return await a.json()}async function i(e,t){let r=n("/select/logsql/field_values",t.datasourceUrl),o={query:e.query,field:e.field};e.start&&(o.start=e.start),e.end&&(o.end=e.end);let s=new URLSearchParams(o).toString(),a=await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",...t.headers},body:s});return await a.json()}r.r(t),r.d(t,{VictoriaLogsDatasource:()=>u,VictoriaLogsDatasourceEditor:()=>c});var l=r(62540),d=r(57744);function c(e){let{value:t,onChange:r,isReadonly:n}=e;return(0,l.jsx)(d.HTTPSettingsEditor,{value:t,onChange:r,isReadonly:n,initialSpecDirect:{directUrl:""},initialSpecProxy:{proxy:{kind:"HTTPProxy",spec:{allowedEndpoints:[{endpointPattern:"/select/logsql/stats_query",method:"POST"},{endpointPattern:"/select/logsql/stats_query_range",method:"POST"},{endpointPattern:"/select/logsql/field_names",method:"POST"},{endpointPattern:"/select/logsql/field_values",method:"POST"},{endpointPattern:"/select/logsql/tail",method:"POST"},{endpointPattern:"/select/logsql/query",method:"POST"},{endpointPattern:"/select/logsql/hits",method:"POST"},{endpointPattern:"/select/logsql/facets",method:"POST"},{endpointPattern:"/select/logsql/stream_ids",method:"POST"},{endpointPattern:"/select/logsql/streams",method:"POST"},{endpointPattern:"/select/logsql/stream_field_names",method:"POST"},{endpointPattern:"/select/logsql/stream_field_values",method:"POST"}],url:""}}}})}let u={createClient:(e,t)=>{let{directUrl:r,proxy:n}=e,{proxyUrl:l}=t,d=r??l;if(void 0===d)throw Error("No URL specified for VictoriaLogs client. You can use directUrl in the spec to configure it.");let c=null==n?void 0:n.spec.headers;return{options:{datasourceUrl:d},streamQueryRange:(e,t)=>o(e,{datasourceUrl:d,headers:t??c}),statsQueryRange:(e,t)=>s(e,{datasourceUrl:d,headers:t??c}),fieldNames:(e,t)=>a(e,{datasourceUrl:d,headers:t??c}),fieldValues:(e,t)=>i(e,{datasourceUrl:d,headers:t??c})}},OptionsEditorComponent:c,createInitialOptions:()=>({directUrl:""})}}}]);