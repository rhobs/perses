/*! For license information please see __federation_expose_VictoriaLogsFieldNamesVariable.811acc9e.js.LICENSE.txt */
"use strict";(self.chunk_VictoriaLogs=self.chunk_VictoriaLogs||[]).push([["3859"],{2192:function(e,a,r){var t=r(70451),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,a,r){var t,s={},l=null,c=null;for(t in void 0!==r&&(l=""+r),void 0!==a.key&&(l=""+a.key),void 0!==a.ref&&(c=a.ref),a)i.call(a,t)&&!u.hasOwnProperty(t)&&(s[t]=a[t]);if(e&&e.defaultProps)for(t in a=e.defaultProps)void 0===s[t]&&(s[t]=a[t]);return{$$typeof:o,type:e,key:l,ref:c,props:s,_owner:n.current}}a.Fragment=s,a.jsx=l,a.jsxs=l},62540:function(e,a,r){e.exports=r(2192)},50095:function(e,a,r){r.d(a,{H6:()=>n,m_:()=>o,fZ:()=>i,jx:()=>s});var t=r(57744);let o="VictoriaLogsDatasource",s={kind:o};function i(e){return!(0,t.isVariableDatasource)(e)&&void 0===e.name}function n(e){return(0,t.isVariableDatasource)(e)||e.kind===o}},92229:function(e,a,r){r.d(a,{Iq:()=>s,RG:()=>i,gZ:()=>n});var t=r(57744),o=r(91807);let s=e=>e?e.map(e=>({value:e.value,label:e.value})):[];function i(e){let{start:a,end:r}=e;return{start:a.toISOString(),end:r.toISOString()}}function n(e,a){let{absoluteTimeRange:{start:r,end:s}}=(0,t.useTimeRange)(),{data:i}=(0,t.useDatasourceClient)(a),n=!!i&&!!e;return(0,o.useQuery)({enabled:n,queryKey:["datasource",a.name,"query",e],queryFn:async()=>await i.fieldNames({start:r.toISOString(),end:s.toISOString(),query:e})})}},84704:function(e,a,r){r.r(a),r.d(a,{VictoriaLogsFieldNamesVariable:()=>f});var t=r(57744),o=r(50095),s=r(62540),i=r(315),n=r(67987),u=r(93648),l=r(38662),c=r(70451),d=r(92229);let f={getVariableOptions:async(e,a)=>{let r=(0,t.datasourceSelectValueToSelector)(e.datasource??o.jx,a.variables,await a.datasourceStore.listDatasourceSelectItems(o.m_))??o.jx,s=await a.datasourceStore.getDatasourceClient(r),i=(0,d.RG)(a.timeRange),n=(0,t.replaceVariables)(e.query,a.variables),{values:u}=n?await s.fieldNames({query:n,...i}):{values:[]};return{data:(0,d.Iq)(u)}},dependsOn:e=>({variables:[...(0,t.parseVariables)(e.query),...e.datasource&&(0,t.isVariableDatasource)(e.datasource)?(0,t.parseVariables)(e.datasource):[]]}),OptionsEditorComponent:function(e){let{onChange:a,value:r,value:{datasource:d,query:f}}=e,y=d??o.jx,p=(0,t.useDatasourceSelectValueToSelector)(y,o.m_),b=(0,c.useCallback)(e=>{if((0,t.isVariableDatasource)(e)||(0,o.H6)(e))return void a((0,l.jM)(r,a=>{a.datasource=!(0,t.isVariableDatasource)(e)&&(0,o.fZ)(e)?void 0:e}));throw Error("Got unexpected non-VictoriaLogs datasource selector")},[a,r]),g=(0,c.useCallback)(e=>{a((0,l.jM)(r,a=>{a.query=e.target.value}))},[a,r]);return(0,s.jsxs)(i.A,{spacing:2,children:[(0,s.jsx)(n.A,{margin:"dense",children:(0,s.jsx)(t.DatasourceSelect,{datasourcePluginKind:"VictoriaLogsDatasource",value:p,onChange:b,disabled:e.isReadonly,labelId:"victorialogs-datasource-field",label:"VictoriaLogs Datasource"})}),(0,s.jsx)(u.A,{label:"Query",InputLabelProps:{shrink:!!e.isReadonly||void 0},InputProps:{readOnly:e.isReadonly},value:f,onChange:g})]})},createInitialOptions:()=>({query:""})}}}]);