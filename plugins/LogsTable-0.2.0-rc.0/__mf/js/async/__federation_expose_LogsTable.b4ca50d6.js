"use strict";(self.chunk_LogsTable=self.chunk_LogsTable||[]).push([["7764"],{39098:function(e,t,r){r.d(t,{A:()=>b});var n=r(70451),i=r(11750),o=r(46477),a=r(3725),l=r(81023),s=r(77308),d=r(56599),p=r(23434),u=r(72052),x=r(48927),c=r(32494),h=r(29424),g=r(29009),m=r(46733);function w(e){return(0,m.Ay)("MuiCollapse",e)}(0,g.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var f=r(62540);let y=(0,s.A)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})((0,p.A)(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>"exited"===e.state&&!e.in&&"0px"===e.collapsedSize,style:{visibility:"hidden"}}]}))),v=(0,s.A)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),A=(0,s.A)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),j=n.forwardRef(function(e,t){let r=(0,u.b)({props:e,name:"MuiCollapse"}),{addEndListener:s,children:p,className:g,collapsedSize:m="0px",component:j,easing:b,in:C,onEnter:S,onEntered:E,onEntering:k,onExit:z,onExited:T,onExiting:I,orientation:D="vertical",style:$,timeout:O=x.p0.standard,TransitionComponent:R=o.Ay,...W}=r,L={...r,orientation:D,collapsedSize:m},F=(e=>{let{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,l.A)(n,w,r)})(L),M=(0,d.A)(),N=(0,a.A)(),H=n.useRef(null),P=n.useRef(),B="number"==typeof m?`${m}px`:m,Q="horizontal"===D,_=Q?"width":"height",G=n.useRef(null),V=(0,h.A)(t,G),X=e=>t=>{if(e){let r=G.current;void 0===t?e(r):e(r,t)}},Y=()=>H.current?H.current[Q?"clientWidth":"clientHeight"]:0,q=X((e,t)=>{H.current&&Q&&(H.current.style.position="absolute"),e.style[_]=B,S&&S(e,t)}),J=X((e,t)=>{let r=Y();H.current&&Q&&(H.current.style.position="");let{duration:n,easing:i}=(0,c.c)({style:$,timeout:O,easing:b},{mode:"enter"});if("auto"===O){let t=M.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,P.current=t}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[_]=`${r}px`,e.style.transitionTimingFunction=i,k&&k(e,t)}),K=X((e,t)=>{e.style[_]="auto",E&&E(e,t)}),U=X(e=>{e.style[_]=`${Y()}px`,z&&z(e)}),Z=X(T),ee=X(e=>{let t=Y(),{duration:r,easing:n}=(0,c.c)({style:$,timeout:O,easing:b},{mode:"exit"});if("auto"===O){let r=M.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,P.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[_]=B,e.style.transitionTimingFunction=n,I&&I(e)});return(0,f.jsx)(R,{in:C,onEnter:q,onEntered:K,onEntering:J,onExit:U,onExited:Z,onExiting:ee,addEndListener:e=>{"auto"===O&&N.start(P.current||0,e),s&&s(G.current,e)},nodeRef:G,timeout:"auto"===O?null:O,...W,children:(e,{ownerState:t,...r})=>(0,f.jsx)(y,{as:j,className:(0,i.A)(F.root,g,{entered:F.entered,exited:!C&&"0px"===B&&F.hidden}[e]),style:{[Q?"minWidth":"minHeight"]:B,...$},ref:V,ownerState:{...L,state:e},...r,children:(0,f.jsx)(v,{ownerState:{...L,state:e},className:F.wrapper,ref:H,children:(0,f.jsx)(A,{ownerState:{...L,state:e},className:F.wrapperInner,children:p})})})})});j&&(j.muiSupportAuto=!0);let b=j},57841:function(e,t,r){r.r(t),r.d(t,{LogsTable:()=>D});var n=r(62540),i=r(88091),o=r(70451),a=r(56599),l=r(74628);let s=e=>{let{message:t="No logs to display"}=e,r=(0,a.A)();return(0,n.jsx)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"},children:(0,n.jsx)(i.A,{variant:"body2",sx:{color:r.palette.text.secondary,fontSize:"14px"},children:t})})};var d=r(74649),p=r(39098),u=r(11061);let x={critical:["critical","emerg","fatal","alert","crit"],error:["error","err","eror"],debug:["debug","dbug"],info:["info","inf","information","notice"],trace:["trace"],warning:["warn","warning"],unknown:["unknown"],other:[""]},c=e=>{let{timestamp:t}=e,r="number"==typeof t?new Date(1e3*t):new Date(/^\d+$/.test(t)?1e3*parseInt(t):Date.parse(t));return(0,n.jsx)("time",{style:{fontSize:"12px",whiteSpace:"nowrap",minWidth:"max-content"},dateTime:r.toISOString(),children:r.toISOString()})};var h=r(77308),g=r(47095);let m=(0,h.A)(l.A,{shouldForwardProp:e=>"severityColor"!==e})(e=>{let{severityColor:t}=e;return{borderLeft:`4px solid ${t}`,transition:"all 0.2s ease",marginBottom:"4px",fontFamily:'"DejaVu Sans Mono", monospace'}}),w=(0,h.A)(l.A,{shouldForwardProp:e=>"isExpandable"!==e})(e=>{let{theme:t,isExpandable:r}=e;return{display:"grid",gridTemplateColumns:r?"16px minmax(160px, max-content) 1fr":"minmax(160px, max-content) 1fr",alignItems:"flex-start",padding:"4px 8px",cursor:r?"pointer":"default",gap:"12px","&:hover":{backgroundColor:t.palette.action.hover}}}),f=(0,h.A)(g.A,{shouldForwardProp:e=>"isExpanded"!==e})(e=>{let{theme:t,isExpanded:r}=e;return{padding:0,width:"16px",height:"16px",color:t.palette.text.secondary,transform:r?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),y=(0,h.A)(i.A,{shouldForwardProp:e=>"allowWrap"!==e})(e=>{let{allowWrap:t}=e;return{fontSize:"12px",flex:1,lineHeight:1.4,textAlign:"left",...t?{wordBreak:"break-word",whiteSpace:"pre-wrap",overflow:"visible",textOverflow:"unset"}:{wordBreak:"normal",whiteSpace:"nowrap"}}});var v=r(91394),A=r(5139),j=r(3399),b=r(59238),C=r(45271);let S=e=>{let{log:t}=e,r=(0,a.A)();return(0,n.jsx)(v.A,{size:"small",sx:{border:`1px solid ${r.palette.divider}`,"& .MuiTableCell-root":{border:"none",padding:"6px 8px",fontSize:"12px"}},children:(0,n.jsx)(A.A,{children:Object.entries(t).map(e=>{let[t,i]=e;return(0,n.jsxs)(j.A,{sx:{"&:hover":{backgroundColor:(0,b.X4)(r.palette.action.hover,.04)}},children:[(0,n.jsx)(C.A,{sx:{color:r.palette.text.secondary,fontWeight:500,width:"33%"},children:t}),(0,n.jsx)(C.A,{sx:{color:r.palette.text.primary,wordBreak:"break-word",width:"67%"},children:null!=i&&""!==i?i:"--"})]},t)})})})},E=(0,o.memo)(e=>{let{log:t,isExpanded:r,index:i,onToggle:s,isExpandable:d=!0,showTime:h=!1,allowWrap:g=!1}=e,v=(e=>{let t=(0,a.A)();if(!e)return t.palette.text.secondary;switch((e=>{var t,r;let n=null==(r=e.labels)||null==(t=r.level)?void 0:t.toLowerCase();if(n){for(let[e,t]of Object.entries(x))if(t.some(e=>e&&n.includes(e)))return e}return"unknown"})(e)){case"critical":return t.palette.error.dark;case"error":return t.palette.error.main;case"warning":return t.palette.warning.main;case"info":return t.palette.info.main;case"debug":return t.palette.primary.main;case"trace":return t.palette.grey[500];default:return t.palette.text.secondary}})(t),A=(0,o.useCallback)(()=>{d&&s(i)},[d,s,i]);return t?(0,n.jsxs)(m,{severityColor:v,children:[(0,n.jsxs)(w,{onClick:A,isExpandable:d,children:[d&&(0,n.jsx)(l.A,{sx:{display:"flex",alignItems:"center",width:"16px",justifyContent:"center"},children:(0,n.jsx)(f,{size:"small",isExpanded:r,children:(0,n.jsx)(u.default,{sx:{fontSize:"12px"}})})}),(0,n.jsx)(c,{timestamp:t.timestamp}),(0,n.jsx)(l.A,{sx:{display:"flex",gap:"10px",marginLeft:"36px"},children:(0,n.jsx)(y,{variant:"body2",allowWrap:g,children:t.line})})]}),(0,n.jsx)(p.A,{in:r,timeout:200,children:(0,n.jsx)(l.A,{sx:{padding:"8px"},children:(0,n.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:h?"8px minmax(160px, max-content) 1fr":"1fr",gap:"12px"},children:[h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{}),(0,n.jsx)(l.A,{})]}),(0,n.jsx)(l.A,{children:(0,n.jsx)(S,{log:t.labels})})]})})})]}):null});E.displayName="LogRow";let k=e=>{let{logs:t,spec:r,expandedRows:i,onToggleExpand:o}=e,s=(0,a.A)();return(0,n.jsx)(l.A,{sx:{height:"100%",backgroundColor:s.palette.background.default,overflow:"hidden",boxShadow:s.shadows[1]},children:(0,n.jsx)(d.aY,{style:{height:"100%"},initialItemCount:r.showAll?t.length:void 0,totalCount:t.length,itemContent:e=>{let a=t[e];return a?(0,n.jsx)(E,{isExpandable:r.enableDetails,log:a,index:e,isExpanded:i.has(e),onToggle:o,allowWrap:r.allowWrap,showTime:r.showTime}):null}})})},z=e=>{let{logs:t,spec:r}=e,{expandedRows:i,toggleExpand:a}=(()=>{let[e,t]=(0,o.useState)(new Set);return{expandedRows:e,toggleExpand:(0,o.useCallback)(e=>{t(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),clearExpanded:(0,o.useCallback)(()=>{t(new Set)},[])}})();return t.length?(0,n.jsx)(k,{logs:t,spec:r,expandedRows:i,onToggleExpand:a}):(0,n.jsx)(s,{})};var T=r(37266),I=r(57744);let D={PanelComponent:function(e){var t,r;let{queryResults:o,spec:a}=e;if((null==(t=o[0])?void 0:t.data.logs)===void 0)return(0,n.jsx)(i.A,{variant:"h3",sx:{textAlign:"center",marginTop:4},children:"No logs to display"});let l=null==(r=o[0])?void 0:r.data.logs.entries;return(0,n.jsx)(z,{logs:l,spec:a})},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:r}=e;return(0,n.jsxs)(T.OptionsEditorGrid,{children:[(0,n.jsx)(T.OptionsEditorColumn,{children:(0,n.jsx)(I.LegendOptionsEditor,{value:r.legend,onChange:e=>{t({...r,legend:e})}})}),(0,n.jsx)(T.OptionsEditorColumn,{children:(0,n.jsx)(T.ThresholdsEditor,{hideDefault:!0,thresholds:r.thresholds,onChange:e=>{t({...r,thresholds:e})}})})]})}}],supportedQueryTypes:["LogQuery"],createInitialOptions:()=>({showTime:!0,allowWrap:!0,enableDetails:!0})}}}]);