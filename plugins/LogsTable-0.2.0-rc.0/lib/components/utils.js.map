{"version":3,"sources":["../../../src/components/utils.ts"],"sourcesContent":["// Copyright 2025 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { LogEntry } from '@perses-dev/core';\n\nexport type Severity = 'critical' | 'error' | 'warning' | 'info' | 'debug' | 'trace' | 'unknown' | 'other';\n\nexport const severityAbbreviations: Record<Severity, string[]> = {\n  critical: ['critical', 'emerg', 'fatal', 'alert', 'crit'],\n  error: ['error', 'err', 'eror'],\n  debug: ['debug', 'dbug'],\n  info: ['info', 'inf', 'information', 'notice'],\n  trace: ['trace'],\n  warning: ['warn', 'warning'],\n  unknown: ['unknown'],\n  other: [''],\n};\n\nexport const getSeverity = (log: LogEntry): Severity => {\n  const level = log.labels?.level?.toLowerCase();\n\n  if (level) {\n    for (const [severity, abbreviations] of Object.entries(severityAbbreviations)) {\n      if (abbreviations.some((abbr) => abbr && level.includes(abbr))) {\n        return severity as Severity;\n      }\n    }\n  }\n\n  return 'unknown';\n};\n"],"names":["severityAbbreviations","critical","error","debug","info","trace","warning","unknown","other","getSeverity","log","level","labels","toLowerCase","severity","abbreviations","Object","entries","some","abbr","includes"],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAMjC,OAAO,MAAMA,wBAAoD;IAC/DC,UAAU;QAAC;QAAY;QAAS;QAAS;QAAS;KAAO;IACzDC,OAAO;QAAC;QAAS;QAAO;KAAO;IAC/BC,OAAO;QAAC;QAAS;KAAO;IACxBC,MAAM;QAAC;QAAQ;QAAO;QAAe;KAAS;IAC9CC,OAAO;QAAC;KAAQ;IAChBC,SAAS;QAAC;QAAQ;KAAU;IAC5BC,SAAS;QAAC;KAAU;IACpBC,OAAO;QAAC;KAAG;AACb,EAAE;AAEF,OAAO,MAAMC,cAAc,CAACC;IAC1B,MAAMC,QAAQD,IAAIE,MAAM,EAAED,OAAOE;IAEjC,IAAIF,OAAO;QACT,KAAK,MAAM,CAACG,UAAUC,cAAc,IAAIC,OAAOC,OAAO,CAACjB,uBAAwB;YAC7E,IAAIe,cAAcG,IAAI,CAAC,CAACC,OAASA,QAAQR,MAAMS,QAAQ,CAACD,QAAQ;gBAC9D,OAAOL;YACT;QACF;IACF;IAEA,OAAO;AACT,EAAE"}