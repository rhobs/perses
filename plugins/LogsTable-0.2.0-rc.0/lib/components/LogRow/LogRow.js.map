{"version":3,"sources":["../../../../src/components/LogRow/LogRow.tsx"],"sourcesContent":["// Copyright 2025 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// You may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React, { memo, useCallback } from 'react';\nimport { Box, Collapse } from '@mui/material';\nimport ChevronRight from 'mdi-material-ui/ChevronRight';\nimport { LogEntry } from '@perses-dev/core';\nimport { useSeverityColor } from '../hooks/useSeverity';\nimport { LogTimestamp } from './LogTimestamp';\nimport { LogRowContainer, LogRowContent, ExpandButton, LogText } from './LogsStyles';\nimport { LogDetailsTable } from './LogDetailsTable';\n\ninterface LogRowProps {\n  log?: LogEntry;\n  index: number;\n  isExpanded: boolean;\n  onToggle: (index: number) => void;\n  isExpandable?: boolean;\n  showTime?: boolean;\n  allowWrap?: boolean;\n}\n\nconst DefaultLogRow: React.FC<LogRowProps> = ({\n  log,\n  isExpanded,\n  index,\n  onToggle,\n  isExpandable = true,\n  showTime = false,\n  allowWrap = false,\n}) => {\n  const severityColor = useSeverityColor(log);\n\n  const handleToggle = useCallback(() => {\n    if (isExpandable) {\n      onToggle(index);\n    }\n  }, [isExpandable, onToggle, index]);\n\n  if (!log) return null;\n\n  return (\n    <LogRowContainer severityColor={severityColor}>\n      <LogRowContent onClick={handleToggle} isExpandable={isExpandable}>\n        {isExpandable && (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              width: '16px',\n              justifyContent: 'center',\n            }}\n          >\n            <ExpandButton size=\"small\" isExpanded={isExpanded}>\n              <ChevronRight sx={{ fontSize: '12px' }} />\n            </ExpandButton>\n          </Box>\n        )}\n\n        <LogTimestamp timestamp={log.timestamp} />\n\n        <Box\n          sx={{\n            display: 'flex',\n            gap: '10px',\n            marginLeft: '36px',\n          }}\n        >\n          <LogText variant=\"body2\" allowWrap={allowWrap}>\n            {log.line}\n          </LogText>\n        </Box>\n      </LogRowContent>\n\n      <Collapse in={isExpanded} timeout={200}>\n        <Box sx={{ padding: '8px' }}>\n          <Box\n            sx={{\n              display: 'grid',\n              gridTemplateColumns: !showTime ? '1fr' : '8px minmax(160px, max-content) 1fr',\n              gap: '12px',\n            }}\n          >\n            {showTime && (\n              <>\n                <Box />\n                <Box />\n              </>\n            )}\n            <Box>\n              <LogDetailsTable log={log.labels} />\n            </Box>\n          </Box>\n        </Box>\n      </Collapse>\n    </LogRowContainer>\n  );\n};\n\nexport const LogRow = memo(DefaultLogRow);\nLogRow.displayName = 'LogRow';\n"],"names":["React","memo","useCallback","Box","Collapse","ChevronRight","useSeverityColor","LogTimestamp","LogRowContainer","LogRowContent","ExpandButton","LogText","LogDetailsTable","DefaultLogRow","log","isExpanded","index","onToggle","isExpandable","showTime","allowWrap","severityColor","handleToggle","onClick","sx","display","alignItems","width","justifyContent","size","fontSize","timestamp","gap","marginLeft","variant","line","in","timeout","padding","gridTemplateColumns","labels","LogRow","displayName"],"mappings":";AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAEjC,OAAOA,SAASC,IAAI,EAAEC,WAAW,QAAQ,QAAQ;AACjD,SAASC,GAAG,EAAEC,QAAQ,QAAQ,gBAAgB;AAC9C,OAAOC,kBAAkB,+BAA+B;AAExD,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,eAAe,EAAEC,aAAa,EAAEC,YAAY,EAAEC,OAAO,QAAQ,eAAe;AACrF,SAASC,eAAe,QAAQ,oBAAoB;AAYpD,MAAMC,gBAAuC,CAAC,EAC5CC,GAAG,EACHC,UAAU,EACVC,KAAK,EACLC,QAAQ,EACRC,eAAe,IAAI,EACnBC,WAAW,KAAK,EAChBC,YAAY,KAAK,EAClB;IACC,MAAMC,gBAAgBf,iBAAiBQ;IAEvC,MAAMQ,eAAepB,YAAY;QAC/B,IAAIgB,cAAc;YAChBD,SAASD;QACX;IACF,GAAG;QAACE;QAAcD;QAAUD;KAAM;IAElC,IAAI,CAACF,KAAK,OAAO;IAEjB,qBACE,MAACN;QAAgBa,eAAeA;;0BAC9B,MAACZ;gBAAcc,SAASD;gBAAcJ,cAAcA;;oBACjDA,8BACC,KAACf;wBACCqB,IAAI;4BACFC,SAAS;4BACTC,YAAY;4BACZC,OAAO;4BACPC,gBAAgB;wBAClB;kCAEA,cAAA,KAAClB;4BAAamB,MAAK;4BAAQd,YAAYA;sCACrC,cAAA,KAACV;gCAAamB,IAAI;oCAAEM,UAAU;gCAAO;;;;kCAK3C,KAACvB;wBAAawB,WAAWjB,IAAIiB,SAAS;;kCAEtC,KAAC5B;wBACCqB,IAAI;4BACFC,SAAS;4BACTO,KAAK;4BACLC,YAAY;wBACd;kCAEA,cAAA,KAACtB;4BAAQuB,SAAQ;4BAAQd,WAAWA;sCACjCN,IAAIqB,IAAI;;;;;0BAKf,KAAC/B;gBAASgC,IAAIrB;gBAAYsB,SAAS;0BACjC,cAAA,KAAClC;oBAAIqB,IAAI;wBAAEc,SAAS;oBAAM;8BACxB,cAAA,MAACnC;wBACCqB,IAAI;4BACFC,SAAS;4BACTc,qBAAqB,CAACpB,WAAW,QAAQ;4BACzCa,KAAK;wBACP;;4BAECb,0BACC;;kDACE,KAAChB;kDACD,KAACA;;;0CAGL,KAACA;0CACC,cAAA,KAACS;oCAAgBE,KAAKA,IAAI0B,MAAM;;;;;;;;;AAO9C;AAEA,OAAO,MAAMC,uBAASxC,KAAKY,eAAe;AAC1C4B,OAAOC,WAAW,GAAG"}