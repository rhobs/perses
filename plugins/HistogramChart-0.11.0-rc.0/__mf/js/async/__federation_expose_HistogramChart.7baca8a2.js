"use strict";(self.chunk_HistogramChart=self.chunk_HistogramChart||[]).push([["759"],{4278:function(e,t,r){r.r(t),r.d(t,{HistogramChart:()=>x});var o=r(2540),n=r(3648),l=r(7266),i=r(3945),a=r(5632),s=r.n(a);let u={unit:"decimal"},h={defaultColor:"#56b4e9"};var d=r(315),c=r(8091),m=r(4628),p=r(451),f=r(4653),g=r(6331);function v(e){let{width:t,height:r,data:n,format:i,min:a,max:s,thresholds:u}=e,h=(0,l.useChartsTheme)(),d=(0,p.useMemo)(()=>n.buckets.map(e=>{let[t,r,o,n]=e;return{value:[parseFloat(r),parseFloat(o),parseFloat(n),t],itemStyle:{color:function(e,t,r,o){if(null==t?void 0:t.steps){let n=t.steps.map((n,l)=>e>=n.value?n.color??r.thresholds.palette[l]??t.defaultColor??o:null).filter(e=>null!==e);return n[n.length-1]??t.defaultColor??o}return(null==t?void 0:t.defaultColor)??o}(parseFloat(r),u,h,h.echartsTheme[0])}}}),[h,n.buckets,u]),c=(0,p.useMemo)(()=>{if(a)return a;if(d&&d[0]){var e;return Math.min(0,Math.floor((null==(e=d[0])?void 0:e.value[0])??0))}},[a,d]),m=(0,p.useMemo)(()=>{if(s)return s;if(d&&d[d.length-1]){var e;return Math.ceil((null==(e=d[d.length-1])?void 0:e.value[1])??1)}},[s,d]),f=(0,p.useMemo)(()=>d?{title:{show:!1},tooltip:{},xAxis:{scale:!1,min:c,max:m},yAxis:(0,l.getFormattedAxis)({},i),series:[{type:"custom",renderItem:function(e,t){var r,o;let n=t.value(2),l=t.coord([t.value(0),n]),i=null==(r=t.size)?void 0:r.call(t,[t.value(1)-t.value(0),n]),a=null==(o=t.style)?void 0:o.call(t);return{type:"rect",shape:{x:l[0],y:l[1],width:i[0],height:i[1]},style:a}},label:{show:!1},dimensions:["from","to"],encode:{x:[0,1],y:2,tooltip:[0,1],itemName:2},data:d}]}:h.noDataOption,[h.noDataOption,i,m,c,d]);return(0,o.jsx)(l.EChart,{style:{width:t,height:r},sx:{padding:`${h.container.padding.default}px`},option:f,theme:h.echartsTheme})}(0,f.Y)([g.a]);let x={PanelComponent:function(e){let{spec:t,contentDimensions:r,queryResults:n}=e,{min:i,max:a}=t,f=(0,l.useChartsTheme)(),g=s()({},u,t.format),x=s()({},h,t.thresholds),C=(0,p.useMemo)(()=>{let e=[];for(let t of n)for(let r of t.data.series){if(!r.histograms||0===r.histograms.length)continue;let[,t]=r.histograms[0];t&&t.buckets&&e.push({buckets:t.buckets})}return e},[n]);if(0===C.length)return(0,o.jsx)(d.A,{justifyContent:"center",height:"100%",children:(0,o.jsx)(c.A,{variant:"body2",textAlign:"center",children:"No data available (only native histograms are supported for now)"})});if(void 0===r)return null;let y=r.width/C.length-f.container.padding.default;return y<90&&C.length>1&&(y=90),(0,o.jsx)(d.A,{direction:"row",justifyContent:"center",alignItems:"center",sx:{overflowX:C.length>1?"scroll":"auto"},children:C.map((e,t)=>(0,o.jsx)(m.A,{children:(0,o.jsx)(v,{width:y,height:r.height,data:e,format:g,min:i,max:a,thresholds:x})},`histogram-series-${t}`))})},supportedQueryTypes:["TimeSeriesQuery"],queryOptions:{mode:"instant"},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:r}=e,a=s()({},u,r.format),d=s()({},h,r.thresholds),c="Enter value";"percent"===a.unit?c="0":"percent-decimal"===a.unit&&(c="0");let m="Enter value";return"percent"===a.unit?m="100":"percent-decimal"===a.unit&&(m="1"),(0,o.jsxs)(l.OptionsEditorGrid,{children:[(0,o.jsx)(l.OptionsEditorColumn,{children:(0,o.jsxs)(l.OptionsEditorGroup,{title:"Misc",children:[(0,o.jsx)(l.FormatControls,{value:a,onChange:e=>{t((0,i.produce)(r,t=>{t.format=e}))}}),(0,o.jsx)(l.OptionsEditorControl,{label:"Min",control:(0,o.jsx)(n.A,{type:"number",value:r.min??"",onChange:e=>{let o=e.target.value?Number(e.target.value):void 0;t((0,i.produce)(r,e=>{e.min=o}))},placeholder:c,sx:{width:"100%"}})}),(0,o.jsx)(l.OptionsEditorControl,{label:"Max",control:(0,o.jsx)(n.A,{type:"number",value:r.max??"",onChange:e=>{let o=e.target.value?Number(e.target.value):void 0;t((0,i.produce)(r,e=>{e.max=o}))},placeholder:m,sx:{width:"100%"}})})]})}),(0,o.jsx)(l.OptionsEditorColumn,{children:(0,o.jsx)(l.ThresholdsEditor,{thresholds:d,onChange:e=>{t((0,i.produce)(r,t=>{t.thresholds=e}))}})})]})}}],createInitialOptions:function(){return{format:u}}}}}]);