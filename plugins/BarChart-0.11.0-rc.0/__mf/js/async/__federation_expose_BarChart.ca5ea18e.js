"use strict";(self.chunk_BarChart=self.chunk_BarChart||[]).push([["746"],{87680:function(e,t,n){n.d(t,{Lu:()=>a,cV:()=>i,gE:()=>r,pG:()=>l});let a={first:function(e){return i(e,"first")},last:function(e){return i(e,"last")},"first-number":function(e){return i(e,"first-number")},"last-number":function(e){return i(e,"last-number")},mean:function(e){return i(e,"mean")},sum:function(e){return i(e,"sum")},min:function(e){return i(e,"min")},max:function(e){return i(e,"max")}},r={first:{label:"First",description:"First value"},last:{label:"Last",description:"Last value"},"first-number":{label:"First *",description:"First numeric value"},"last-number":{label:"Last *",description:"Last numeric value"},mean:{label:"Avg",description:"Average value excluding nulls"},sum:{label:"Sum",description:"The sum of all values"},min:{label:"Min",description:"Minimum value"},max:{label:"Max",description:"Maximum value"}};function l(e,t){let n=t.reduce((e,t)=>(e[t]=void 0,e),{}),a=0,r=0;return e.forEach((t,l)=>{let i=t[1];0===l&&"first"in n&&(n.first=i),l===e.length-1&&"last"in n&&(n.last=i),"number"==typeof i&&(a+=1,r+=i,"first-number"in n&&void 0===n["first-number"]&&(n["first-number"]=i),"last-number"in n&&(n["last-number"]=i),"min"in n&&("number"!=typeof n.min?n.min=i:n.min=Math.min(n.min,i)),"max"in n&&("number"!=typeof n.max?n.max=i:n.max=Math.max(n.max,i)))}),a>0&&"sum"in n&&(n.sum=r),a>0&&"mean"in n&&(n.mean=r/a),n}function i(e,t){return l(e,[t])[t]}},37694:function(e,t,n){n.r(t),n.d(t,{BarChart:()=>E});let a={unit:"decimal",shortValues:!0},r="desc",l="value";var i=n(62540),u=n(7013),o=n(37266),s=n(12826),m=n(57744),c=n(43945),d=n(25632),h=n.n(d),f=n(74628),p=n(85967),v=n(87680),b=n(74653),x=n(31373),g=n(59738),C=n(90652),y=n(72106),j=n(55875),M=n(37573);function w(e){let{width:t,height:n,data:a,format:r={unit:"decimal"},mode:l="value"}=e,u=(0,o.useChartsTheme)(),m=(0,p.useMemo)(()=>{if(!a||!a.length)return u.noDataOption;let e=[];return a.map(t=>{e.push([t.label,t.value])}),{title:{show:!1},dataset:[{dimensions:["label","value"],source:e}],xAxis:(0,o.getFormattedAxis)({},r),yAxis:{type:"category",splitLine:{show:!1},axisLabel:{overflow:"truncate",width:t/3}},series:{type:"bar",label:{show:!0,position:"right",formatter:e=>{if(e.data[1])return"percentage"===l?(0,s.Fl)(e.data[1],{unit:"percent",decimalPlaces:r.decimalPlaces}):(0,s.Fl)(e.data[1],r)},barMinWidth:14,barCategoryGap:6},itemStyle:{borderRadius:4,color:u.echartsTheme[0]}},tooltip:{appendToBody:!0,confine:!0,formatter:e=>e.data[1]&&`<b>${e.name}</b> &emsp; ${(0,s.Fl)(e.data[1],r)}`},grid:{left:"5%",right:"5%"}}},[a,u,t,l,r]);return(0,i.jsx)(f.A,{style:{width:t,height:n},sx:{overflow:"auto"},children:(0,i.jsx)(o.EChart,{style:{minHeight:n,height:a?20*a.length:"100%"},option:m,theme:u.echartsTheme})})}(0,b.Y)([x.a,g.a,C.a,y.a,j.a,M.a]);let E={PanelComponent:function(e){let{spec:{calculation:t,format:n,sort:a,mode:l},contentDimensions:u,queryResults:s}=e,m=(0,o.useChartsTheme)().container.padding.default,c=(0,p.useMemo)(()=>{let e,n=v.Lu[t],i=[];for(let e of s)for(let t of e.data.series){let e={value:n(t.values)??null,label:t.formattedName??""};i.push(e)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return"asc"===t?e.sort((e,t)=>null===e.value?1:null===t.value?-1:e.value===t.value?0:e.value<t.value?1:-1):e.sort((e,t)=>null===e.value?-1:null===t.value?1:e.value===t.value?0:e.value<t.value?-1:1)}(i,a);if("percentage"!==l)return u;return e=u.reduce((e,t)=>{let{value:n}=t;return e+(n??0)},0),u.map(t=>{let n=(t.value??0)/e*100;return{...t,value:n}})},[s,a,l,t]);return void 0===u?null:(0,i.jsx)(f.A,{sx:{padding:`${m}px`},children:(0,i.jsx)(w,{width:u.width-2*m,height:u.height-2*m,data:c,format:n,mode:l})})},panelOptionsEditorComponents:[{label:"Settings",content:function(e){let{onChange:t,value:n}=e,d=h()({},a,n.format);return(0,i.jsxs)(o.OptionsEditorGrid,{children:[(0,i.jsx)(o.OptionsEditorColumn,{children:(0,i.jsxs)(o.OptionsEditorGroup,{title:"Misc",children:[(0,i.jsx)(o.FormatControls,{value:d,onChange:e=>{t((0,c.produce)(n,t=>{t.format=e}))},disabled:"percentage"===n.mode}),(0,i.jsx)(m.CalculationSelector,{value:n.calculation,onChange:e=>{t((0,c.produce)(n,t=>{t.calculation=e}))}}),(0,i.jsx)(o.SortSelector,{value:n.sort,onChange:e=>{t((0,c.produce)(n,t=>{t.sort=e}))}}),(0,i.jsx)(o.ModeSelector,{value:n.mode,onChange:e=>{t((0,c.produce)(n,t=>{t.mode=e}))},disablePercentageMode:(0,s.GU)(d)})]})}),(0,i.jsx)(o.OptionsEditorColumn,{children:(0,i.jsx)(o.OptionsEditorGroup,{title:"Reset Settings",children:(0,i.jsx)(u.A,{variant:"outlined",color:"secondary",onClick:()=>{t((0,c.produce)(n,e=>{e.calculation="last",e.format=a,e.sort=r,e.mode=l}))},children:"Reset To Defaults"})})})]})}}],supportedQueryTypes:["TimeSeriesQuery"],createInitialOptions:function(){return{calculation:"last",format:a,sort:r,mode:l}}}}}]);