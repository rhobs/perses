{"version":3,"sources":["../../src/TracingGanttChartPanel.tsx"],"sourcesContent":["// Copyright 2024 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { PanelProps } from '@perses-dev/plugin-system';\nimport { NoDataOverlay, TextOverlay, useChartsTheme } from '@perses-dev/components';\nimport { Box } from '@mui/material';\nimport { ReactElement } from 'react';\nimport { TraceData } from '@perses-dev/core';\nimport { CustomLinks, TracingGanttChartOptions } from './gantt-chart-model';\nimport { TracingGanttChart } from './TracingGanttChart/TracingGanttChart';\n\nexport type TracingGanttChartPanelProps = PanelProps<TracingGanttChartOptions, TraceData>;\n\nexport function TracingGanttChartPanel(props: TracingGanttChartPanelProps): ReactElement {\n  const { spec, queryResults } = props;\n  const chartsTheme = useChartsTheme();\n  const contentPadding = chartsTheme.container.padding.default;\n\n  if (queryResults.length > 1) {\n    return <TextOverlay message=\"This panel does not support more than one query.\" />;\n  }\n\n  const trace = queryResults[0]?.data.trace;\n  if (!trace) {\n    return <NoDataOverlay resource=\"trace\" />;\n  }\n\n  const pluginSpec = queryResults[0]?.definition.spec.plugin.spec as { datasource?: { name?: string } } | undefined;\n  const datasourceName = pluginSpec?.datasource?.name;\n  const customLinks: CustomLinks | undefined = spec.links\n    ? {\n        variables: {\n          datasourceName: datasourceName ?? '',\n        },\n        links: spec.links,\n      }\n    : undefined;\n\n  return (\n    <Box sx={{ height: '100%', padding: `${contentPadding}px` }}>\n      <TracingGanttChart options={spec} customLinks={customLinks} trace={trace} />\n    </Box>\n  );\n}\n"],"names":["NoDataOverlay","TextOverlay","useChartsTheme","Box","TracingGanttChart","TracingGanttChartPanel","props","spec","queryResults","chartsTheme","contentPadding","container","padding","default","length","message","trace","data","resource","pluginSpec","definition","plugin","datasourceName","datasource","name","customLinks","links","variables","undefined","sx","height","options"],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAGjC,SAASA,aAAa,EAAEC,WAAW,EAAEC,cAAc,QAAQ,yBAAyB;AACpF,SAASC,GAAG,QAAQ,gBAAgB;AAIpC,SAASC,iBAAiB,QAAQ,wCAAwC;AAI1E,OAAO,SAASC,uBAAuBC,KAAkC;IACvE,MAAM,EAAEC,IAAI,EAAEC,YAAY,EAAE,GAAGF;IAC/B,MAAMG,cAAcP;IACpB,MAAMQ,iBAAiBD,YAAYE,SAAS,CAACC,OAAO,CAACC,OAAO;IAE5D,IAAIL,aAAaM,MAAM,GAAG,GAAG;QAC3B,qBAAO,KAACb;YAAYc,SAAQ;;IAC9B;IAEA,MAAMC,QAAQR,YAAY,CAAC,EAAE,EAAES,KAAKD;IACpC,IAAI,CAACA,OAAO;QACV,qBAAO,KAAChB;YAAckB,UAAS;;IACjC;IAEA,MAAMC,aAAaX,YAAY,CAAC,EAAE,EAAEY,WAAWb,KAAKc,OAAOd;IAC3D,MAAMe,iBAAiBH,YAAYI,YAAYC;IAC/C,MAAMC,cAAuClB,KAAKmB,KAAK,GACnD;QACEC,WAAW;YACTL,gBAAgBA,kBAAkB;QACpC;QACAI,OAAOnB,KAAKmB,KAAK;IACnB,IACAE;IAEJ,qBACE,KAACzB;QAAI0B,IAAI;YAAEC,QAAQ;YAAQlB,SAAS,GAAGF,eAAe,EAAE,CAAC;QAAC;kBACxD,cAAA,KAACN;YAAkB2B,SAASxB;YAAMkB,aAAaA;YAAaT,OAAOA;;;AAGzE"}