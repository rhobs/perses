{"version":3,"sources":["../../../../src/TracingGanttChart/DetailPane/DetailPane.tsx"],"sourcesContent":["// Copyright 2024 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Box, Chip, IconButton, Tab, Tabs, Typography } from '@mui/material';\nimport { ReactElement, useState } from 'react';\nimport CloseIcon from 'mdi-material-ui/Close';\nimport { Span, Trace } from '../trace';\nimport { CustomLinks } from '../../gantt-chart-model';\nimport { TraceAttributes } from './Attributes';\nimport { SpanEventList } from './SpanEvents';\nimport { SpanLinkList } from './SpanLinks';\n\nexport interface DetailPaneProps {\n  customLinks?: CustomLinks;\n  trace: Trace;\n  span: Span;\n  onCloseBtnClick: () => void;\n}\n\n/**\n * DetailPane renders a sidebar showing the span attributes etc.\n */\nexport function DetailPane(props: DetailPaneProps): ReactElement {\n  const { customLinks, trace, span, onCloseBtnClick } = props;\n  const [tab, setTab] = useState<'attributes' | 'events' | 'links'>('attributes');\n\n  // if the events tab is selected, and then a span without events is clicked,\n  // we need to switch the current selected tab back to the attributes tab.\n  if (tab === 'events' && span.events.length === 0) {\n    setTab('attributes');\n  }\n  // same as above, but for span links\n  if (tab === 'links' && span.links.length === 0) {\n    setTab('attributes');\n  }\n\n  return (\n    <Box>\n      <IconButton sx={{ float: 'right' }} onClick={onCloseBtnClick}>\n        <CloseIcon />\n      </IconButton>\n      <Typography sx={{ wordBreak: 'break-word' }}>{span.resource.serviceName}</Typography>\n      <Typography variant=\"h2\" sx={{ wordBreak: 'break-word' }}>\n        {span.name}\n      </Typography>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tab} onChange={(_, tab) => setTab(tab)} variant=\"scrollable\">\n          <Tab sx={{ p: 0 }} value=\"attributes\" label=\"Attributes\" />\n          {span.events.length > 0 && (\n            <Tab\n              value=\"events\"\n              label=\"Events\"\n              icon={<Chip label={span.events.length} />}\n              iconPosition=\"end\"\n              sx={{ minHeight: 48, height: 48 }} // MUI Tabs with icon are bigger than those without by default\n            />\n          )}\n          {span.links.length > 0 && (\n            <Tab\n              value=\"links\"\n              label=\"Links\"\n              icon={<Chip label={span.links.length} />}\n              iconPosition=\"end\"\n              sx={{ minHeight: 48, height: 48 }} // MUI Tabs with icon are bigger than those without by default\n            />\n          )}\n        </Tabs>\n      </Box>\n      {tab === 'attributes' && <TraceAttributes customLinks={customLinks} trace={trace} span={span} />}\n      {tab === 'events' && <SpanEventList customLinks={customLinks} trace={trace} span={span} />}\n      {tab === 'links' && <SpanLinkList customLinks={customLinks} span={span} />}\n    </Box>\n  );\n}\n"],"names":["Box","Chip","IconButton","Tab","Tabs","Typography","useState","CloseIcon","TraceAttributes","SpanEventList","SpanLinkList","DetailPane","props","customLinks","trace","span","onCloseBtnClick","tab","setTab","events","length","links","sx","float","onClick","wordBreak","resource","serviceName","variant","name","borderBottom","borderColor","value","onChange","_","p","label","icon","iconPosition","minHeight","height"],"mappings":";AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAEjC,SAASA,GAAG,EAAEC,IAAI,EAAEC,UAAU,EAAEC,GAAG,EAAEC,IAAI,EAAEC,UAAU,QAAQ,gBAAgB;AAC7E,SAAuBC,QAAQ,QAAQ,QAAQ;AAC/C,OAAOC,eAAe,wBAAwB;AAG9C,SAASC,eAAe,QAAQ,eAAe;AAC/C,SAASC,aAAa,QAAQ,eAAe;AAC7C,SAASC,YAAY,QAAQ,cAAc;AAS3C;;CAEC,GACD,OAAO,SAASC,WAAWC,KAAsB;IAC/C,MAAM,EAAEC,WAAW,EAAEC,KAAK,EAAEC,IAAI,EAAEC,eAAe,EAAE,GAAGJ;IACtD,MAAM,CAACK,KAAKC,OAAO,GAAGZ,SAA4C;IAElE,4EAA4E;IAC5E,yEAAyE;IACzE,IAAIW,QAAQ,YAAYF,KAAKI,MAAM,CAACC,MAAM,KAAK,GAAG;QAChDF,OAAO;IACT;IACA,oCAAoC;IACpC,IAAID,QAAQ,WAAWF,KAAKM,KAAK,CAACD,MAAM,KAAK,GAAG;QAC9CF,OAAO;IACT;IAEA,qBACE,MAAClB;;0BACC,KAACE;gBAAWoB,IAAI;oBAAEC,OAAO;gBAAQ;gBAAGC,SAASR;0BAC3C,cAAA,KAACT;;0BAEH,KAACF;gBAAWiB,IAAI;oBAAEG,WAAW;gBAAa;0BAAIV,KAAKW,QAAQ,CAACC,WAAW;;0BACvE,KAACtB;gBAAWuB,SAAQ;gBAAKN,IAAI;oBAAEG,WAAW;gBAAa;0BACpDV,KAAKc,IAAI;;0BAEZ,KAAC7B;gBAAIsB,IAAI;oBAAEQ,cAAc;oBAAGC,aAAa;gBAAU;0BACjD,cAAA,MAAC3B;oBAAK4B,OAAOf;oBAAKgB,UAAU,CAACC,GAAGjB,MAAQC,OAAOD;oBAAMW,SAAQ;;sCAC3D,KAACzB;4BAAImB,IAAI;gCAAEa,GAAG;4BAAE;4BAAGH,OAAM;4BAAaI,OAAM;;wBAC3CrB,KAAKI,MAAM,CAACC,MAAM,GAAG,mBACpB,KAACjB;4BACC6B,OAAM;4BACNI,OAAM;4BACNC,oBAAM,KAACpC;gCAAKmC,OAAOrB,KAAKI,MAAM,CAACC,MAAM;;4BACrCkB,cAAa;4BACbhB,IAAI;gCAAEiB,WAAW;gCAAIC,QAAQ;4BAAG;;wBAGnCzB,KAAKM,KAAK,CAACD,MAAM,GAAG,mBACnB,KAACjB;4BACC6B,OAAM;4BACNI,OAAM;4BACNC,oBAAM,KAACpC;gCAAKmC,OAAOrB,KAAKM,KAAK,CAACD,MAAM;;4BACpCkB,cAAa;4BACbhB,IAAI;gCAAEiB,WAAW;gCAAIC,QAAQ;4BAAG;;;;;YAKvCvB,QAAQ,8BAAgB,KAACT;gBAAgBK,aAAaA;gBAAaC,OAAOA;gBAAOC,MAAMA;;YACvFE,QAAQ,0BAAY,KAACR;gBAAcI,aAAaA;gBAAaC,OAAOA;gBAAOC,MAAMA;;YACjFE,QAAQ,yBAAW,KAACP;gBAAaG,aAAaA;gBAAaE,MAAMA;;;;AAGxE"}