{"version":3,"sources":["../../src/YAxisOptionsEditor.tsx"],"sourcesContent":["// Copyright 2023 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Switch, TextField } from '@mui/material';\n\nimport { OptionsEditorControl, OptionsEditorGroup, FormatControls, SettingsAutocomplete } from '@perses-dev/components';\nimport { ReactElement } from 'react';\nimport {\n  DEFAULT_FORMAT,\n  DEFAULT_Y_AXIS,\n  TimeSeriesChartYAxisOptions,\n  Y_AXIS_CONFIG,\n  LOG_BASE_OPTIONS,\n  LOG_BASE_CONFIG,\n  LOG_VALID_BASES,\n} from './time-series-chart-model';\n\nexport interface YAxisOptionsEditorProps {\n  value: TimeSeriesChartYAxisOptions;\n  onChange: (yAxis: TimeSeriesChartYAxisOptions) => void;\n}\n\nexport function YAxisOptionsEditor({ value, onChange }: YAxisOptionsEditorProps): ReactElement {\n  const logBase = LOG_BASE_CONFIG[LOG_VALID_BASES[value.logBase ?? 'none']];\n\n  return (\n    <OptionsEditorGroup title=\"Y Axis\">\n      <OptionsEditorControl\n        label=\"Show\"\n        control={\n          <Switch\n            checked={value.show ?? DEFAULT_Y_AXIS.show}\n            onChange={(e): void => {\n              onChange({\n                ...value,\n                show: e.target.checked,\n              });\n            }}\n          />\n        }\n      />\n      <FormatControls\n        value={value.format ?? DEFAULT_FORMAT}\n        onChange={(newFormat): void =>\n          onChange({\n            ...value,\n            format: newFormat,\n          })\n        }\n      />\n      <OptionsEditorControl\n        label={Y_AXIS_CONFIG.logBase.label}\n        control={\n          <SettingsAutocomplete\n            value={{\n              ...logBase,\n              id: logBase.label,\n            }}\n            options={LOG_BASE_OPTIONS}\n            onChange={(__, newValue) => {\n              const updatedValue: TimeSeriesChartYAxisOptions = {\n                ...value,\n                logBase: newValue.log,\n              };\n              onChange(updatedValue);\n            }}\n            disabled={value === undefined}\n            disableClearable\n          ></SettingsAutocomplete>\n        }\n      />\n      <OptionsEditorControl\n        label={Y_AXIS_CONFIG.label.label}\n        control={\n          <TextField\n            value={value.label ?? ''}\n            inputProps={{ 'aria-label': 'enter y axis label' }}\n            onChange={(e) =>\n              onChange({\n                ...value,\n                label: e.target.value,\n              })\n            }\n            placeholder=\"Default\"\n          />\n        }\n      />\n      <OptionsEditorControl\n        label={Y_AXIS_CONFIG.min.label}\n        control={\n          <TextField\n            type=\"number\"\n            value={value.min ?? ''}\n            onChange={(e) => {\n              // ensure empty value resets to undef to allow chart to calculate min\n              const newValue = e.target.value ? Number(e.target.value) : undefined;\n              onChange({\n                ...value,\n                min: newValue,\n              });\n            }}\n            placeholder=\"Default\"\n          />\n        }\n      />\n      <OptionsEditorControl\n        label={Y_AXIS_CONFIG.max.label}\n        control={\n          <TextField\n            type=\"number\"\n            value={value.max ?? ''}\n            onChange={(e) => {\n              // ensure empty value resets to undef to allow chart to calculate max\n              const newValue = e.target.value ? Number(e.target.value) : undefined;\n              onChange({\n                ...value,\n                max: newValue,\n              });\n            }}\n            placeholder=\"Default\"\n          />\n        }\n      />\n    </OptionsEditorGroup>\n  );\n}\n"],"names":["Switch","TextField","OptionsEditorControl","OptionsEditorGroup","FormatControls","SettingsAutocomplete","DEFAULT_FORMAT","DEFAULT_Y_AXIS","Y_AXIS_CONFIG","LOG_BASE_OPTIONS","LOG_BASE_CONFIG","LOG_VALID_BASES","YAxisOptionsEditor","value","onChange","logBase","title","label","control","checked","show","e","target","format","newFormat","id","options","__","newValue","updatedValue","log","disabled","undefined","disableClearable","inputProps","placeholder","min","type","Number","max"],"mappings":";AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAEjC,SAASA,MAAM,EAAEC,SAAS,QAAQ,gBAAgB;AAElD,SAASC,oBAAoB,EAAEC,kBAAkB,EAAEC,cAAc,EAAEC,oBAAoB,QAAQ,yBAAyB;AAExH,SACEC,cAAc,EACdC,cAAc,EAEdC,aAAa,EACbC,gBAAgB,EAChBC,eAAe,EACfC,eAAe,QACV,4BAA4B;AAOnC,OAAO,SAASC,mBAAmB,EAAEC,KAAK,EAAEC,QAAQ,EAA2B;IAC7E,MAAMC,UAAUL,eAAe,CAACC,eAAe,CAACE,MAAME,OAAO,IAAI,OAAO,CAAC;IAEzE,qBACE,MAACZ;QAAmBa,OAAM;;0BACxB,KAACd;gBACCe,OAAM;gBACNC,uBACE,KAAClB;oBACCmB,SAASN,MAAMO,IAAI,IAAIb,eAAea,IAAI;oBAC1CN,UAAU,CAACO;wBACTP,SAAS;4BACP,GAAGD,KAAK;4BACRO,MAAMC,EAAEC,MAAM,CAACH,OAAO;wBACxB;oBACF;;;0BAIN,KAACf;gBACCS,OAAOA,MAAMU,MAAM,IAAIjB;gBACvBQ,UAAU,CAACU,YACTV,SAAS;wBACP,GAAGD,KAAK;wBACRU,QAAQC;oBACV;;0BAGJ,KAACtB;gBACCe,OAAOT,cAAcO,OAAO,CAACE,KAAK;gBAClCC,uBACE,KAACb;oBACCQ,OAAO;wBACL,GAAGE,OAAO;wBACVU,IAAIV,QAAQE,KAAK;oBACnB;oBACAS,SAASjB;oBACTK,UAAU,CAACa,IAAIC;wBACb,MAAMC,eAA4C;4BAChD,GAAGhB,KAAK;4BACRE,SAASa,SAASE,GAAG;wBACvB;wBACAhB,SAASe;oBACX;oBACAE,UAAUlB,UAAUmB;oBACpBC,gBAAgB;;;0BAItB,KAAC/B;gBACCe,OAAOT,cAAcS,KAAK,CAACA,KAAK;gBAChCC,uBACE,KAACjB;oBACCY,OAAOA,MAAMI,KAAK,IAAI;oBACtBiB,YAAY;wBAAE,cAAc;oBAAqB;oBACjDpB,UAAU,CAACO,IACTP,SAAS;4BACP,GAAGD,KAAK;4BACRI,OAAOI,EAAEC,MAAM,CAACT,KAAK;wBACvB;oBAEFsB,aAAY;;;0BAIlB,KAACjC;gBACCe,OAAOT,cAAc4B,GAAG,CAACnB,KAAK;gBAC9BC,uBACE,KAACjB;oBACCoC,MAAK;oBACLxB,OAAOA,MAAMuB,GAAG,IAAI;oBACpBtB,UAAU,CAACO;wBACT,qEAAqE;wBACrE,MAAMO,WAAWP,EAAEC,MAAM,CAACT,KAAK,GAAGyB,OAAOjB,EAAEC,MAAM,CAACT,KAAK,IAAImB;wBAC3DlB,SAAS;4BACP,GAAGD,KAAK;4BACRuB,KAAKR;wBACP;oBACF;oBACAO,aAAY;;;0BAIlB,KAACjC;gBACCe,OAAOT,cAAc+B,GAAG,CAACtB,KAAK;gBAC9BC,uBACE,KAACjB;oBACCoC,MAAK;oBACLxB,OAAOA,MAAM0B,GAAG,IAAI;oBACpBzB,UAAU,CAACO;wBACT,qEAAqE;wBACrE,MAAMO,WAAWP,EAAEC,MAAM,CAACT,KAAK,GAAGyB,OAAOjB,EAAEC,MAAM,CAACT,KAAK,IAAImB;wBAC3DlB,SAAS;4BACP,GAAGD,KAAK;4BACR0B,KAAKX;wBACP;oBACF;oBACAO,aAAY;;;;;AAMxB"}