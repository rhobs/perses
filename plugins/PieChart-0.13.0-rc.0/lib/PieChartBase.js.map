{"version":3,"sources":["../../src/PieChartBase.tsx"],"sourcesContent":["// Copyright 2024 The Perses Authors\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { use } from 'echarts/core';\nimport { PieChart as EChartsPieChart } from 'echarts/charts';\nimport { GridComponent, DatasetComponent, TitleComponent, TooltipComponent, LegendComponent } from 'echarts/components';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { Box, useTheme } from '@mui/material';\nimport { ReactElement } from 'react';\nimport { EChart, useChartsTheme } from '@perses-dev/components';\n\nuse([\n  EChartsPieChart,\n  GridComponent,\n  DatasetComponent,\n  TitleComponent,\n  TooltipComponent,\n  LegendComponent,\n  CanvasRenderer,\n]);\nexport interface PieChartData {\n  id?: string;\n  name: string;\n  value: number | null;\n}\n\nexport interface PieChartBaseProps {\n  width: number;\n  height: number;\n  data: PieChartData[] | null;\n  showLabels?: boolean;\n}\n\nexport function PieChartBase(props: PieChartBaseProps): ReactElement {\n  const { width, height, data, showLabels } = props;\n  const chartsTheme = useChartsTheme();\n  const muiTheme = useTheme();\n\n  const option = {\n    tooltip: {\n      trigger: 'item',\n      formatter: '{b}: {c} ({d}%)',\n      appendTo: document.body,\n      confine: false,\n    },\n    series: [\n      {\n        type: 'pie',\n        radius: '90%',\n        label: {\n          show: Boolean(showLabels),\n          position: 'inner',\n          fontSize: 14,\n          formatter: '{b}\\n{c}',\n          overflow: 'truncate',\n          fontWeight: 'bold',\n        },\n        center: ['50%', '50%'],\n        data: data,\n        emphasis: {\n          itemStyle: {\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowColor: 'rgba(0, 0, 0, 0.5)',\n          },\n        },\n        itemStyle: {\n          borderRadius: 5,\n          borderColor: muiTheme.palette.background.default,\n          borderWidth: 2,\n        },\n      },\n    ],\n  };\n\n  return (\n    <Box\n      style={{\n        width: width,\n        height: height,\n      }}\n      sx={{ overflow: 'auto' }}\n    >\n      <EChart\n        sx={{\n          width: '100%',\n          height: '100%',\n        }}\n        option={option}\n        theme={chartsTheme.echartsTheme}\n      />\n    </Box>\n  );\n}\n"],"names":["use","PieChart","EChartsPieChart","GridComponent","DatasetComponent","TitleComponent","TooltipComponent","LegendComponent","CanvasRenderer","Box","useTheme","EChart","useChartsTheme","PieChartBase","props","width","height","data","showLabels","chartsTheme","muiTheme","option","tooltip","trigger","formatter","appendTo","document","body","confine","series","type","radius","label","show","Boolean","position","fontSize","overflow","fontWeight","center","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","borderRadius","borderColor","palette","background","default","borderWidth","style","sx","theme","echartsTheme"],"mappings":";AAAA,oCAAoC;AACpC,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,6CAA6C;AAC7C,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AAEjC,SAASA,GAAG,QAAQ,eAAe;AACnC,SAASC,YAAYC,eAAe,QAAQ,iBAAiB;AAC7D,SAASC,aAAa,EAAEC,gBAAgB,EAAEC,cAAc,EAAEC,gBAAgB,EAAEC,eAAe,QAAQ,qBAAqB;AACxH,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SAASC,GAAG,EAAEC,QAAQ,QAAQ,gBAAgB;AAE9C,SAASC,MAAM,EAAEC,cAAc,QAAQ,yBAAyB;AAEhEZ,IAAI;IACFE;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;CACD;AAcD,OAAO,SAASK,aAAaC,KAAwB;IACnD,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE,GAAGJ;IAC5C,MAAMK,cAAcP;IACpB,MAAMQ,WAAWV;IAEjB,MAAMW,SAAS;QACbC,SAAS;YACPC,SAAS;YACTC,WAAW;YACXC,UAAUC,SAASC,IAAI;YACvBC,SAAS;QACX;QACAC,QAAQ;YACN;gBACEC,MAAM;gBACNC,QAAQ;gBACRC,OAAO;oBACLC,MAAMC,QAAQhB;oBACdiB,UAAU;oBACVC,UAAU;oBACVZ,WAAW;oBACXa,UAAU;oBACVC,YAAY;gBACd;gBACAC,QAAQ;oBAAC;oBAAO;iBAAM;gBACtBtB,MAAMA;gBACNuB,UAAU;oBACRC,WAAW;wBACTC,YAAY;wBACZC,eAAe;wBACfC,aAAa;oBACf;gBACF;gBACAH,WAAW;oBACTI,cAAc;oBACdC,aAAa1B,SAAS2B,OAAO,CAACC,UAAU,CAACC,OAAO;oBAChDC,aAAa;gBACf;YACF;SACD;IACH;IAEA,qBACE,KAACzC;QACC0C,OAAO;YACLpC,OAAOA;YACPC,QAAQA;QACV;QACAoC,IAAI;YAAEf,UAAU;QAAO;kBAEvB,cAAA,KAAC1B;YACCyC,IAAI;gBACFrC,OAAO;gBACPC,QAAQ;YACV;YACAK,QAAQA;YACRgC,OAAOlC,YAAYmC,YAAY;;;AAIvC"}