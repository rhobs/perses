"use strict";(self.chunk_Loki=self.chunk_Loki||[]).push([["1501"],{63446:function(e,t,a){a.d(t,{J:()=>b});var r=a(62540),n=a(70451),i=a(56599),o=a(79058),s=a(63960),l=a(6365),c=a(31650);let d=(0,c.pn)({LineComment:c._A.comment,"Identifier StreamSelector":c._A.labelName,"LabelName LabelMatcher":c._A.labelName,String:c._A.string,"Number Float Duration":c._A.number,"LogRangeAggregation VectorAggregation":c._A.function(c._A.keyword),"And Or Unless":c._A.logicOperator,"Eq Neq Re Nre Gt Lt Gte Lte":c._A.compareOperator,"Add Sub Mul Div Mod Pow":c._A.arithmeticOperator,Pipe:c._A.operator,"By Without":c._A.keyword,"( )":c._A.paren,"[ ]":c._A.squareBracket,"{ }":c._A.brace,"âš ":c._A.invalid});var p=a(9714),u=a(95383);let m=['"',"`"];async function h(e,t){let{state:a,pos:r}=t,n=function(e,t,a){var r,n,i,o,s,c,d,p,u,h,f,g;let y=a.resolveInner(t,-1);switch(y.type.id){case l.MD:if((null===y.firstChild||(null==(r=y.firstChild)?void 0:r.type.id)===0)&&!e.sliceDoc(y.from,t).includes("}"))return{scope:{kind:"LabelName"},from:t};break;case l.sq:{let a=e.sliceDoc(y.from,t);if(a.endsWith(",")||a.endsWith(", "))return{scope:{kind:"LabelName"},from:t};break}case l.g$:if((null==(n=y.parent)?void 0:n.type.id)===l.sq)return{scope:{kind:"LabelName"},from:t};break;case l.gw:if((null==(i=y.parent)?void 0:i.type.id)===l.g$)return{scope:{kind:"LabelName"},from:y.from};break;case l.Eq:case l.l3:case l.Re:case l.q6:if((null==(o=y.parent)?void 0:o.type.id)===l.g$){let a=y.parent.firstChild;if((null==a?void 0:a.type.id)===l.gw)return{scope:{kind:"LabelValue",label:e.sliceDoc(a.from,a.to)},from:t}}break;case l.Qf:if((null==(s=y.parent)?void 0:s.type.id)===l.g$&&!/^".*"$/.test(e.sliceDoc(y.from,t))){let t=y.parent.firstChild;if((null==t?void 0:t.type.id)===l.gw)return{scope:{kind:"LabelValue",label:e.sliceDoc(t.from,t.to)},from:y.from+1}}break;case 0:if(((null==(c=y.prevSibling)?void 0:c.type.id)===l.Eq||(null==(d=y.prevSibling)?void 0:d.type.id)===l.l3||(null==(p=y.prevSibling)?void 0:p.type.id)===l.Re||(null==(u=y.prevSibling)?void 0:u.type.id)===l.q6)&&(null==(h=y.parent)?void 0:h.type.id)===l.g$){let t=y.parent.firstChild;if((null==t?void 0:t.type.id)===l.gw)return{scope:{kind:"LabelValue",label:e.sliceDoc(t.from,t.to)},from:m.includes(e.sliceDoc(y.from,y.from+1))?y.from+1:y.from}}if((null==(f=y.parent)?void 0:f.type.id)===l.MD||(null==(g=y.parent)?void 0:g.type.id)===l.sq)return{scope:{kind:"LabelName"},from:y.from}}}(a,r,(0,s.mv)(a));return n?{options:await f(e,n.scope),from:n.from,to:n.to}:null}async function f(e,t){switch(t.kind){case"LabelName":return g(e);case"LabelValue":return v(e,t.label)}}async function g(e){var t,a;if(!e.client)return[];let r=(null==(t=e.timeRange)?void 0:t.start)?(0,u.LE)(new Date(e.timeRange.start).getTime()):void 0,n=(null==(a=e.timeRange)?void 0:a.end)?(0,u.LE)(new Date(e.timeRange.end).getTime()):void 0;try{let t=await e.client.labels(r,n);if("success"===t.status)return t.data.map(e=>({label:e}));return[]}catch(e){return console.error("Error fetching label names:",e),[]}}function y(e,t,a,r){let n='"';m.includes(e.state.sliceDoc(a-1,a))&&(n=e.state.sliceDoc(a-1,a),a--),m.includes(e.state.sliceDoc(r,r+1))&&(n=e.state.sliceDoc(r,r+1),r++),t.label.includes("`")&&(n='"');let i=`${n}${function(e,t){if("`"===t)return e;let a=e;return(a=a.replaceAll("\\","\\\\")).replaceAll('"','\\"')}(t.label,n)}${n}`;e.dispatch((0,p.zH)(e.state,i,a,r))}async function v(e,t){var a,r;if(!e.client)return[];let n=(null==(a=e.timeRange)?void 0:a.start)?(0,u.LE)(new Date(e.timeRange.start).getTime()):void 0,i=(null==(r=e.timeRange)?void 0:r.end)?(0,u.LE)(new Date(e.timeRange.end).getTime()):void 0;try{let a=await e.client.labelValues(t,n,i);if("success"===a.status)return a.data.map(e=>({label:e??"",displayLabel:e??"(empty string)",apply:y}));return[]}catch(e){return console.error(`Error fetching values for label ${t}:`,e),[]}}function b(e){let{completionConfig:t,...a}=e,c=(0,i.A)(),p="dark"===c.palette.mode,u=(0,n.useMemo)(()=>(function(e){let t=s.bj.define({parser:l.K3.configure({props:[d]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}});if(e){let a=t.data.of({autocomplete:t=>h(e,t).catch(e=>(console.error("error during LogQL auto-complete",e),null))});return[t,a]}return[t]})(t),[t]),m=(0,n.useMemo)(()=>{let e="light"===c.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return o.Lz.theme({"&":{backgroundColor:"transparent !important",border:`1px solid ${e}`,borderRadius:`${c.shape.borderRadius}px`},"&.cm-focused.cm-editor":{outline:"none"},".cm-content":{padding:"8px"}})},[c]);return(0,r.jsx)(o.Ay,{...a,theme:p?"dark":"light",basicSetup:{lineNumbers:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1,foldGutter:!1,syntaxHighlighting:!0},extensions:[o.Lz.lineWrapping,u,m],placeholder:'Example: {job="my-service"} |= "error"'})}},46536:function(e,t,a){a.d(t,{L:()=>n,Aw:()=>i});var r=a(57744);let n="LokiDatasource";function i(e){return!(0,r.isVariableDatasource)(e)&&void 0===e.name}},95383:function(e,t,a){async function r(e,t){let a=n("/loki/api/v1/query",t.datasourceUrl);return a.searchParams.append("query",e.query),e.time&&a.searchParams.append("time",e.time),e.direction&&a.searchParams.append("direction",e.direction),e.limit&&a.searchParams.append("limit",e.limit.toString()),(await fetch(a.toString(),{method:"GET",headers:{"Content-Type":"application/json",...t.headers}})).json()}function n(e,t){if(t.startsWith("http://")||t.startsWith("https://"))return new URL(e,t);return new URL(t.endsWith("/")&&e.startsWith("/")?t+e.slice(1):t.endsWith("/")||e.startsWith("/")?t+e:t+"/"+e,window.location.origin)}function i(e){if(e instanceof Date)return Math.floor(e.getTime()/1e3).toString();if("number"==typeof e)return Math.floor(e>1e11?e/1e3:e).toString();if(/^\d+$/.test(e)){let t=Number(e);return Math.floor(t>1e11?t/1e3:t).toString()}return Math.floor(new Date(e).getTime()/1e3).toString()}async function o(e,t){let a=n("/loki/api/v1/query_range",t.datasourceUrl);return a.searchParams.append("query",e.query),a.searchParams.append("start",i(e.start)),a.searchParams.append("end",i(e.end)),e.step&&a.searchParams.append("step",e.step),e.interval&&a.searchParams.append("interval",e.interval),e.direction&&a.searchParams.append("direction",e.direction),e.limit&&a.searchParams.append("limit",e.limit.toString()),(await fetch(a.toString(),{method:"GET",headers:{"Content-Type":"application/json",...t.headers}})).json()}async function s(e,t,a){let r=n("/loki/api/v1/labels",a.datasourceUrl);return e&&r.searchParams.append("start",e),t&&r.searchParams.append("end",t),(await fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json",...a.headers}})).json()}async function l(e,t,a,r){let i=n(`/loki/api/v1/label/${e}/values`,r.datasourceUrl);return t&&i.searchParams.append("start",t),a&&i.searchParams.append("end",a),(await fetch(i.toString(),{method:"GET",headers:{"Content-Type":"application/json",...r.headers}})).json()}async function c(e,t,a,r){let i=n("/loki/api/v1/series",r.datasourceUrl);return e.forEach(e=>i.searchParams.append("match[]",e)),t&&i.searchParams.append("start",t),a&&i.searchParams.append("end",a),(await fetch(i.toString(),{method:"GET",headers:{"Content-Type":"application/json",...r.headers}})).json()}async function d(e,t){let a=n("/loki/api/v1/index/volume",t.datasourceUrl);return a.searchParams.append("query",e.query),a.searchParams.append("start",e.start),a.searchParams.append("end",e.end),e.step&&a.searchParams.append("step",e.step),e.limit&&a.searchParams.append("limit",e.limit.toString()),(await fetch(a.toString(),{method:"GET",headers:{"Content-Type":"application/json",...t.headers}})).json()}async function p(e,t){let a=n("/loki/api/v1/index/volume_range",t.datasourceUrl);return a.searchParams.append("query",e.query),a.searchParams.append("start",e.start),a.searchParams.append("end",e.end),e.step&&a.searchParams.append("step",e.step),e.limit&&a.searchParams.append("limit",e.limit.toString()),(await fetch(a.toString(),{method:"GET",headers:{"Content-Type":"application/json",...t.headers}})).json()}async function u(e,t,a,r){let i=n("/loki/api/v1/index/stats",r.datasourceUrl);return i.searchParams.append("query",e),t&&i.searchParams.append("start",t),a&&i.searchParams.append("end",a),(await fetch(i.toString(),{method:"GET",headers:{"Content-Type":"application/json",...r.headers}})).json()}a.d(t,{I4:()=>u,LE:()=>i,O4:()=>o,P:()=>r,Ul:()=>c,Vx:()=>l,WD:()=>s,gX:()=>p,pD:()=>d})},7140:function(e,t,a){a.d(t,{N:()=>r,S:()=>n});let r="LokiDatasource",n={kind:r}},64383:function(e,t,a){a.d(t,{Z:()=>i});var r=a(70451),n=a(38662);function i(e){let{onChange:t,value:a}=e,[i,o]=(0,r.useState)(a.query),[s,l]=(0,r.useState)(a.query);return a.query!==s&&(o(a.query),l(a.query)),{query:i,handleQueryChange:e=>{o(e)},handleQueryBlur:()=>{l(i),t((0,n.jM)(a,e=>{e.query=i}))}}}}}]);